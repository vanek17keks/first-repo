window._esConfig={"tenantId":"120D3C9","guid":"120D3C9B6931444D8CB08FA2A4977D43","orgId":3673,"siteId":3673,"events":{},"version":"latest","features":{"tracking":true,"formsVersion":3,"mulanRecoms":false},"productAvailableFields":[{"name":"tags_is_popular","query":"tags_is_popular: tagAsString(tag: \"is_popular\")"},{"name":"tags_discount","query":"tags_discount: tagAsString(tag: \"discount\")"},{"name":"price","query":"price"},{"name":"tags_bestseller_from_best_category","query":"tags_bestseller_from_best_category: tagAsString(tag: \"bestseller_from_best_category\")"},{"name":"tags_adult","query":"tags_adult: tagAsString(tag: \"adult\")"},{"name":"tags_has_discount","query":"tags_has_discount: tagAsString(tag: \"has_discount\")"},{"name":"tags_availability_date","query":"tags_availability_date: tagAsString(tag: \"availability_date\")"},{"name":"tags_num_clicks","query":"tags_num_clicks: tagAsString(tag: \"num_clicks\")"},{"name":"tags_custom_label_0","query":"tags_custom_label_0: tagAsString(tag: \"custom_label_0\")"},{"name":"category","query":"category"},{"name":"brand","query":"brand"},{"name":"category_grandparent","query":"categoryAncestor"},{"name":"tags_condition","query":"tags_condition: tagAsString(tag: \"condition\")"},{"name":"item_init","query":"id"},{"name":"tags_price_range","query":"tags_price_range: tagAsString(tag: \"price_range\")"},{"name":"name","query":"name"},{"name":"tags_all_category_names","query":"tags_all_category_names: tagAsString(tag: \"all_category_names\")"},{"name":"product_id","query":"product_id: tagAsString(tag: \"product_id\")"},{"name":"name_keyword","query":"name_keyword: tagAsString(tag: \"name_keyword\")"},{"name":"description","query":"descr"},{"name":"tags_categories_ids","query":"tags_categories_ids: tagAsString(tag: \"categories_ids\")"},{"name":"tags_top_purchase_score","query":"tags_top_purchase_score: tagAsString(tag: \"top_purchase_score\")"},{"name":"tags_has_clicks","query":"tags_has_clicks: tagAsString(tag: \"has_clicks\")"},{"name":"category_parent","query":"categoryParent"},{"name":"category_layout","query":"categoryLayout"},{"name":"tags_old_price","query":"tags_old_price: tagAsString(tag: \"old_price\")"},{"name":"tags_top_clicks_score","query":"tags_top_clicks_score: tagAsString(tag: \"top_clicks_score\")"},{"name":"tags_item_group_id","query":"tags_item_group_id: tagAsString(tag: \"item_group_id\")"},{"name":"tags_age_group","query":"tags_age_group: tagAsString(tag: \"age_group\")"},{"name":"url","query":"url"},{"name":"isinstock","query":"isInStock"},{"name":"category_id","query":"categoryId"},{"name":"imageurl","query":"imageUrl"},{"name":"item_group","query":"item_group: tagAsString(tag: \"item_group\")"},{"name":"tags_gtin","query":"tags_gtin: tagAsString(tag: \"gtin\")"},{"name":"tags_custom_label_3","query":"tags_custom_label_3: tagAsString(tag: \"custom_label_3\")"},{"name":"tags_description_price_range","query":"tags_description_price_range: tagAsString(tag: \"description_price_range\")"}],"crawler":{"pages":{"product":[],"catalog":[],"landing":[],"search":[],"main":[]},"product":{"url":[],"category_id":[],"brand":[],"description":[],"imgurl":[],"isInStock":[],"name":[],"price":[],"productKey":[],"tags":[],"child_ids":[]},"status_cart":[],"checkout":[],"user":[]},"recommendations":{},"recommendationVariants":{},"recommendationConfig":{"defaultLanguage":"uk","languages":["uk"]},"forms":{"4064":{"id":4064,"name":"230208_podborka_lovebooks_femalebooks_desktop","publishStatus":"DEBUG","testingStatus":"OFF"},"4036":{"id":4036,"name":"230206_knigodaruvannya_mobile","publishStatus":"DEBUG","testingStatus":"OFF"},"4068":{"id":4068,"name":"230208_podborka_lovebooks_femalebooks_mobile","publishStatus":"DEBUG","testingStatus":"OFF"},"4548":{"id":4548,"name":"230306_akcii_znizhki-na-hudozhnju-literaturu_all","publishStatus":"FOR_ALL","testingStatus":"OFF"},"3238":{"id":3238,"name":"NP_november2022","publishStatus":"DEBUG","testingStatus":"OFF"},"3239":{"id":3239,"name":"NP_desktop","publishStatus":"DEBUG","testingStatus":"OFF"},"4583":{"id":4583,"name":"230308_akcii_akcii_publishingofweek_ArtHuss_all","publishStatus":"FOR_ALL","testingStatus":"OFF"},"2027":{"id":2027,"name":"marka_mob","publishStatus":"DEBUG","testingStatus":"OFF"},"2028":{"id":2028,"name":"marka_web","publishStatus":"DEBUG","testingStatus":"OFF"},"2099":{"id":2099,"name":"marka_sert_web","publishStatus":"DEBUG","testingStatus":"OFF"},"2100":{"id":2100,"name":"marka_sert_mob","publishStatus":"DEBUG","testingStatus":"OFF"},"3988":{"id":3988,"name":"knigodaruvannya_desktop","publishStatus":"DEBUG","testingStatus":"OFF"},"3317":{"id":3317,"name":"BF 2022","publishStatus":"DEBUG","testingStatus":"OFF"},"4150":{"id":4150,"name":"230214_newbook_newbook_natalija-samojlenko_group_fitness_desktop","publishStatus":"FOR_ALL","testingStatus":"OFF"},"2008":{"id":2008,"name":"1937_mob","publishStatus":"DEBUG","testingStatus":"OFF"},"4506":{"id":4506,"name":"230304_akcii_promocode25_desktop","publishStatus":"FOR_ALL","testingStatus":"OFF"},"4570":{"id":4570,"name":"230307_akcii_e-gift-card-yakaboo_all","publishStatus":"FOR_ALL","testingStatus":"OFF"},"4602":{"id":4602,"name":"Test","publishStatus":"DEBUG","testingStatus":"OFF"},"4508":{"id":4508,"name":"230304_akcii_promocode25_mobile","publishStatus":"FOR_ALL","testingStatus":"OFF"},"637":{"id":637,"name":"ваппукп4","publishStatus":"DEBUG","testingStatus":"OFF"},"1982":{"id":1982,"name":"1937","publishStatus":"DEBUG","testingStatus":"OFF"},"1023":{"id":1023,"name":"кнопочка","publishStatus":"DEBUG","testingStatus":"OFF"}},"formVariants":{"f4548v4548":{"formId":4548,"id":"f4548v4548","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"5"},"operand":{"name":"VISITOR"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}},{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/detektiv.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/triller.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/sovremennaja-proza.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/proza-zhanry-i-techenija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/klassicheskaja-proza.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/kinoromany-jekranizacii.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/fantastika-fjentezi.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/ukrainskaja-literatura.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-03-13T23:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"dac42154-8d74-4a63-ad66-9eba45f8a4b2"},"f2028v2028":{"formId":2028,"id":"f2028v2028","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/business-money-economy.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"bac5ba89-024d-417b-9dcd-288ff908e320"},"f2099v2099":{"formId":2099,"id":"f2099v2099","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/business-money-economy.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"e0a722a1-1fc0-4262-a420-3e686c2f30b4"},"f3239v3239":{"formId":3239,"id":"f3239v3239","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/biografii-i-memuary.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/knigi-na-inostrannyh-jazykah.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"SHOW_AFTER","isActive":true,"params":{"date":"2022-11-16T13:44:26"}},{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2022-11-27T23:50:00"}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"ad9e5280-a620-463f-8d90-4b4dd88b130d"},"f4068v4068":{"formId":4068,"id":"f4068v4068","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/zhenskaja-proza.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/proza-zhanry-i-techenija/romanticheskaja-komedija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/psihologija-i-vzaimootnoshenija/ljubov-i-brak-vzaimootnoshenija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hobbi-i-dosug/ljubov-i-jerotika.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/jerotika.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-02-14T18:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{}},"f4508v4508":{"formId":4508,"id":"f4508v4508","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"5"},"operand":{"name":"VISITOR"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/detskaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija/ukraina.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/obschestvo-gosudarstvo-filosofija/voennoe-delo-oruzhie-specsluzhby.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"SHOW_AFTER","isActive":true,"params":{"date":"2023-03-03T01:00:00"}},{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-03-05T23:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"dc01a19e-d0aa-4b28-b060-6edf2f9f6fb7"},"f4036v4036":{"formId":4036,"id":"f4036v4036","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/detskaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/obschestvo-gosudarstvo-filosofija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-02-13T23:50:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"28e2916d-7d02-4805-8630-b8d311bc4fa5"},"f4602v4602":{"formId":4602,"id":"f4602v4602","type":"DETACHED","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"OR","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"e589afad-d7d1-4a61-9056-77194b812382"},"f4570v4570":{"formId":4570,"id":"f4570v4570","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"5"},"operand":{"name":"VISITOR"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}},{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/podarki.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/podarochnye-knigi.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-03-08T23:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"7ccc65b5-a93c-4be0-9d27-0d99c89890f9"},"f2027v2027":{"formId":2027,"id":"f2027v2027","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/business-money-economy.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"1dd20a94-9c65-44c4-ae98-9a90f8e6ed40"},"f3238v3238":{"formId":3238,"id":"f3238v3238","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"AND","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"91f99ef4-7ba3-43fc-971e-f665feef6482"},"f3317v3317":{"formId":3317,"id":"f3317v3317","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/business-money-economy.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/detskaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/uchebnaja-literatura-pedagogika.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"d0b95dbe-d1f6-4faa-b364-0f4b322d015b"},"f4583v4583":{"formId":4583,"id":"f4583v4583","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"5"},"operand":{"name":"VISITOR"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}},{"operator":"USER_LEAVES_PAGE","operand":{"name":"VISITOR"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/iskusstvo-kul-tura-fotografija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hobbi-i-dosug.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/kulinarija-eda-i-napitki.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija/kreativnost-i-tvorchestvo.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-03-12T23:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"e184d0e4-8ce5-4292-a4e5-630b87bc4b52"},"f2100v2100":{"formId":2100,"id":"f2100v2100","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/business-money-economy.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"4da9c671-10d3-477a-9fa3-9b39047455ae"},"f1982v1982":{"formId":1982,"id":"f1982v1982","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/obschestvo-gosudarstvo-filosofija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"ce3efe4f-a7c0-4f5e-b76d-a74230e8281f"},"f637v637":{"formId":637,"id":"f637v637","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]},{"relation":"AND","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/knigi/hudozhestvennaja-literatura/aforizmy-i-citaty.html"}]}]},"exclude":{"relation":"AND","groups":[]}}}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"appearanceRevision":"d5ff8678-35c5-491b-b1be-d1d66e68132b"},"f4064v4064":{"formId":4064,"id":"f4064v4064","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/zhenskaja-proza.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/proza-zhanry-i-techenija/romanticheskaja-komedija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/psihologija-i-vzaimootnoshenija/ljubov-i-brak-vzaimootnoshenija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hobbi-i-dosug/ljubov-i-jerotika.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura/jerotika.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-02-14T18:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"c762001d-aae6-4d61-9bb6-f4bc6dfdc2b6"},"f2008v2008":{"formId":2008,"id":"f2008v2008","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"MIN_INTERVAL","isActive":true,"params":{"amount":"1","unit":"HOUR"}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"MOBILE"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/obschestvo-gosudarstvo-filosofija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/"}]}]},"exclude":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/checkout/cart/"}]}]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"00c109c4-a2ca-48ad-b350-71cb1c5ea3bd"},"f1023v1023":{"formId":1023,"id":"f1023v1023","type":"LAUNCHER","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true},{"name":"ONCE_PER_SITE","isActive":false},{"name":"ONCE_PER_SESSION","isActive":false},{"name":"MIN_INTERVAL","isActive":false,"params":{"unit":"DAY","amount":5}}]},"CUSTOM_CODE":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"AND","groups":[]}}}},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"appearanceRevision":"3faea9b4-1bc1-4d3d-a92f-e667f5b55ceb"},"f3988v3988":{"formId":3988,"id":"f3988v3988","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/biografii-i-memuary.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/knigi-na-inostrannyh-jazykah.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-02-13T23:50:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"a38c9a2f-a9a1-4b2c-ba1f-95f48e420c8c"},"f4150v4150":{"formId":4150,"id":"f4150v4150","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/zdorov-e-fitnes-pravil-noe-pitanie.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/vospitanie-detej-knigi-dlja-roditelej.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-02-28T18:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"7eefd0c4-c672-42ca-88ef-368f5c4e7caa"},"f4506v4506":{"formId":4506,"id":"f4506v4506","type":"FLOATING_BOX","rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"SELECTOR":{"enabled":false,"selector":""},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[{"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"5"},"operand":{"name":"VISITOR"}},{"operator":"UN_ACTIVE_TIME","operand":{"name":"VISITOR"},"value":{"unit":"MINUTE","amount":"3"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/hudozhestvennaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/detskaja-literatura.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/samorazvitie-motivacija.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/istorija/ukraina.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/obschestvo-gosudarstvo-filosofija/voennoe-delo-oruzhie-specsluzhby.html"},{"operand":{"name":"URL"},"operator":"EQUALS","value":"https://www.yakaboo.ua/ua/knigi/komiksy-i-graficheskie-romany.html"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://www.yakaboo.ua/ua/checkout"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":true,"predicates":[{"name":"SHOW_AFTER","isActive":true,"params":{"date":"2023-03-03T01:00:00"}},{"name":"HIDE_AFTER","isActive":true,"params":{"date":"2023-03-05T23:00:00"}}]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2}}]}},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"asyncRules":{},"appearanceRevision":"14181abf-2236-4562-ac23-a26ff3a741a7"}},"formConfig":{"url":"https://esputnik.com/forms/v1","abTests":[],"utmTag":{"enabled":true,"customTagsEnabled":false,"utmSource":"widget","utmMedium":"email","utmCampaign":"$widgetName","utmContent":"$contactId","utmTerm":"$widgetType"}},"apiConfig":{"hostUrl":"https://esputnik.com/","scriptClientEventsUrl":"https://site-script.esputnik.com/site-script/v1/event","asyncRulesCheckUrl":"https://site-script.esputnik.com/async-rules/v1/{id}/check"}};//config end
window.scriptLog09u8y9 = function scriptLog09u8y9(logLevel, message, data) {
  var productPrefix = 'es';
  var config = window["_" + productPrefix + 'Config'];
  var tryCallback = function (cb) {
    try {
      return cb();
    } catch (e) {
      return undefined;
    }
  }

  function send(d) {
    var c = new XMLHttpRequest;
    var url = config.apiConfig && config.apiConfig.scriptClientEventsUrl || "https://site-script.esputnik.com/site-script/v1/event";
    c.open("POST", url, !0);
    c.setRequestHeader("Content-type", "application/json; charset=utf-8");
    c.send(JSON.stringify(d));
  }

  function composeError(data) {
    if (data instanceof Error) {
      return tryCallback(() => JSON.stringify({error: data.name + ' ' + data.message + ' ' + data.stack})) || 'UNHANDLED';
    } else {
      return tryCallback(() => JSON.stringify({error: data})) || 'UNHANDLED';
    }
  }

  let key = productPrefix + 'ScriptStatus';
  if (logLevel === 'OK') {
    tryCallback(() => localStorage.setItem(key, logLevel));
    return;
  }

  var d = {
    scriptVersion: config.version,
    orgId: +config.orgId,
    siteId: +config.siteId,
    tenantId: config.tenantId,
    guid: config.guid,
    url: window.location.href,
    message: message,
    log_level: logLevel
  };

  if (logLevel === 'ERROR') {

    var prevStatus = tryCallback(() => localStorage.getItem(key));
    if (prevStatus !== undefined && prevStatus !== logLevel) {
      tryCallback(() => localStorage.setItem(key, logLevel));
      d.data = composeError(data);
      send(d);
    }

  } else {
    d.data = tryCallback(() => JSON.stringify(data));
    send(d);
  }


}

try {
   'use strict';(function(){function Bb(a,b){return b={exports:{}},a(b,b.exports),b.exports}function Wf(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}function n(a,b,c){a:if("object"===typeof b&&null!==b){var d=b[Symbol.toPrimitive];if(void 0!==d){b=d.call(b,"string");if("object"!==typeof b)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}b=String(b)}b="symbol"===typeof b?b:String(b);b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,
configurable:!0,writable:!0}):a[b]=c;return a}function bb(a,b){var c=Array.isArray(a)?a:void 0;if(!c)a:{var d=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=d){var e,f,g,k=[],l=!0,h=!1;try{if(f=(d=d.call(a)).next,0===b){if(Object(d)!==d){c=void 0;break a}l=!1}else for(;!(l=(e=f.call(d)).done)&&(k.push(e.value),k.length!==b);l=!0);}catch(L){h=!0;var t=L}finally{try{if(!l&&null!=d.return&&(g=d.return(),Object(g)!==g)){c=void 0;break a}}finally{if(h)throw t;}}c=
k}else c=void 0}if(!(e=c))a:{if(a){if("string"===typeof a){e=Xf(a,b);break a}e=Object.prototype.toString.call(a).slice(8,-1);"Object"===e&&a.constructor&&(e=a.constructor.name);if("Map"===e||"Set"===e){e=Array.from(a);break a}if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)){e=Xf(a,b);break a}}e=void 0}if(!(a=e))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}
function Xf(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function Ma(a,b){return function(c){var d=c.property;c=c.context;var e;if(e=a===d)b?(d="number"===typeof c||"string"===typeof c?c[d]||Object.prototype.hasOwnProperty.call(c,d):c?d in c:!1,d=!d):d=!0,e=d;return e}}function ke(a){return function(b){let c=b.property;b=b.context;return 0===c.indexOf(a)&&!(c in b)&&c.length>a.length}}function le(a,b){if("number"===typeof b)return a[b];var c=b.charCodeAt(0),
d=91>c,e=a[b];if(void 0!==e)return e;d&&(b=String.fromCharCode(c).toLowerCase()+b.slice(1));d||(b=String.fromCharCode(c).toUpperCase()+b.slice(1));return a[b]}function hj(a){a=String(a);if(!(100<a.length)&&(a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a))){var b=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*b;case "weeks":case "week":case "w":return 6048E5*
b;case "days":case "day":case "d":return 864E5*b;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*b;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*b;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*b;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return b}}}function id(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}function pa(a,b){this.asts=a;this.config=R.mixin({escape:!1,unescape:{},valueMapper(a){return a}},
b);this._state={stop:!1,break:!1};this.customMethodHandlers=ij.concat(b?b.customMethodHandlers:[]);this.init()}function Yf(a,b){var c=a.length;b=b||0;for(var d=[],e=b-1;b<c;b++)if(!(b<=e)){var f=a[b],g=f.type,k=jj[g];!k&&"macro_call"===f.type&&Zf[f.id]&&(k=!0,f.type=f.id,delete f.id);if(k||"end"===g){if("end"===g)return{arr:d,step:b};f=Yf(a,b+1);e=f.step;f.arr.unshift(a[b]);d.push(f.arr)}else d.push(f)}return d}function kj(a){var b=this;let c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
300,d;return function(){for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];clearTimeout(d);d=setTimeout(()=>{a.apply(b,f)},c)}}function E(a){return ma.SYSTEM_ATTRIBUTE_PREFIX+a}function lj(a,b){return Object.keys(a).filter(a=>!b.includes(a)).reduce((b,d)=>Object.assign(Object.assign({},b),{[d]:a[d]}),{})}function $f(a,b){a&&Object.keys(a)&&Object.keys(a).forEach(b)}function mj(a,b){if(null==a){if(b)throw Error("Parameter 'str' is null or undefined.");return!1}if("boolean"===typeof a)return!0===
a;if("string"===typeof a){if(""==a)return!1;a=a.replace(/^\s+|\s+$/g,"");if("true"==a.toLowerCase()||"yes"==a.toLowerCase())return!0;a=a.replace(/,/g,".");a=a.replace(/^\s*\-\s*/g,"-")}return isNaN(a)?!1:0!=parseFloat(a)}function me(a,b,c){if(c===jd.AND)return a===b;if(c===jd.OR)return 0<b}function nj(a,b){return a.includes(b)}function oj(a,b){return a.startsWith(b)}function pj(a,b){return a.endsWith(b)}function qj(a,b){return a===b}function rj(a,b){return-1<a.search(b)}function sj(a,b){return b.split(",").map(a=>
a.trim()).some(b=>a.includes(b))}function tj(a,b,c){let d=cb.convert(b.unit,Q.MILLISECOND,b.amount);a=a.timeSpentOnPageMs>=d;ca.log("timeSpentOnPageMs  ".concat(c," ").concat(JSON.stringify(b)," = ").concat(a));return a}function uj(a,b,c){let d=cb.convert(b.unit,Q.MILLISECOND,b.amount);a=a.sessionDurationMs>=d;ca.log("timeSpentOnSiteMs  ".concat(c," ").concat(JSON.stringify(b)," = ").concat(a));return a}function vj(a,b,c){let d=cb.convert(b.unit,Q.MILLISECOND,b.amount);a=a.unActiveMs>d;ca.log("unActiveTimeMs  ".concat(c,
" ").concat(JSON.stringify(b)," = ").concat(a));return a}function wj(a){return document.querySelector(a)}function xj(a,b,c){b=!1;(a=a.formVariants&&a.formVariants[c.id])&&a.submit&&(b=!0);ca.log("VISITOR USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM ".concat(c.id," = ").concat(b));return b}function yj(a,b,c){a=!0===a.mouseout;ca.log("userLeavePage  ".concat(c," ").concat(JSON.stringify(b)," = ").concat(a));return a}function zj(a,b,c){a=a.readPercent>b;ca.log("pageReadPercent  ".concat(c," ").concat(JSON.stringify(b),
" = ").concat(a));return a}function Aj(a,b,c){a=a.sessionPagesCount>b;ca.log("pagesViewed  ".concat(c," ").concat(JSON.stringify(b)," = ").concat(a));return a}function ag(){var a=new URL(window.location.href);let b=a.searchParams.get("utm_content");a=a.searchParams.get("utm_source");if(b&&a&&a.toLowerCase().includes("esputnik"))return isNaN(b)?null:b}function Bj(a,b){if(a!==u.CustomerData&&b&&b.hasOwnProperty("GeneralInfo")){let a={};Object.keys(b.GeneralInfo).forEach(c=>{switch(c){case "user_email":c=
b.GeneralInfo.user_email;Fa.isEmail(c)&&(a.email=c);break;case "user_phone":c=b.GeneralInfo.user_phone;Fa.isPhoneNumber(c)&&(a.phone=c.match(Fa.phonePattern).join(""));break;case "externalCustomerId":a.externalCustomerId=b.GeneralInfo.externalCustomerId;break;case "user_es_contact_id":a.esContactId=b.GeneralInfo.user_es_contact_id}});a=Object.fromEntries(Object.entries(a).filter(a=>{a=bb(a,2);a[0];return!!a[1]}));0<Object.values(a).length&&(a={...Object.fromEntries(Object.entries(m.getCustomerData()).filter(a=>
{a=bb(a,2);a[0];return!!a[1]})),...a},m.setCustomerData(a))}}class Cj{constructor(a){this.commandsQueueProcessor=a}run(){this.commandsQueueProcessor.process()}}class v{static error(a){v._log("ERROR","RUNTIME_ERROR "+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:""),a)}static warn(a,b){v._log("WARN",a,b)}static info(a,b){v.log(a,b)}static log(a,b){v._log("INFO",a,b)}static _log(a,b,c){if("localhost"===window.location.hostname)console.log(a,b,c);else if("ERROR"===a&&console.log(a,b,c),"function"===
typeof window.scriptLog09u8y9)try{window.scriptLog09u8y9(a,b,c)}catch(d){console.error(d)}}}var kd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ld=function(a){return a&&a.Math==Math&&a},r=ld("object"==typeof globalThis&&globalThis)||ld("object"==typeof window&&window)||ld("object"==typeof self&&self)||ld("object"==typeof kd&&kd)||function(){return this}()||Function("return this")(),F=function(a){try{return!!a()}catch(b){return!0}},
A=!F(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),md=!F(function(){var a=function(){}.bind();return"function"!=typeof a||a.hasOwnProperty("prototype")}),nd=Function.prototype.call,O=md?nd.bind(nd):function(){return nd.apply(nd,arguments)},bg={}.propertyIsEnumerable,cg=Object.getOwnPropertyDescriptor,dg=cg&&!bg.call({1:2},1)?function(a){a=cg(this,a);return!!a&&a.enumerable}:bg,Cb=function(a,b){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:b}},
eg=Function.prototype,ne=eg.call,Dj=md&&eg.bind.bind(ne,ne),p=md?Dj:function(a){return function(){return ne.apply(a,arguments)}},Ej=p({}.toString),Fj=p("".slice),Db=function(a){return Fj(Ej(a),8,-1)},oe=Object,Gj=p("".split),Eb=F(function(){return!oe("z").propertyIsEnumerable(0)})?function(a){return"String"==Db(a)?Gj(a,""):oe(a)}:oe,od=function(a){return null===a||void 0===a},Hj=TypeError,ia=function(a){if(od(a))throw Hj("Can't call method on "+a);return a},pd="object"==typeof document&&document.all,
fg="undefined"==typeof pd&&void 0!==pd,J=fg?function(a){return"function"==typeof a||a===pd}:function(a){return"function"==typeof a},M=fg?function(a){return"object"==typeof a?null!==a:J(a)||a===pd}:function(a){return"object"==typeof a?null!==a:J(a)},Hc=function(a,b){if(2>arguments.length){var c=r[a];c=J(c)?c:void 0}else c=r[a]&&r[a][b];return c},Fb=p({}.isPrototypeOf),ac="undefined"!=typeof navigator&&String(navigator.userAgent)||"",gg=r.process,hg=r.Deno,ig=gg&&gg.versions||hg&&hg.version,jg=ig&&
ig.v8;if(jg){var Na=jg.split(".");var pe=0<Na[0]&&4>Na[0]?1:+(Na[0]+Na[1])}!pe&&ac&&(Na=ac.match(/Edge\/(\d+)/),(!Na||74<=Na[1])&&(Na=ac.match(/Chrome\/(\d+)/))&&(pe=+Na[1]));var qd=pe,kg=!!Object.getOwnPropertySymbols&&!F(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&qd&&41>qd}),lg=kg&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ij=Object,rd=lg?function(a){return"symbol"==typeof a}:function(a){var b=Hc("Symbol");return J(b)&&Fb(b.prototype,Ij(a))},Jj=
String,Ic=function(a){try{return Jj(a)}catch(b){return"Object"}},Kj=TypeError,Jc=function(a){if(J(a))return a;throw Kj(Ic(a)+" is not a function");},sd=function(a,b){a=a[b];return od(a)?void 0:Jc(a)},Lj=TypeError,Mj=Object.defineProperty,qe=function(a,b){try{Mj(r,a,{value:b,configurable:!0,writable:!0})}catch(c){r[a]=b}return b},db=r["__core-js_shared__"]||qe("__core-js_shared__",{}),mg=Bb(function(a){(a.exports=function(a,c){return db[a]||(db[a]=void 0!==c?c:{})})("versions",[]).push({version:"3.29.0",
mode:"global",copyright:"\u00a9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),eb=Object,Nj=p({}.hasOwnProperty),w=Object.hasOwn||function(a,b){return Nj(eb(ia(a)),b)},Oj=0,Pj=Math.random(),Qj=p((1).toString),re=function(a){return"Symbol("+(void 0===a?"":a)+")_"+Qj(++Oj+Pj,36)},bc=r.Symbol,se=mg("wks"),Rj=lg?bc["for"]||bc:bc&&bc.withoutSetter||re,N=function(a){w(se,a)||(se[a]=kg&&w(bc,a)?
bc[a]:Rj("Symbol."+a));return se[a]},Sj=TypeError,Tj=N("toPrimitive"),ng=function(a,b){if(!M(a)||rd(a))return a;var c=sd(a,Tj);if(c){void 0===b&&(b="default");a=O(c,a,b);if(!M(a)||rd(a))return a;throw Sj("Can't convert object to primitive value");}void 0===b&&(b="number");var d,e;if("string"===b&&J(d=a.toString)&&!M(e=O(d,a)))a=e;else if(J(d=a.valueOf)&&!M(e=O(d,a)))a=e;else if("string"!==b&&J(d=a.toString)&&!M(e=O(d,a)))a=e;else throw Lj("Can't convert object to primitive value");return a},cc=function(a){a=
ng(a,"string");return rd(a)?a:a+""},Kc=r.document,te=M(Kc)&&M(Kc.createElement),og=!A&&!F(function(){return 7!=Object.defineProperty(te?Kc.createElement("div"):{},"a",{get:function(){return 7}}).a}),pg=Object.getOwnPropertyDescriptor,td=A?pg:function(a,b){a=Eb(ia(a));b=cc(b);if(og)try{return pg(a,b)}catch(c){}if(w(a,b))return Cb(!O(dg,a,b),a[b])},qg=A&&F(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Uj=String,Vj=TypeError,S=function(a){if(M(a))return a;
throw Vj(Uj(a)+" is not an object");},Wj=TypeError,ue=Object.defineProperty,Xj=Object.getOwnPropertyDescriptor,Ca={f:A?qg?function(a,b,c){S(a);b=cc(b);S(c);if("function"===typeof a&&"prototype"===b&&"value"in c&&"writable"in c&&!c.writable){var d=Xj(a,b);d&&d.writable&&(a[b]=c.value,c={configurable:"configurable"in c?c.configurable:d.configurable,enumerable:"enumerable"in c?c.enumerable:d.enumerable,writable:!1})}return ue(a,b,c)}:ue:function(a,b,c){S(a);b=cc(b);S(c);if(og)try{return ue(a,b,c)}catch(d){}if("get"in
c||"set"in c)throw Wj("Accessors not supported");"value"in c&&(a[b]=c.value);return a}},da=A?function(a,b,c){return Ca.f(a,b,Cb(1,c))}:function(a,b,c){a[b]=c;return a},rg=Function.prototype,Yj=A&&Object.getOwnPropertyDescriptor,sg=w(rg,"name"),ve=sg&&"something"===function(){}.name,ud=sg&&(!A||A&&Yj(rg,"name").configurable),Zj=p(Function.toString);J(db.inspectSource)||(db.inspectSource=function(a){return Zj(a)});var tg=db.inspectSource,ug=r.WeakMap,ak=J(ug)&&/native code/.test(String(ug)),vg=mg("keys"),
we=function(a){return vg[a]||(vg[a]=re(a))},xe={},ye=r.TypeError,bk=r.WeakMap;if(ak||db.state){var Ga=db.state||(db.state=new bk);Ga.get=Ga.get;Ga.has=Ga.has;Ga.set=Ga.set;var ze=function(a,b){if(Ga.has(a))throw ye("Object already initialized");b.facade=a;Ga.set(a,b);return b};var vd=function(a){return Ga.get(a)||{}};var Ae=function(a){return Ga.has(a)}}else{var dc=we("state");xe[dc]=!0;ze=function(a,b){if(w(a,dc))throw ye("Object already initialized");b.facade=a;da(a,dc,b);return b};vd=function(a){return w(a,
dc)?a[dc]:{}};Ae=function(a){return w(a,dc)}}var T={set:ze,get:vd,has:Ae,enforce:function(a){return Ae(a)?vd(a):ze(a,{})},getterFor:function(a){return function(b){var c;if(!M(b)||(c=vd(b)).type!==a)throw ye("Incompatible receiver, "+a+" required");return c}}},Be=Bb(function(a){var b=T.enforce,c=T.get,d=String,e=Object.defineProperty,f=p("".slice),g=p("".replace),k=p([].join),l=A&&!F(function(){return 8!==e(function(){},"length",{value:8}).length}),h=String(String).split("String");a=a.exports=function(a,
c,q){"Symbol("===f(d(c),0,7)&&(c="["+g(d(c),/^Symbol\(([^)]*)\)/,"$1")+"]");q&&q.getter&&(c="get "+c);q&&q.setter&&(c="set "+c);if(!w(a,"name")||ud&&a.name!==c)A?e(a,"name",{value:c,configurable:!0}):a.name=c;l&&q&&w(q,"arity")&&a.length!==q.arity&&e(a,"length",{value:q.arity});try{q&&w(q,"constructor")&&q.constructor?A&&e(a,"prototype",{writable:!1}):a.prototype&&(a.prototype=void 0)}catch(Gb){}q=b(a);w(q,"source")||(q.source=k(h,"string"==typeof c?c:""));return a};Function.prototype.toString=a(function(){return J(this)&&
c(this).source||tg(this)},"toString")}),na=function(a,b,c,d){d||(d={});var e=d.enumerable,f=void 0!==d.name?d.name:b;J(c)&&Be(c,f,d);if(d.global)e?a[b]=c:qe(b,c);else{try{d.unsafe?a[b]&&(e=!0):delete a[b]}catch(g){}e?a[b]=c:Ca.f(a,b,{value:c,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return a},ck=Math.ceil,dk=Math.floor,ek=Math.trunc||function(a){a=+a;return(0<a?dk:ck)(a)},ec=function(a){a=+a;return a!==a||0===a?0:ek(a)},fk=Math.max,gk=Math.min,Hb=function(a,b){a=ec(a);
return 0>a?fk(a+b,0):gk(a,b)},hk=Math.min,va=function(a){return 0<a?hk(ec(a),9007199254740991):0},wg=function(a){return function(b,c,d){b=Eb(ia(b));var e=va(b.length);d=Hb(d,e);if(a&&c!=c)for(;e>d;){if(c=b[d++],c!=c)return!0}else for(;e>d;d++)if((a||d in b)&&b[d]===c)return a||d||0;return!a&&-1}},ik={includes:wg(!0),indexOf:wg(!1)}.indexOf,xg=p([].push),yg=function(a,b){a=Eb(ia(a));var c=0,d=[],e;for(e in a)!w(xe,e)&&w(a,e)&&xg(d,e);for(;b.length>c;)w(a,e=b[c++])&&(~ik(d,e)||xg(d,e));return d},wd=
"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),jk=wd.concat("length","prototype"),Ce={f:Object.getOwnPropertyNames||function(a){return yg(a,jk)}},xd=Object.getOwnPropertySymbols,kk=p([].concat),lk=Hc("Reflect","ownKeys")||function(a){var b=Ce.f(S(a));return xd?kk(b,xd(a)):b},zg=function(a,b,c){for(var d=lk(b),e=Ca.f,f=td,g=0;g<d.length;g++){var k=d[g];w(a,k)||c&&w(c,k)||e(a,k,f(b,k))}},mk=/#|\.prototype\./,Lc=function(a,b){a=nk[ok(a)];return a==
pk?!0:a==qk?!1:J(b)?F(b):!!b},ok=Lc.normalize=function(a){return String(a).replace(mk,".").toLowerCase()},nk=Lc.data={},qk=Lc.NATIVE="N",pk=Lc.POLYFILL="P",rk=td,ea=function(a,b){var c=a.target,d=a.global,e=a.stat,f,g,k;if(g=d?r:e?r[c]||qe(c,{}):(r[c]||{}).prototype)for(k in b){var l=b[k];var h=a.dontCallGetSet?(f=rk(g,k))&&f.value:g[k];f=Lc(d?k:c+(e?".":"#")+k,a.forced);if(!f&&void 0!==h){if(typeof l==typeof h)continue;zg(l,h)}(a.sham||h&&h.sham)&&da(l,"sham",!0);na(g,k,l,a)}};ea({global:!0,forced:r.globalThis!==
r},{globalThis:r});var Ag={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,
TouchList:0},De=(te?Kc.createElement("span"):{}).classList,Bg=De&&De.constructor&&De.constructor.prototype,sk=Bg===Object.prototype?void 0:Bg,yd=Object.keys||function(a){return yg(a,wd)},tk={f:A&&!qg?Object.defineProperties:function(a,b){S(a);var c=Eb(ia(b));b=yd(b);for(var d=b.length,e=0,f;d>e;)Ca.f(a,f=b[e++],c[f]);return a}},uk=Hc("document","documentElement"),Cg=we("IE_PROTO"),Ee=function(){},Dg=function(a){a.write("<script>\x3c/script>");a.close();return a.parentWindow.Object},zd,Ad=function(){try{zd=
new ActiveXObject("htmlfile")}catch(b){}if("undefined"!=typeof document)if(document.domain&&zd)var a=Dg(zd);else a=te?Kc.createElement("iframe"):{},a.style.display="none",uk.appendChild(a),a.src="javascript:",a=a.contentWindow.document,a.open(),a.write("<script>document.F=Object\x3c/script>"),a.close(),a=a.F;else a=Dg(zd);Ad=a;for(a=wd.length;a--;)delete Ad.prototype[wd[a]];return Ad()};xe[Cg]=!0;var Bd=Object.create||function(a,b){if(null!==a){Ee.prototype=S(a);var c=new Ee;Ee.prototype=null;c[Cg]=
a}else c=Ad();return void 0===b?c:tk.f(c,b)},vk=Ca.f,Mc=N("unscopables"),Nc=Array.prototype;void 0==Nc[Mc]&&vk(Nc,Mc,{configurable:!0,value:Bd(null)});var fc={},wk=!F(function(){function a(){}a.prototype.constructor=null;return Object.getPrototypeOf(new a)!==a.prototype}),Eg=we("IE_PROTO"),Fe=Object,xk=Fe.prototype,fb=wk?Fe.getPrototypeOf:function(a){a=eb(ia(a));if(w(a,Eg))return a[Eg];var b=a.constructor;return J(b)&&a instanceof b?b.prototype:a instanceof Fe?xk:null},Ge=N("iterator"),Fg=!1,Ib;if([].keys){var Gg=
[].keys();if("next"in Gg){var Hg=fb(fb(Gg));Hg!==Object.prototype&&(Ib=Hg)}else Fg=!0}if(!M(Ib)||F(function(){var a={};return Ib[Ge].call(a)!==a}))Ib={};J(Ib[Ge])||na(Ib,Ge,function(){return this});var He=Ib,Cd=Fg,yk=Ca.f,Ig=N("toStringTag"),gc=function(a,b,c){a&&!c&&(a=a.prototype);a&&!w(a,Ig)&&yk(a,Ig,{configurable:!0,value:b})},zk=function(){return this},Jg=function(a,b,c,d){b+=" Iterator";a.prototype=Bd(He,{next:Cb(+!d,c)});gc(a,b,!1);fc[b]=zk;return a},Ak=String,Bk=TypeError,V=Object.setPrototypeOf||
("__proto__"in{}?function(){var a=!1,b={};try{a:{try{var c=p(Jc(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set));break a}catch(d){}c=void 0}c(b,[]);a=b instanceof Array}catch(d){}return function(b,e){S(b);if("object"!=typeof e&&!J(e))throw Bk("Can't set "+Ak(e)+" as a prototype");a?c(b,e):b.__proto__=e;return b}}():void 0),Oc=N("iterator"),Ck=function(){return this},Kg=function(a,b,c,d,e,f,g){Jg(c,b,d);d=function(a){if(a===e&&m)return m;if(!Cd&&a in h)return h[a];switch(a){case "keys":return function(){return new c(this,
a)};case "values":return function(){return new c(this,a)};case "entries":return function(){return new c(this,a)}}return function(){return new c(this)}};var k=b+" Iterator",l=!1,h=a.prototype,t=h[Oc]||h["@@iterator"]||e&&h[e],m=!Cd&&t||d(e),q="Array"==b?h.entries||t:t,n;q&&(a=fb(q.call(new a)),a!==Object.prototype&&a.next&&(fb(a)!==He&&(V?V(a,He):J(a[Oc])||na(a,Oc,Ck)),gc(a,k,!0)));ve&&"values"==e&&t&&"values"!==t.name&&(ud?da(h,"name","values"):(l=!0,m=function(){return O(t,this)}));if(e){var p={values:d("values"),
keys:f?m:d("keys"),entries:d("entries")};if(g)for(n in p)!Cd&&!l&&n in h||na(h,n,p[n]);else ea({target:b,proto:!0,forced:Cd||l},p)}h[Oc]!==m&&na(h,Oc,m,{name:e});fc[b]=m;return p},hc=function(a,b){return{value:a,done:b}},Dk=Ca.f,Ek=T.set,Fk=T.getterFor("Array Iterator"),Pc=Kg(Array,"Array",function(a,b){Ek(this,{type:"Array Iterator",target:Eb(ia(a)),index:0,kind:b})},function(){var a=Fk(this),b=a.target,c=a.kind,d=a.index++;return!b||d>=b.length?(a.target=void 0,hc(void 0,!0)):"keys"==c?hc(d,!1):
"values"==c?hc(b[d],!1):hc([d,b[d]],!1)},"values"),Lg=fc.Arguments=fc.Array;Nc[Mc].keys=!0;Nc[Mc].values=!0;Nc[Mc].entries=!0;if(A&&"values"!==Lg.name)try{Dk(Lg,"name",{value:"values"})}catch(a){}var Ie=N("iterator"),Mg=N("toStringTag"),Je=Pc.values,Ng=function(a,b){if(a){if(a[Ie]!==Je)try{da(a,Ie,Je)}catch(d){a[Ie]=Je}a[Mg]||da(a,Mg,b);if(Ag[b])for(var c in Pc)if(a[c]!==Pc[c])try{da(a,c,Pc[c])}catch(d){a[c]=Pc[c]}}},Dd;for(Dd in Ag)Ng(r[Dd]&&r[Dd].prototype,Dd);Ng(sk,"DOMTokenList");var Gk=N("toStringTag"),
Og={};Og[Gk]="z";var Hk="[object z]"===String(Og),Ik=N("toStringTag"),Jk=Object,Kk="Arguments"==Db(function(){return arguments}()),Oa=Hk?Db:function(a){var b;if(void 0===a)var c="Undefined";else{if(null===a)var d="Null";else{a:{var e=a=Jk(a);try{d=e[Ik];break a}catch(f){}d=void 0}d="string"==typeof(c=d)?c:Kk?Db(a):"Object"==(b=Db(a))&&J(a.callee)?"Arguments":b}c=d}return c},Lk=String,y=function(a){if("Symbol"===Oa(a))throw TypeError("Cannot convert a Symbol value to a string");return Lk(a)},U=function(a,
b,c){c.get&&Be(c.get,b,{getter:!0});c.set&&Be(c.set,b,{setter:!0});return Ca.f(a,b,c)},Pa=r.Symbol,Jb=Pa&&Pa.prototype;if(A&&J(Pa)&&(!("description"in Jb)||void 0!==Pa().description)){var Pg={},Ed=function(){var a=1>arguments.length||void 0===arguments[0]?void 0:y(arguments[0]),b=Fb(Jb,this)?new Pa(a):void 0===a?Pa():Pa(a);""===a&&(Pg[b]=!0);return b};zg(Ed,Pa);Ed.prototype=Jb;Jb.constructor=Ed;var Mk="Symbol(test)"==String(Pa("test")),Nk=p(Jb.valueOf),Ok=p(Jb.toString),Pk=/^Symbol\((.*)\)[^)]+$/,
Qk=p("".replace),Rk=p("".slice);U(Jb,"description",{configurable:!0,get:function(){var a=Nk(this);if(w(Pg,a))return"";a=Ok(a);a=Mk?Rk(a,7,-1):Qk(a,Pk,"$1");return""===a?void 0:a}});ea({global:!0,constructor:!0,forced:!0},{Symbol:Ed})}var ic=function(a){if("Function"===Db(a))return p(a)},Qg="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ke=function(a,b,c){for(var d in b)na(a,d,b[d],c);return a},Sk=TypeError,Qa=function(a,b){if(Fb(b,a))return a;throw Sk("Incorrect invocation");},Tk=RangeError,
jc=function(a){if(void 0===a)return 0;a=ec(a);var b=va(a);if(a!==b)throw Tk("Wrong length or index");return b},Uk=Array,Vk=Math.abs,Ra=Math.pow,Wk=Math.floor,Xk=Math.log,Yk=Math.LN2,Rg=function(a){var b=eb(ia(this)),c=va(b.length),d=arguments.length,e=Hb(1<d?arguments[1]:void 0,c);d=2<d?arguments[2]:void 0;for(c=void 0===d?c:Hb(d,c);c>e;)b[e++]=a;return b},Fd=function(a,b,c){b=cc(b);b in a?Ca.f(a,b,Cb(0,c)):a[b]=c},Zk=Array,$k=Math.max,fa=function(a,b,c){var d=va(a.length);b=Hb(b,d);c=Hb(void 0===
c?d:c,d);d=Zk($k(c-b,0));for(var e=0;b<c;b++,e++)Fd(d,e,a[b]);d.length=e;return d},al=Ce.f,Sg=T.getterFor("ArrayBuffer"),Qc=T.getterFor("DataView"),Tg=T.set,wa=r.ArrayBuffer,oa=wa,kc=oa&&oa.prototype,Ha=r.DataView,Kb=Ha&&Ha.prototype,Ug=Object.prototype,bl=r.Array,Gd=r.RangeError,cl=p(Rg),dl=p([].reverse),Vg=function(a,b,c){var d=Uk(c);c=8*c-b-1;var e=(1<<c)-1,f=e>>1,g=23===b?Ra(2,-24)-Ra(2,-77):0,k=0>a||0===a&&0>1/a?1:0,l=0;a=Vk(a);if(a!=a||Infinity===a){a=a!=a?1:0;var h=e}else{h=Wk(Xk(a)/Yk);var t=
Ra(2,-h);1>a*t&&(h--,t*=2);a=1<=h+f?a+g/t:a+g*Ra(2,1-f);2<=a*t&&(h++,t/=2);h+f>=e?(a=0,h=e):1<=h+f?(a=(a*t-1)*Ra(2,b),h+=f):(a=a*Ra(2,f-1)*Ra(2,b),h=0)}for(;8<=b;)d[l++]=a&255,a/=256,b-=8;h=h<<b|a;for(c+=b;0<c;)d[l++]=h&255,h/=256,c-=8;d[--l]|=128*k;return d},Wg=function(a,b){var c=a.length,d=8*c-b-1,e=(1<<d)-1,f=e>>1;d-=7;--c;var g=a[c--],k=g&127;for(g>>=7;0<d;)k=256*k+a[c--],d-=8;var l=k&(1<<-d)-1;k>>=-d;for(d+=b;0<d;)l=256*l+a[c--],d-=8;if(0===k)k=1-f;else{if(k===e)return l?NaN:g?-Infinity:Infinity;
l+=Ra(2,b);k-=f}return(g?-1:1)*l*Ra(2,k-b)},Xg=function(a){return[a&255]},Yg=function(a){return[a&255,a>>8&255]},Zg=function(a){return[a&255,a>>8&255,a>>16&255,a>>24&255]},$g=function(a){return a[3]<<24|a[2]<<16|a[1]<<8|a[0]},el=function(a){return Vg(a,23,4)},fl=function(a){return Vg(a,52,8)},Hd=function(a,b,c){U(a.prototype,b,{configurable:!0,get:function(){return c(this)[b]}})},lb=function(a,b,c,d){c=jc(c);a=Qc(a);if(c+b>a.byteLength)throw Gd("Wrong index");c+=a.byteOffset;b=fa(a.bytes,c,c+b);return d?
b:dl(b)},jb=function(a,b,c,d,e,f){c=jc(c);var g=Qc(a);if(c+b>g.byteLength)throw Gd("Wrong index");a=g.bytes;c+=g.byteOffset;d=d(+e);for(e=0;e<b;e++)a[c+e]=d[f?e:b-e-1]};if(Qg){var ah=ve&&"ArrayBuffer"!==wa.name;if(F(function(){wa(1)})&&F(function(){new wa(-1)})&&!F(function(){new wa;new wa(1.5);new wa(NaN);return 1!=wa.length||ah&&!ud}))ah&&ud&&da(wa,"name","ArrayBuffer");else{oa=function(a){Qa(this,kc);return new wa(jc(a))};oa.prototype=kc;for(var bh=al(wa),ch=0,Le;bh.length>ch;)(Le=bh[ch++])in oa||
da(oa,Le,wa[Le]);kc.constructor=oa}V&&fb(Kb)!==Ug&&V(Kb,Ug);var Id=new Ha(new oa(2)),dh=p(Kb.setInt8);Id.setInt8(0,2147483648);Id.setInt8(1,2147483649);!Id.getInt8(0)&&Id.getInt8(1)||Ke(Kb,{setInt8:function(a,b){dh(this,a,b<<24>>24)},setUint8:function(a,b){dh(this,a,b<<24>>24)}},{unsafe:!0})}else oa=function(a){Qa(this,kc);a=jc(a);Tg(this,{type:"ArrayBuffer",bytes:cl(bl(a),0),byteLength:a});A||(this.byteLength=a,this.detached=!1)},kc=oa.prototype,Ha=function(a,b,c){Qa(this,Kb);Qa(a,kc);var d=Sg(a),
e=d.byteLength;b=ec(b);if(0>b||b>e)throw Gd("Wrong offset");c=void 0===c?e-b:va(c);if(b+c>e)throw Gd("Wrong length");Tg(this,{type:"DataView",buffer:a,byteLength:c,byteOffset:b,bytes:d.bytes});A||(this.buffer=a,this.byteLength=c,this.byteOffset=b)},Kb=Ha.prototype,A&&(Hd(oa,"byteLength",Sg),Hd(Ha,"buffer",Qc),Hd(Ha,"byteLength",Qc),Hd(Ha,"byteOffset",Qc)),Ke(Kb,{getInt8:function(a){return lb(this,1,a)[0]<<24>>24},getUint8:function(a){return lb(this,1,a)[0]},getInt16:function(a){var b=lb(this,2,a,
1<arguments.length?arguments[1]:void 0);return(b[1]<<8|b[0])<<16>>16},getUint16:function(a){var b=lb(this,2,a,1<arguments.length?arguments[1]:void 0);return b[1]<<8|b[0]},getInt32:function(a){return $g(lb(this,4,a,1<arguments.length?arguments[1]:void 0))},getUint32:function(a){return $g(lb(this,4,a,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(a){return Wg(lb(this,4,a,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(a){return Wg(lb(this,8,a,1<arguments.length?arguments[1]:
void 0),52)},setInt8:function(a,b){jb(this,1,a,Xg,b)},setUint8:function(a,b){jb(this,1,a,Xg,b)},setInt16:function(a,b){jb(this,2,a,Yg,b,2<arguments.length?arguments[2]:void 0)},setUint16:function(a,b){jb(this,2,a,Yg,b,2<arguments.length?arguments[2]:void 0)},setInt32:function(a,b){jb(this,4,a,Zg,b,2<arguments.length?arguments[2]:void 0)},setUint32:function(a,b){jb(this,4,a,Zg,b,2<arguments.length?arguments[2]:void 0)},setFloat32:function(a,b){jb(this,4,a,el,b,2<arguments.length?arguments[2]:void 0)},
setFloat64:function(a,b){jb(this,8,a,fl,b,2<arguments.length?arguments[2]:void 0)}});gc(oa,"ArrayBuffer");gc(Ha,"DataView");var Rc=oa,Jd=Ha,eh=function(){},gl=[],fh=Hc("Reflect","construct"),Me=/^\s*(?:class|function)\b/,hl=p(Me.exec),il=!Me.exec(eh),Sc=function(a){if(!J(a))return!1;try{return fh(eh,gl,a),!0}catch(b){return!1}},gh=function(a){if(!J(a))return!1;switch(Oa(a)){case "AsyncFunction":case "GeneratorFunction":case "AsyncGeneratorFunction":return!1}try{return il||!!hl(Me,tg(a))}catch(b){return!0}};
gh.sham=!0;var Ne=!fh||F(function(){var a;return Sc(Sc.call)||!Sc(Object)||!Sc(function(){a=!0})||a})?gh:Sc,jl=TypeError,hh=function(a){if(Ne(a))return a;throw jl(Ic(a)+" is not a constructor");},kl=N("species"),ih=Jd.prototype,jh=ic(Rc.prototype.slice),ll=ic(ih.getUint8),ml=ic(ih.setUint8),nl=F(function(){return!(new Rc(2)).slice(1,void 0).byteLength});ea({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:nl},{slice:function(a,b){if(jh&&void 0===b)return jh(S(this),a);var c=S(this).byteLength;a=Hb(a,
c);b=Hb(void 0===b?c:b,c);c=S(this).constructor;var d;c=new (void 0===c||od(d=S(c)[kl])?Rc:hh(d))(va(b-a));d=new Jd(this);for(var e=new Jd(c),f=0;a<b;)ml(e,f++,ll(d,a++));return c}});var kh=N("iterator"),lh=!1;try{var ol=0,mh={next:function(){return{done:!!ol++}},"return":function(){lh=!0}};mh[kh]=function(){return this};Array.from(mh,function(){throw 2;})}catch(a){}var pl=function(a,b){if(!b&&!lh)return!1;var c=!1;try{b={},b[kh]=function(){return{next:function(){return{done:c=!0}}}},a(b)}catch(d){}return c},
nh=T.enforce,Kd=r.Int8Array,Oe=Kd&&Kd.prototype,oh=r.Uint8ClampedArray,ph=oh&&oh.prototype,Lb=Kd&&fb(Kd),Da=Oe&&fb(Oe),ql=Object.prototype,Pe=r.TypeError,qh=N("toStringTag"),Qe=re("TYPED_ARRAY_TAG"),nb=Qg&&!!V&&"Opera"!==Oa(r.opera),rh=!1,ja,lc,Ld,mc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},sh={BigInt64Array:8,BigUint64Array:8},Md=function(a){if(!M(a))return!1;a=Oa(a);return w(mc,a)||w(sh,a)};for(ja in mc)(Ld=
(lc=r[ja])&&lc.prototype)?nh(Ld).TypedArrayConstructor=lc:nb=!1;for(ja in sh)(Ld=(lc=r[ja])&&lc.prototype)&&(nh(Ld).TypedArrayConstructor=lc);if(!nb||!J(Lb)||Lb===Function.prototype)if(Lb=function(){throw Pe("Incorrect invocation");},nb)for(ja in mc)r[ja]&&V(r[ja],Lb);if(!nb||!Da||Da===ql)if(Da=Lb.prototype,nb)for(ja in mc)r[ja]&&V(r[ja].prototype,Da);nb&&fb(ph)!==Da&&V(ph,Da);if(A&&!w(Da,qh))for(ja in rh=!0,U(Da,qh,{configurable:!0,get:function(){return M(this)?this[Qe]:void 0}}),mc)r[ja]&&da(r[ja],
Qe,ja);var nc=nb,th=rh&&Qe,Re=function(a){if(Md(a))return a;throw Pe("Target is not a typed array");},uh=function(a){if(J(a)&&(!V||Fb(Lb,a)))return a;throw Pe(Ic(a)+" is not a typed array constructor");},Se=function(a,b,c,d){if(A){if(c)for(var e in mc){var f=r[e];if(f&&w(f.prototype,a))try{delete f.prototype[a]}catch(g){try{f.prototype[a]=b}catch(k){}}}Da[a]&&!c||na(Da,a,c?b:nb&&Oe[a]||b,d)}},vh=Lb,Tc=Da,rl=r.ArrayBuffer,Mb=r.Int8Array,sl=!nc||!F(function(){Mb(1)})||!F(function(){new Mb(-1)})||!pl(function(a){new Mb;
new Mb(null);new Mb(1.5);new Mb(a)},!0)||F(function(){return 1!==(new Mb(new rl(2),1,void 0)).length}),tl=Math.floor,ul=Number.isInteger||function(a){return!M(a)&&isFinite(a)&&tl(a)===a},vl=RangeError,wl=RangeError,Nd=function(a,b){a=ec(a);if(0>a)throw vl("The argument can't be less than 0");if(a%b)throw wl("Wrong offset");return a},xl=ic(ic.bind),Nb=function(a,b){Jc(a);return void 0===b?a:md?xl(a,b):function(){return a.apply(b,arguments)}},yl=N("iterator"),Uc=function(a){if(!od(a))return sd(a,yl)||
sd(a,"@@iterator")||fc[Oa(a)]},zl=TypeError,oc=function(a,b){var c=2>arguments.length?Uc(a):b;if(Jc(c))return S(O(c,a));throw zl(Ic(a)+" is not iterable");},Al=N("iterator"),Bl=Array.prototype,Te=function(a){return void 0!==a&&(fc.Array===a||Bl[Al]===a)},Cl=TypeError,wh=function(a){a=ng(a,"number");if("number"==typeof a)throw Cl("Can't convert number to bigint");return BigInt(a)},xh=function(a){var b=hh(this),c=eb(ia(a)),d=arguments.length,e=1<d?arguments[1]:void 0,f=void 0!==e,g=Uc(c);if(g&&!Te(g)){var k=
oc(c,g);var l=k.next;for(c=[];!(g=O(l,k)).done;)c.push(g.value)}f&&2<d&&(e=Nb(e,arguments[2]));d=va(c.length);b=new (uh(b))(d);g=Oa(b);k="BigInt64Array"==g||"BigUint64Array"==g;for(g=0;d>g;g++)l=f?e(c[g],g):c[g],b[g]=k?wh(l):+l;return b},Ue=Array.isArray||function(a){return"Array"==Db(a)},Dl=N("species"),yh=Array,El=function(a,b){if(Ue(a)){var c=a.constructor;Ne(c)&&(c===yh||Ue(c.prototype))?c=void 0:M(c)&&(c=c[Dl],null===c&&(c=void 0))}return new (void 0===c?yh:c)(0===b?0:b)},zh=p([].push),ob=function(a){var b=
1==a,c=2==a,d=3==a,e=4==a,f=6==a,g=7==a,k=5==a||f;return function(l,h,t,m){var q=eb(ia(l)),n=Eb(q);h=Nb(h,t);t=va(n.length);var L=0;m=m||El;l=b?m(l,t):c||g?m(l,0):void 0;for(var p;t>L;L++)if(k||L in n)if(m=n[L],p=h(m,L,q),a)if(b)l[L]=p;else if(p)switch(a){case 3:return!0;case 5:return m;case 6:return L;case 2:zh(l,m)}else switch(a){case 4:return!1;case 7:zh(l,m)}return f?-1:d||e?e:l}},Fl=ob(0);ob(1);ob(2);ob(3);ob(4);ob(5);ob(6);ob(7);var Ah=N("species"),Gl=function(a){a=Hc(a);A&&a&&!a[Ah]&&U(a,Ah,
{configurable:!0,get:function(){return this}})};Bb(function(a){var b=Ce.f,c=T.get,d=T.set,e=T.enforce,f=Ca.f,g=td,k=Math.round,l=r.RangeError,h=Rc.prototype,t=function(a,b){uh(a);var c=0,d=b.length;for(a=new a(d);d>c;)a[c]=b[c++];return a},m=function(a,b){U(a,b,{configurable:!0,get:function(){return c(this)[b]}})},q=function(a){var b;return Fb(h,a)||"ArrayBuffer"==(b=Oa(a))||"SharedArrayBuffer"==b},n=function(a,b){return Md(a)&&!rd(b)&&b in a&&ul(+b)&&0<=b},p=function(a,b){b=cc(b);return n(a,b)?Cb(2,
a[b]):g(a,b)},u=function(a,b,c){b=cc(b);return!(n(a,b)&&M(c)&&w(c,"value"))||w(c,"get")||w(c,"set")||c.configurable||w(c,"writable")&&!c.writable||w(c,"enumerable")&&!c.enumerable?f(a,b,c):(a[b]=c.value,a)};A?(nc||(td=p,Ca.f=u,m(Tc,"buffer"),m(Tc,"byteOffset"),m(Tc,"byteLength"),m(Tc,"length")),ea({target:"Object",stat:!0,forced:!nc},{getOwnPropertyDescriptor:p,defineProperty:u}),a.exports=function(a,g,h){var W=a.match(/\d+/)[0]/8,sa=a+(h?"Clamped":"")+"Array",m="get"+a,n="set"+a,L=r[sa],p=L,Gb=p&&
p.prototype;a={};var u=function(a,b){f(a,b,{get:function(){var a=c(this);return a.view[m](b*W+a.byteOffset,!0)},set:function(a){var d=c(this);h&&(a=0>(a=k(a))?0:255<a?255:a&255);d.view[n](b*W+d.byteOffset,a,!0)},enumerable:!0})};nc?sl&&(p=g(function(a,b,c,d){Qa(a,Gb);b=M(b)?q(b)?void 0!==d?new L(b,Nd(c,W),d):void 0!==c?new L(b,Nd(c,W)):new L(b):Md(b)?t(p,b):O(xh,p,b):new L(jc(b));c=p;var e,f;V&&J(e=a.constructor)&&e!==c&&M(f=e.prototype)&&f!==c.prototype&&V(b,f);return b}),V&&V(p,vh),Fl(b(L),function(a){a in
p||da(p,a,L[a])}),p.prototype=Gb):(p=g(function(a,b,c,e){Qa(a,Gb);var f=0,g=0;if(M(b))if(q(b)){var k=b;g=Nd(c,W);b=b.byteLength;if(void 0===e){if(b%W)throw l("Wrong length");e=b-g;if(0>e)throw l("Wrong length");}else if(e=va(e)*W,e+g>b)throw l("Wrong length");b=e/W}else return Md(b)?t(p,b):O(xh,p,b);else b=jc(b),e=b*W,k=new Rc(e);for(d(a,{buffer:k,byteOffset:g,byteLength:e,length:b,view:new Jd(k)});f<b;)u(a,f++)}),V&&V(p,vh),Gb=p.prototype=Bd(Tc));Gb.constructor!==p&&da(Gb,"constructor",p);e(Gb).TypedArrayConstructor=
p;th&&da(Gb,th,sa);a[sa]=p;ea({global:!0,constructor:!0,forced:p!=L,sham:!nc},a);"BYTES_PER_ELEMENT"in p||da(p,"BYTES_PER_ELEMENT",W);"BYTES_PER_ELEMENT"in Gb||da(Gb,"BYTES_PER_ELEMENT",W);Gl(sa)}):a.exports=function(){}})("Uint8",function(a){return function(b,c,d){return a(this,b,c,d)}});var Il=p("".slice),Jl=F(function(){var a=0;(new Int8Array(2)).fill({valueOf:function(){return a++}});return 1!==a});Se("fill",function(a){var b=arguments.length;Re(this);var c="Big"===Il(Oa(this),0,3)?wh(a):+a;return O(Rg,
this,c,1<b?arguments[1]:void 0,2<b?arguments[2]:void 0)},Jl);var Kl=r.RangeError,Ve=r.Int8Array,Ch=Ve&&Ve.prototype,Dh=Ch&&Ch.set,We=!F(function(){var a=new Uint8ClampedArray(2);O(Dh,a,{length:1,0:3},1);return 3!==a[1]}),Ll=We&&nc&&F(function(){var a=new Ve(2);a.set(1);a.set("2",1);return 0!==a[0]||2!==a[1]});Se("set",function(a){Re(this);var b=Nd(1<arguments.length?arguments[1]:void 0,1),c=eb(ia(a));if(We)return O(Dh,this,c,b);var d=this.length,e=va(c.length),f=0;if(e+b>d)throw Kl("Wrong length");
for(;f<e;)this[b+f]=c[f++]},!We||Ll);var Ml=Math.floor,Xe=function(a,b){var c=a.length,d=Ml(c/2);if(8>c){c=a.length;d=1;for(var e,f;d<c;){f=d;for(e=a[d];f&&0<b(a[f-1],e);)a[f]=a[--f];f!==d++&&(a[f]=e)}}else{c=Xe(fa(a,0,d),b);d=Xe(fa(a,d),b);e=c.length;f=d.length;for(var g=0,k=0;g<e||k<f;)a[g+k]=g<e&&k<f?0>=b(c[g],d[k])?c[g++]:d[k++]:g<e?c[g++]:d[k++]}return a},Eh=Xe,Fh=ac.match(/firefox\/(\d+)/i),Gh=!!Fh&&+Fh[1],Nl=/MSIE|Trident/.test(ac),Hh=ac.match(/AppleWebKit\/(\d+)\./),Ih=!!Hh&&+Hh[1],Vc=r.Uint16Array,
pc=Vc&&ic(Vc.prototype.sort),Ol=!!pc&&!(F(function(){pc(new Vc(2),null)})&&F(function(){pc(new Vc(2),{})})),Jh=!!pc&&!F(function(){if(qd)return 74>qd;if(Gh)return 67>Gh;if(Nl)return!0;if(Ih)return 602>Ih;var a=new Vc(516),b=Array(516),c;for(c=0;516>c;c++){var d=c%4;a[c]=515-c;b[c]=c-2*d+3}pc(a,function(a,b){return(a/4|0)-(b/4|0)});for(c=0;516>c;c++)if(a[c]!==b[c])return!0}),Pl=function(a){return function(b,c){return void 0!==a?+a(b,c)||0:c!==c?-1:b!==b?1:0===b&&0===c?0<1/b&&0>1/c?1:-1:b>c}};Se("sort",
function(a){void 0!==a&&Jc(a);return Jh?pc(this,a):Eh(Re(this),Pl(a))},!Jh||Ol);var Ql=N("iterator"),Ye=!F(function(){var a=new URL("b?a=1&b=2&c=3","http://a"),b=a.searchParams,c="";a.pathname="c%20d";b.forEach(function(a,e){b["delete"]("b");c+=e+a});return!b.size&&!A||!b.sort||"http://a/c%20d?a=1&c=3"!==a.href||"3"!==b.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!b[Ql]||"a"!==(new URL("https://a@b")).username||"b"!==(new URLSearchParams(new URLSearchParams("a=b"))).get("a")||"xn--e1aybc"!==
(new URL("http://\u0442\u0435\u0441\u0442")).host||"#%D0%B1"!==(new URL("http://a#\u0431")).hash||"a1c3"!==c||"x"!==(new URL("http://x",void 0)).host}),Rl=TypeError,Ob=function(a,b){if(a<b)throw Rl("Not enough arguments");return a},Sl=N("iterator"),Kh=T.set,xa=T.getterFor("URLSearchParams"),Tl=T.getterFor("URLSearchParamsIterator"),Ul=Object.getOwnPropertyDescriptor,Ze=function(a){return A?(a=Ul(r,a))&&a.value:r[a]},Lh=Ze("fetch"),Od=Ze("Request"),Wc=Ze("Headers"),$e=Od&&Od.prototype,Mh=Wc&&Wc.prototype,
Vl=r.RegExp,Wl=r.TypeError,Nh=r.decodeURIComponent,Oh=r.encodeURIComponent,Xl=p("".charAt),Ph=p([].join),Pb=p([].push),Pd=p("".replace),Yl=p([].shift),Qh=p([].splice),Rh=p("".split),Zl=p("".slice),$l=/\+/g,Sh=Array(4),am=function(a){try{return Nh(a)}catch(b){return a}},Th=function(a){var b=Pd(a,$l," ");a=4;try{return Nh(b)}catch(d){for(;a;){var c=a--;c=Sh[c-1]||(Sh[c-1]=Vl("((?:%[\\da-f]{2}){"+c+"})","gi"));b=Pd(b,c,am)}return b}},Uh=/[!'()~]|%20/g,bm={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E",
"%20":"+"},Vh=function(a){return bm[a]},af=Jg(function(a,b){Kh(this,{type:"URLSearchParamsIterator",iterator:oc(xa(a).entries),kind:b})},"Iterator",function(){var a=Tl(this),b=a.kind;a=a.iterator.next();var c=a.value;a.done||(a.value="keys"===b?c.key:"values"===b?c.value:[c.key,c.value]);return a},!0),Wh=function(a){this.entries=[];this.url=null;void 0!==a&&(M(a)?this.parseObject(a):this.parseQuery("string"==typeof a?"?"===Xl(a,0)?Zl(a,1):a:y(a)))};Wh.prototype={type:"URLSearchParams",bindURL:function(a){this.url=
a;this.update()},parseObject:function(a){var b=Uc(a),c,d,e;if(b)for(a=oc(a,b),b=a.next;!(c=O(b,a)).done;){c=oc(S(c.value));var f=c.next;if((d=O(f,c)).done||(e=O(f,c)).done||!O(f,c).done)throw Wl("Expected sequence with length 2");Pb(this.entries,{key:y(d.value),value:y(e.value)})}else for(c in a)w(a,c)&&Pb(this.entries,{key:c,value:y(a[c])})},parseQuery:function(a){if(a){a=Rh(a,"&");for(var b=0,c;b<a.length;)c=a[b++],c.length&&(c=Rh(c,"="),Pb(this.entries,{key:Th(Yl(c)),value:Th(Ph(c,"="))}))}},serialize:function(){for(var a=
this.entries,b=[],c=0,d;c<a.length;)d=a[c++],Pb(b,Pd(Oh(d.key),Uh,Vh)+"="+Pd(Oh(d.value),Uh,Vh));return Ph(b,"&")},update:function(){this.entries.length=0;this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Qd=function(){Qa(this,qc);var a=Kh(this,new Wh(0<arguments.length?arguments[0]:void 0));A||(this.length=a.entries.length)},qc=Qd.prototype;Ke(qc,{append:function(a,b){Ob(arguments.length,2);var c=xa(this);Pb(c.entries,{key:y(a),value:y(b)});A||this.length++;
c.updateURL()},"delete":function(a){Ob(arguments.length,1);for(var b=xa(this),c=b.entries,d=y(a),e=0;e<c.length;)c[e].key===d?Qh(c,e,1):e++;A||(this.length=c.length);b.updateURL()},get:function(a){Ob(arguments.length,1);for(var b=xa(this).entries,c=y(a),d=0;d<b.length;d++)if(b[d].key===c)return b[d].value;return null},getAll:function(a){Ob(arguments.length,1);for(var b=xa(this).entries,c=y(a),d=[],e=0;e<b.length;e++)b[e].key===c&&Pb(d,b[e].value);return d},has:function(a){Ob(arguments.length,1);for(var b=
xa(this).entries,c=y(a),d=0;d<b.length;)if(b[d++].key===c)return!0;return!1},set:function(a,b){Ob(arguments.length,1);for(var c=xa(this),d=c.entries,e=!1,f=y(a),g=y(b),k=0,l;k<d.length;k++)l=d[k],l.key===f&&(e?Qh(d,k--,1):(e=!0,l.value=g));e||Pb(d,{key:f,value:g});A||(this.length=d.length);c.updateURL()},sort:function(){var a=xa(this);Eh(a.entries,function(a,c){return a.key>c.key?1:-1});a.updateURL()},forEach:function(a){for(var b=xa(this).entries,c=Nb(a,1<arguments.length?arguments[1]:void 0),d=
0,e;d<b.length;)e=b[d++],c(e.value,e.key,this)},keys:function(){return new af(this,"keys")},values:function(){return new af(this,"values")},entries:function(){return new af(this,"entries")}},{enumerable:!0});na(qc,Sl,qc.entries,{name:"entries"});na(qc,"toString",function(){return xa(this).serialize()},{enumerable:!0});A&&U(qc,"size",{get:function(){return xa(this).entries.length},configurable:!0,enumerable:!0});gc(Qd,"URLSearchParams");ea({global:!0,constructor:!0,forced:!Ye},{URLSearchParams:Qd});
if(!Ye&&J(Wc)){var cm=p(Mh.has),dm=p(Mh.set),Xh=function(a){if(M(a)){var b=a.body;if("URLSearchParams"===Oa(b)){var c=a.headers?new Wc(a.headers):new Wc;cm(c,"content-type")||dm(c,"content-type","application/x-www-form-urlencoded;charset=UTF-8");return Bd(a,{body:Cb(0,y(b)),headers:Cb(0,c)})}}return a};J(Lh)&&ea({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(a){return Lh(a,1<arguments.length?Xh(arguments[1]):{})}});if(J(Od)){var bf=function(a){Qa(this,$e);return new Od(a,1<
arguments.length?Xh(arguments[1]):{})};$e.constructor=bf;bf.prototype=$e;ea({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bf})}}var Yh=p("".replace),em=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+/,fm=/(^|[^\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff])[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$/,
cf=function(a){return function(b){b=y(ia(b));a&1&&(b=Yh(b,em,""));a&2&&(b=Yh(b,fm,"$1"));return b}};cf(1);cf(2);var gm=cf(3);ea({target:"String",proto:!0,forced:function(a){return F(function(){return!!"\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"[a]()||"\u200b\u0085\u180e"!=="\u200b\u0085\u180e"[a]()||ve&&"\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"[a].name!==
a})}("trim")},{trim:function(){return gm(this)}});(function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a})(Bb(function(a,b){(function(a,d){d(b)})(kd,function(a){function b(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(a)||""===a)throw new TypeError('Invalid character in header field name: "'+a+'"');return a.toLowerCase()}function c(a){"string"!==typeof a&&(a=String(a));return a}function f(a){var b={next:function(){var b=a.shift();
return{done:void 0===b,value:b}}};mb.iterable&&(b[Symbol.iterator]=function(){return b});return b}function g(a){this.map={};a instanceof g?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function k(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function l(a){return new Promise(function(b,c){a.onload=function(){b(a.result)};
a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader,c=l(b);b.readAsArrayBuffer(a);return c}function t(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}function m(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function q(){this.bodyUsed=!1;this._initBody=function(a){this.bodyUsed=this.bodyUsed;(this._bodyInit=a)?"string"===typeof a?this._bodyText=a:mb.blob&&
Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:mb.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:mb.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():mb.arrayBuffer&&mb.blob&&a&&DataView.prototype.isPrototypeOf(a)?(this._bodyArrayBuffer=m(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):mb.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||A(a))?this._bodyArrayBuffer=m(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText=
"";this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):mb.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))};mb.blob&&(this.blob=function(){var a=k(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));
if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var a=k(this);return a?a:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}return this.blob().then(h)});this.text=function(){var a=k(this);
if(a)return a;if(this._bodyBlob){a=this._bodyBlob;var b=new FileReader,c=l(b);b.readAsText(a);return c}if(this._bodyArrayBuffer)return Promise.resolve(t(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)};mb.formData&&(this.formData=function(){return this.text().then(p)});this.json=function(){return this.text().then(JSON.parse)};return this}function n(a,b){if(!(this instanceof n))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
b=b||{};var c=b.body;if(a instanceof n){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new g(a.headers));this.method=a.method;this.mode=a.mode;this.signal=a.signal;c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);this.credentials=b.credentials||this.credentials||"same-origin";if(b.headers||!this.headers)this.headers=new g(b.headers);a=b.method||this.method||"GET";var d=a.toUpperCase();this.method=
-1<w.indexOf(d)?d:a;this.mode=b.mode||this.mode||null;this.signal=b.signal||this.signal;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c);if("GET"===this.method||"HEAD"===this.method)if("no-store"===b.cache||"no-cache"===b.cache)b=/([?&])_=[^&]*/,b.test(this.url)?this.url=this.url.replace(b,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}function p(a){var b=
new FormData;a.trim().split("&").forEach(function(a){if(a){var c=a.split("=");a=c.shift().replace(/\+/g," ");c=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(a),decodeURIComponent(c))}});return b}function u(a){var b=new g;a.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(a){return 0===a.indexOf("\n")?a.substr(1,a.length):a}).forEach(function(a){var c=a.split(":");if(a=c.shift().trim())c=c.join(":").trim(),b.append(a,c)});return b}function r(a,b){if(!(this instanceof r))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
b||(b={});this.type="default";this.status=void 0===b.status?200:b.status;this.ok=200<=this.status&&300>this.status;this.statusText=void 0===b.statusText?"":""+b.statusText;this.headers=new g(b.headers);this.url=b.url||"";this._initBody(a)}function W(b,d){return new Promise(function(e,f){function k(){l.abort()}var h=new n(b,d);if(h.signal&&h.signal.aborted)return f(new a.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;l.onload=function(){var a={status:l.status,statusText:l.statusText,
headers:u(l.getAllResponseHeaders()||"")};a.url="responseURL"in l?l.responseURL:a.headers.get("X-Request-URL");var b="response"in l?l.response:l.responseText;setTimeout(function(){e(new r(b,a))},0)};l.onerror=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)};l.ontimeout=function(){setTimeout(function(){f(new TypeError("Network request failed"))},0)};l.onabort=function(){setTimeout(function(){f(new a.DOMException("Aborted","AbortError"))},0)};l.open(h.method,function(a){try{return""===
a&&sa.location.href?sa.location.href:a}catch(ra){return a}}(h.url),!0);"include"===h.credentials?l.withCredentials=!0:"omit"===h.credentials&&(l.withCredentials=!1);"responseType"in l&&(mb.blob?l.responseType="blob":mb.arrayBuffer&&h.headers.get("Content-Type")&&-1!==h.headers.get("Content-Type").indexOf("application/octet-stream")&&(l.responseType="arraybuffer"));!d||"object"!==typeof d.headers||d.headers instanceof g?h.headers.forEach(function(a,b){l.setRequestHeader(b,a)}):Object.getOwnPropertyNames(d.headers).forEach(function(a){l.setRequestHeader(a,
c(d.headers[a]))});h.signal&&(h.signal.addEventListener("abort",k),l.onreadystatechange=function(){4===l.readyState&&h.signal.removeEventListener("abort",k)});l.send("undefined"===typeof h._bodyInit?null:h._bodyInit)})}var sa="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof sa&&sa,Bh="URLSearchParams"in sa,Hl="Symbol"in sa&&"iterator"in Symbol,v;if(v="FileReader"in sa&&"Blob"in sa)try{new Blob,v=!0}catch(G){v=!1}var mb={searchParams:Bh,iterable:Hl,
blob:v,formData:"FormData"in sa,arrayBuffer:"ArrayBuffer"in sa};if(mb.arrayBuffer)var B="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";"),A=ArrayBuffer.isView||function(a){return a&&-1<B.indexOf(Object.prototype.toString.call(a))};g.prototype.append=function(a,d){a=b(a);d=c(d);var e=this.map[a];this.map[a]=e?e+", "+d:d};g.prototype["delete"]=function(a){delete this.map[b(a)]};
g.prototype.get=function(a){a=b(a);return this.has(a)?this.map[a]:null};g.prototype.has=function(a){return this.map.hasOwnProperty(b(a))};g.prototype.set=function(a,d){this.map[b(a)]=c(d)};g.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)};g.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return f(a)};g.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return f(a)};g.prototype.entries=
function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return f(a)};mb.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);var w="DELETE GET HEAD OPTIONS POST PUT".split(" ");n.prototype.clone=function(){return new n(this,{body:this._bodyInit})};q.call(n.prototype);q.call(r.prototype);r.prototype.clone=function(){return new r(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})};r.error=function(){var a=new r(null,{status:0,statusText:""});
a.type="error";return a};var x=[301,302,303,307,308];r.redirect=function(a,b){if(-1===x.indexOf(b))throw new RangeError("Invalid status code");return new r(null,{status:b,headers:{location:a}})};a.DOMException=sa.DOMException;try{new a.DOMException}catch(G){a.DOMException=function(a,b){this.message=a;this.name=b;this.stack=Error(a).stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}W.polyfill=!0;sa.fetch||(sa.fetch=W,sa.Headers=g,sa.Request=
n,sa.Response=r);a.Headers=g;a.Request=n;a.Response=r;a.fetch=W;Object.defineProperty(a,"__esModule",{value:!0})})}));(function(){function a(a){try{return a.defaultView&&a.defaultView.frameElement||null}catch(sa){return null}}function b(a){this.time=a.time;this.target=a.target;this.rootBounds=l(a.rootBounds);this.boundingClientRect=l(a.boundingClientRect);this.intersectionRect=l(a.intersectionRect||k());this.isIntersecting=!!a.intersectionRect;a=this.boundingClientRect;a=a.width*a.height;var b=this.intersectionRect;
b=b.width*b.height;this.intersectionRatio=a?Number((b/a).toFixed(4)):this.isIntersecting?1:0}function c(a,b){b=b||{};if("function"!=typeof a)throw Error("callback must be a function");if(b.root&&1!=b.root.nodeType&&9!=b.root.nodeType)throw Error("root must be a Document or Element");this._checkForIntersections=d(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=a;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(b.rootMargin);
this.thresholds=this._initThresholds(b.threshold);this.root=b.root||null;this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" ");this._monitoringDocuments=[];this._monitoringUnsubscribes=[]}function d(a,b){var c=null;return function(){c||(c=setTimeout(function(){a();c=null},b))}}function e(a,b,c,d){"function"==typeof a.addEventListener?a.addEventListener(b,c,d||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function f(a,b,c,d){"function"==typeof a.removeEventListener?
a.removeEventListener(b,c,d||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+b,c)}function g(a){try{var b=a.getBoundingClientRect()}catch(Bh){}if(!b)return k();b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top});return b}function k(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function l(a){return!a||"x"in a?a:{top:a.top,y:a.top,bottom:a.bottom,left:a.left,x:a.left,right:a.right,width:a.width,height:a.height}}
function h(a,b){var c=b.top-a.top;a=b.left-a.left;return{top:c,left:a,height:b.height,width:b.width,bottom:c+b.height,right:a+b.width}}function t(a,b){for(;b;){if(b==a)return!0;b=m(b)}return!1}function m(b){var c=b.parentNode;if(9==b.nodeType&&b!=n)return a(b);c&&c.assignedSlot&&(c=c.assignedSlot.parentNode);return c&&11==c.nodeType&&c.host?c.host:c}function q(a){return a&&9===a.nodeType}if("object"===typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in
window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var n=function(b){for(var c=a(b);c;)b=c.ownerDocument,c=a(b);return b}(window.document),p=[],r=null,u=null;c.prototype.THROTTLE_TIMEOUT=100;c.prototype.POLL_INTERVAL=null;c.prototype.USE_MUTATION_OBSERVER=!0;c._setupCrossOriginUpdater=function(){r||(r=function(a,
b){u=a&&b?h(a,b):k();p.forEach(function(a){a._checkForIntersections()})});return r};c._resetCrossOriginUpdater=function(){u=r=null};c.prototype.observe=function(a){if(!this._observationTargets.some(function(b){return b.element==a})){if(!a||1!=a.nodeType)throw Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:a,entry:null});this._monitorIntersections(a.ownerDocument);this._checkForIntersections()}};c.prototype.unobserve=function(a){this._observationTargets=
this._observationTargets.filter(function(b){return b.element!=a});this._unmonitorIntersections(a.ownerDocument);0==this._observationTargets.length&&this._unregisterInstance()};c.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorAllIntersections();this._unregisterInstance()};c.prototype.takeRecords=function(){var a=this._queuedEntries.slice();this._queuedEntries=[];return a};c.prototype._initThresholds=function(a){a=a||[0];Array.isArray(a)||(a=[a]);return a.sort().filter(function(a,
b,c){if("number"!=typeof a||isNaN(a)||0>a||1<a)throw Error("threshold must be a number between 0 and 1 inclusively");return a!==c[b-1]})};c.prototype._parseRootMargin=function(a){a=(a||"0px").split(/\s+/).map(function(a){a=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!a)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(a[1]),unit:a[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};c.prototype._monitorIntersections=function(b){var c=b.defaultView;if(c&&-1==
this._monitoringDocuments.indexOf(b)){var d=this._checkForIntersections,g=null,k=null;this.POLL_INTERVAL?g=c.setInterval(d,this.POLL_INTERVAL):(e(c,"resize",d,!0),e(b,"scroll",d,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in c&&(k=new c.MutationObserver(d),k.observe(b,{attributes:!0,childList:!0,characterData:!0,subtree:!0})));this._monitoringDocuments.push(b);this._monitoringUnsubscribes.push(function(){var a=b.defaultView;a&&(g&&a.clearInterval(g),f(a,"resize",d,!0));f(b,"scroll",d,!0);k&&
k.disconnect()});b!=(this.root&&(this.root.ownerDocument||this.root)||n)&&(c=a(b))&&this._monitorIntersections(c.ownerDocument)}};c.prototype._unmonitorIntersections=function(b){var c=this._monitoringDocuments.indexOf(b);if(-1!=c){var d=this.root&&(this.root.ownerDocument||this.root)||n;if(!this._observationTargets.some(function(c){c=c.element.ownerDocument;if(c==b)return!0;for(;c&&c!=d;)if(c=(c=a(c))&&c.ownerDocument,c==b)return!0;return!1})){var e=this._monitoringUnsubscribes[c];this._monitoringDocuments.splice(c,
1);this._monitoringUnsubscribes.splice(c,1);e();b!=d&&(c=a(b))&&this._unmonitorIntersections(c.ownerDocument)}}};c.prototype._unmonitorAllIntersections=function(){var a=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0;for(var b=this._monitoringUnsubscribes.length=0;b<a.length;b++)a[b]()};c.prototype._checkForIntersections=function(){if(this.root||!r||u){var a=this._rootIsInDom(),c=a?this._getRootRect():k();this._observationTargets.forEach(function(d){var e=d.element,f=g(e),
h=this._rootContainsTarget(e),l=d.entry,t=a&&h&&this._computeTargetAndRootIntersection(e,f,c),m=null;if(!this._rootContainsTarget(e))m=k();else if(!r||this.root)m=c;d=d.entry=new b({time:window.performance&&performance.now&&performance.now(),target:e,boundingClientRect:f,rootBounds:m,intersectionRect:t});l?a&&h?this._hasCrossedThreshold(l,d)&&this._queuedEntries.push(d):l&&l.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),
this)}};c.prototype._computeTargetAndRootIntersection=function(a,b,c){if("none"!=window.getComputedStyle(a).display){var d=b;b=m(a);for(a=!1;!a&&b;){var e=null,f=1==b.nodeType?window.getComputedStyle(b):{};if("none"==f.display)return null;if(b==this.root||9==b.nodeType)if(a=!0,b==this.root||b==n)r&&!this.root?!u||0==u.width&&0==u.height?d=e=b=null:e=u:e=c;else{f=(b=m(b))&&g(b);var k=b&&this._computeTargetAndRootIntersection(b,f,c);f&&k?e=h(f,k):d=b=null}else k=b.ownerDocument,b!=k.body&&b!=k.documentElement&&
"visible"!=f.overflow&&(e=g(b));if(e){f=Math.max(e.top,d.top);k=Math.min(e.bottom,d.bottom);var l=Math.max(e.left,d.left);d=Math.min(e.right,d.right);e=d-l;var t=k-f;d=0<=e&&0<=t&&{top:f,bottom:k,left:l,right:d,width:e,height:t}||null}if(!d)break;b=b&&m(b)}return d}};c.prototype._getRootRect=function(){if(this.root&&!q(this.root))var a=g(this.root);else{var b=q(this.root)?this.root:n;a=b.documentElement;b=b.body;a={top:0,left:0,right:a.clientWidth||b.clientWidth,width:a.clientWidth||b.clientWidth,
bottom:a.clientHeight||b.clientHeight,height:a.clientHeight||b.clientHeight}}return this._expandRectByRootMargin(a)};c.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(b,c){return"px"==b.unit?b.value:b.value*(c%2?a.width:a.height)/100});b={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};c.prototype._hasCrossedThreshold=function(a,b){a=a&&a.isIntersecting?a.intersectionRatio||0:
-1;b=b.isIntersecting?b.intersectionRatio||0:-1;if(a!==b)for(var c=0;c<this.thresholds.length;c++){var d=this.thresholds[c];if(d==a||d==b||d<a!==d<b)return!0}};c.prototype._rootIsInDom=function(){return!this.root||t(n,this.root)};c.prototype._rootContainsTarget=function(a){var b=this.root&&(this.root.ownerDocument||this.root)||n;return t(b,a)&&(!this.root||b==a.ownerDocument)};c.prototype._registerInstance=function(){0>p.indexOf(this)&&p.push(this)};c.prototype._unregisterInstance=function(){var a=
p.indexOf(this);-1!=a&&p.splice(a,1)};window.IntersectionObserver=c;window.IntersectionObserverEntry=b}})();class Zh{_process(a){try{return a()}catch(b){return null}}}class rc{constructor(){this.currentProductPrefix=rc.PREFIX.startsWith("PRODUCT_PREFIX_PLACE")?"es":rc.PREFIX}getProductName(){return"esputnik"}getPrefix(){return this.currentProductPrefix}get(){var a="_".concat(this.currentProductPrefix,"Config");a=window[a];if("es"===this.currentProductPrefix){let b=a.crawler,c=a.hasOwnProperty("crawler")&&
0<Object.keys(a.crawler).length;b&&c||(a.crawler=rc.DEFAULT_CRAWLER)}return a}}n(rc,"PREFIX","es");n(rc,"DEFAULT_CRAWLER",{pages:{main:[],catalog:[],product:[]},catalog:{categoryKey:[]},product:{productKey:[]},status_cart:[],checkout:[],params:{CATEGORY:{recoms:{productsRecommendationsArgs:{categoryField:"tags_categories_ids"}}}}});var Xc=new rc;class $h extends Zh{constructor(a){super();this.stateKey=a.getPrefix()+"State"}get(a){return this._process(()=>JSON.parse(localStorage.getItem(a)))}set(a,
b){this._process(()=>localStorage.setItem(a,JSON.stringify(b)))}setState(a){this._process(()=>localStorage.setItem(this.stateKey,JSON.stringify(a)))}getState(){return this._process(()=>JSON.parse(localStorage.getItem(this.stateKey)))}}n($h,"PUSH_SCRIPT_CONTACT_ID","esWebPushContactId");var X=new $h(Xc);class Rd{constructor(a){this.configService=a}get(){let a=this.configService.getPrefix();return Rd.defaultStatesByProduct[a]||Rd.defaultStatesByProduct.es}}n(Rd,"defaultStatesByProduct",{cl:{},es:{userInfo:{email:null,
esContactId:null},tracking:{product:{productId:null},statusCart:{identifier:null,GUID:null},category:{categoryKey:null}},pageType:{previous:null,current:null,changedDate:null},experiment:{log:{},variants:[]},activatorConfig:{RECOMS:null,TRACKING:null},metrics:{lastDate:null,data:{}}}});var hm=new Rd(Xc);class im{constructor(a,b,c){n(this,"state",null);this.configService=a;this.storageService=b;this.initialStateProvider=c;this.state=this._getInitialState()}getConfig(){return this.configService.get()}getState(){return this.state}setActivatorConfig(a){this.setState(b=>
({...b,activatorConfig:a}))}getActivatorConfig(){return this.getState().activatorConfig}getUserInfo(){return this.getState().userInfo}getExperimentVariants(){return(this.getState().experiment||{}).variants||[]}getFormAbTestsConfig(){return(this.getConfig().formConfig||{}).abTests||[]}getFormAbTestsFormVariants(){return(this.getState().formVariantsAbTest||{}).formVariants||[]}setFormAbTestFormVariants(a){this.setState(b=>({...b,formVariantsAbTest:{...b.formVariantsAbTest,formVariants:a}}))}addAbTestFormVariant(a){this.setState(b=>
({...b,formVariantsAbTest:{...b.formVariantsAbTest,formVariants:[...b.formVariantsAbTest.formVariants,a]}}))}setState(a){this.state="function"===typeof a?a(this.getState()):{...this.getState(),...a};this.storageService.setState(this.getState())}_getInitialState(){return this.storageService.getState()||this.initialStateProvider.get()}addExperimentVariant(a){this.setState(b=>({...b,experiment:{...b.experiment,variants:[...b.experiment.variants,a]}}))}setExperimentVariants(a){this.setState(b=>({...b,
experiment:{...b.experiment,variants:a}}))}setStatusCartIdentifier(a){let b=a.identifier,c=a.GUID;this.setState(a=>({...a,tracking:{...a.tracking,statusCart:{...a.tracking.statusCart,identifier:b,GUID:c}}}))}setProductPageId(a){this.setState(b=>({...b,tracking:{...b.tracking,product:{...b.tracking.product,productId:a}}}))}setPurchasedItems(a){this.setState(b=>({...b,tracking:{...b.tracking,purchasedItems:{products:a}}}))}setStatusCartProducts(a){this.setState(b=>({...b,tracking:{...b.tracking,statusCart:{...b.tracking.statusCart,
products:a}}}))}setCategoryKey(a){this.setState(b=>({...b,tracking:{...b.tracking,category:{...b.tracking.category,categoryKey:a}}}))}setUserInfo(a){this.setState(b=>({...b,userInfo:a}))}setPageType(a){let b=a.previous,c=a.current;this.setState(a=>({...a,pageType:{previous:b,current:c,changedDate:Date.now()}}))}getCustomerData(){return this.getState().customerData||{}}setCustomerData(a){this.setState(b=>({...b,customerData:a}))}getMetrics(){return this.getState().metrics||{data:{}}}setMetrics(a){this.setState(b=>
({...b,metrics:{...b.metrics,...a}}))}getLocationData(){return this.getState().locationData||{data:{}}}setLocationData(a){this.setState(b=>({...b,locationData:{...b.locationData,...a}}))}setPrefix(a,b){this.setState(c=>({...c,prefix:{debugPrefix:a,storagePrefix:b}}))}getPrefix(){return this.getState().prefix||{debugPrefix:"",storagePrefix:""}}setInstanceDebugMode(a){this.setState(b=>({...b,instanceDebugMode:a}))}getInstanceDebugMode(){return this.getState().instanceDebugMode||!1}}var m=new im(Xc,
X,hm);let x={ANY:"ANY",MAIN:"MAIN",CATEGORY:"CATEGORY",PRODUCT:"PRODUCT",STATUS_CART:"STATUS_CART",CHECKOUT:"CHECKOUT",NOT_FOUND:"NOT_FOUND",UNKNOWN:"UNKNOWN"};class df{constructor(a){n(this,"subscriptions",[]);n(this,"state",null);this.state=a;this.emit()}subscribe(a){this.subscriptions.push(a);let b=this.subscriptions.length-1;a(this.state);return{unsubscribe:()=>this.subscriptions.splice(b,1)}}subscribeSingle(a){this.subscriptions.push(a);let b=this.subscriptions.length-1;return{unsubscribe:()=>
this.subscriptions.splice(b,1)}}updateState(a){this.state={...this.state,...a};this.emit()}setState(a){this.state=a;this.emit()}getState(){return this.state}emit(){this.subscriptions.forEach(a=>a(this.state))}}class jm extends df{constructor(){super({url:""});window.addEventListener("hashchange",a=>this.onHashChanged(a))}onHashChanged(a){this.getState().pathname!==a.newURL&&this.updateState({url:a.newURL})}}var ef=new jm,km=p("".charAt),ai=p("".charCodeAt),lm=p("".slice),bi=function(a){return function(b,
c){b=y(ia(b));c=ec(c);var d=b.length,e;if(0>c||c>=d)return a?"":void 0;var f=ai(b,c);return 55296>f||56319<f||c+1===d||56320>(e=ai(b,c+1))||57343<e?a?km(b,c):f:a?lm(b,c,c+2):(f-55296<<10)+(e-56320)+65536}},mm=bi(!1),nm=bi(!0),om=T.set,pm=T.getterFor("String Iterator");Kg(String,"String",function(a){om(this,{type:"String Iterator",string:y(a),index:0})},function(){var a=pm(this),b=a.string,c=a.index;if(c>=b.length)return hc(void 0,!0);b=nm(b,c);a.index+=b.length;return hc(b,!1)});var sc=Object.assign,
ci=Object.defineProperty,qm=p([].concat),ff=!sc||F(function(){if(A&&1!==sc({b:1},sc(ci({},"a",{enumerable:!0,get:function(){ci(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var a={},b={},c=Symbol();a[c]=7;"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return 7!=sc({},a)[c]||"abcdefghijklmnopqrst"!=yd(sc({},b)).join("")})?function(a,b){for(var c=eb(ia(a)),d=arguments.length,e=1;d>e;)for(var f=Eb(arguments[e++]),g=xd?qm(yd(f),xd(f)):yd(f),k=g.length,l=0,h;k>l;)if(h=g[l++],!A||
O(dg,f,h))c[h]=f[h];return c}:sc,gf=function(a,b,c){S(a);try{var d=sd(a,"return");if(!d){if("throw"===b)throw c;return c}d=O(d,a)}catch(f){var e=!0;d=f}if("throw"===b)throw c;if(e)throw d;S(d);return c},di=Array,tc=function(a){var b=eb(ia(a)),c=Ne(this),d=arguments.length,e=1<d?arguments[1]:void 0,f=void 0!==e;f&&(e=Nb(e,2<d?arguments[2]:void 0));var g=Uc(b);d=0;var k;if(!g||this===di&&Te(g)){var l=va(b.length);for(c=c?new this(l):di(l);l>d;d++){var h=f?e(b[d],d):b[d];Fd(c,d,h)}}else for(b=oc(b,g),
g=b.next,c=c?new this:[];!(k=O(g,b)).done;d++){if(f)a:{h=b;var t=e;k=[k.value,d];try{l=t(S(k)[0],k[1]);break a}catch(L){gf(h,"throw",L)}l=void 0}else l=k.value;h=l;Fd(c,d,h)}c.length=d;return c},rm=/[^\0-\u007E]/,ei=/[.\u3002\uFF0E\uFF61]/g,fi=RangeError,sm=p(ei.exec),uc=Math.floor,hf=String.fromCharCode,gi=p("".charCodeAt),hi=p([].join),pb=p([].push),tm=p("".replace),um=p("".split),vm=p("".toLowerCase),wm=T.set,Sd=T.getterFor("URL"),Yc=r.URL,jf=r.TypeError,Td=r.parseInt,xm=Math.floor,ii=Math.pow,
ya=p("".charAt),Ea=p(/./.exec),Zc=p([].join),ym=p((1).toString),zm=p([].pop),vc=p([].push),kf=p("".replace),Am=p([].shift),Bm=p("".split),$c=p("".slice),Ud=p("".toLowerCase),Cm=p([].unshift),ji=/[a-z]/i,Dm=/[\d+-.a-z]/i,lf=/\d/,Em=/^0x/i,Fm=/^[0-7]+$/,Gm=/^\d+$/,ki=/^[\da-f]+$/i,Hm=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Im=/[\0\t\n\r #/:<>?@[\\\]^|]/,Jm=/^[\u0000-\u0020]+/,Km=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Lm=/[\t\n\r]/g,Mm=function(a){var b=Bm(a,"."),c;b.length&&""==b[b.length-1]&&b.length--;var d=
b.length;if(4<d)return a;var e=[];for(c=0;c<d;c++){var f=b[c];if(""==f)return a;var g=10;1<f.length&&"0"==ya(f,0)&&(g=Ea(Em,f)?16:8,f=$c(f,8==g?1:2));if(""===f)f=0;else{if(!Ea(10==g?Gm:8==g?Fm:ki,f))return a;f=Td(f,g)}vc(e,f)}for(c=0;c<d;c++)if(f=e[c],c==d-1){if(f>=ii(256,5-d))return null}else if(255<f)return null;a=zm(e);for(c=0;c<e.length;c++)a+=e[c]*ii(256,3-c);return a},Nm=function(a){var b=[0,0,0,0,0,0,0,0],c=0,d=null,e=0,f,g;var k=function(){return ya(a,e)};if(":"==k()){if(":"!=ya(a,1))return;
e+=2;c++;d=c}for(;k();){if(8==c)return;if(":"==k()){if(null!==d)return;e++;c++;d=c}else{for(f=g=0;4>g&&Ea(ki,k());)f=16*f+Td(k(),16),e++,g++;if("."==k()){if(0==g)return;e-=g;if(6<c)return;for(f=0;k();){g=null;if(0<f)if("."==k()&&4>f)e++;else return;if(!Ea(lf,k()))return;for(;Ea(lf,k());){var l=Td(k(),10);if(null===g)g=l;else{if(0==g)return;g=10*g+l}if(255<g)return;e++}b[c]=256*b[c]+g;f++;2!=f&&4!=f||c++}if(4!=f)return;break}else if(":"==k()){if(e++,!k())return}else if(k())return;b[c++]=f}}if(null!==
d)for(k=c-d,c=7;0!=c&&0<k;)f=b[c],b[c--]=b[d+k-1],b[d+--k]=f;else if(8!=c)return;return b},ad=function(a){var b,c;if("number"==typeof a){var d=[];for(b=0;4>b;b++)Cm(d,a%256),a=xm(a/256);return Zc(d,".")}if("object"==typeof a){d="";b=null;var e=1;for(var f=null,g=0,k=0;8>k;k++)0!==a[k]?(g>e&&(b=f,e=g),f=null,g=0):(null===f&&(f=k),++g);g>e&&(b=f);e=b;for(b=0;8>b;b++)c&&0===a[b]||(c&&(c=!1),e===b?(d+=b?":":"::",c=!0):(d+=ym(a[b],16),7>b&&(d+=":")));return"["+d+"]"}return a},Vd={},li=ff({},Vd,{" ":1,
'"':1,"<":1,">":1,"`":1}),mi=ff({},li,{"#":1,"?":1,"{":1,"}":1}),mf=ff({},mi,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),qb=function(a,b){var c=mm(a,0);return 32<c&&127>c&&!w(b,a)?a:encodeURIComponent(a)},Wd={ftp:21,file:null,http:80,https:443,ws:80,wss:443},bd=function(a,b){var c;return 2==a.length&&Ea(ji,ya(a,0))&&(":"==(c=ya(a,1))||!b&&"|"==c)},ni=function(a){var b;return 1<a.length&&bd($c(a,0,2))&&(2==a.length||"/"===(b=ya(a,2))||"\\"===b||"?"===b||"#"===b)},nf={},oi={},of=
{},pi={},qi={},pf={},ri={},si={},Xd={},Yd={},qf={},rf={},sf={},tf={},ti={},uf={},cd={},Ia={},ui={},Ub={},Sa={},vf=function(a,b,c){a=y(a);var d;if(b){if(b=this.parse(a))throw jf(b);this.searchParams=null}else{void 0!==c&&(d=new vf(c,!0));if(b=this.parse(a,null,d))throw jf(b);b=xa(new Qd);b.bindURL(this);this.searchParams=b}};vf.prototype={type:"URL",parse:function(a,b,c){var d=b||nf,e=0,f="",g=!1,k=!1,l=!1;a=y(a);b||(this.password=this.username=this.scheme="",this.port=this.host=null,this.path=[],
this.fragment=this.query=null,this.cannotBeABaseURL=!1,a=kf(a,Jm,""),a=kf(a,Km,"$1"));a=kf(a,Lm,"");for(a=tc(a);e<=a.length;){var h=a[e];switch(d){case nf:if(h&&Ea(ji,h))f+=Ud(h),d=oi;else{if(b)return"Invalid scheme";d=of;continue}break;case oi:if(h&&(Ea(Dm,h)||"+"==h||"-"==h||"."==h))f+=Ud(h);else if(":"==h){if(b&&(this.isSpecial()!=w(Wd,f)||"file"==f&&(this.includesCredentials()||null!==this.port)||"file"==this.scheme&&!this.host))return;this.scheme=f;if(b){this.isSpecial()&&Wd[this.scheme]==this.port&&
(this.port=null);return}f="";"file"==this.scheme?d=tf:this.isSpecial()&&c&&c.scheme==this.scheme?d=pi:this.isSpecial()?d=si:"/"==a[e+1]?(d=qi,e++):(this.cannotBeABaseURL=!0,vc(this.path,""),d=ui)}else{if(b)return"Invalid scheme";f="";d=of;e=0;continue}break;case of:if(!c||c.cannotBeABaseURL&&"#"!=h)return"Invalid scheme";if(c.cannotBeABaseURL&&"#"==h){this.scheme=c.scheme;this.path=fa(c.path);this.query=c.query;this.fragment="";this.cannotBeABaseURL=!0;d=Sa;break}d="file"==c.scheme?tf:pf;continue;
case pi:if("/"==h&&"/"==a[e+1])d=Xd,e++;else{d=pf;continue}break;case qi:if("/"==h){d=Yd;break}else{d=Ia;continue}case pf:this.scheme=c.scheme;if(void 0==h)this.username=c.username,this.password=c.password,this.host=c.host,this.port=c.port,this.path=fa(c.path),this.query=c.query;else if("/"==h||"\\"==h&&this.isSpecial())d=ri;else if("?"==h)this.username=c.username,this.password=c.password,this.host=c.host,this.port=c.port,this.path=fa(c.path),this.query="",d=Ub;else if("#"==h)this.username=c.username,
this.password=c.password,this.host=c.host,this.port=c.port,this.path=fa(c.path),this.query=c.query,this.fragment="",d=Sa;else{this.username=c.username;this.password=c.password;this.host=c.host;this.port=c.port;this.path=fa(c.path);this.path.length--;d=Ia;continue}break;case ri:if(!this.isSpecial()||"/"!=h&&"\\"!=h)if("/"==h)d=Yd;else{this.username=c.username;this.password=c.password;this.host=c.host;this.port=c.port;d=Ia;continue}else d=Xd;break;case si:d=Xd;if("/"!=h||"/"!=ya(f,e+1))continue;e++;
break;case Xd:if("/"!=h&&"\\"!=h){d=Yd;continue}break;case Yd:if("@"==h){g&&(f="%40"+f);g=!0;f=tc(f);for(h=0;h<f.length;h++){var t=f[h];":"!=t||l?(t=qb(t,mf),l?this.password+=t:this.username+=t):l=!0}f=""}else if(void 0==h||"/"==h||"?"==h||"#"==h||"\\"==h&&this.isSpecial()){if(g&&""==f)return"Invalid authority";e-=tc(f).length+1;f="";d=qf}else f+=h;break;case qf:case rf:if(b&&"file"==this.scheme){d=uf;continue}else if(":"!=h||k)if(void 0==h||"/"==h||"?"==h||"#"==h||"\\"==h&&this.isSpecial()){if(this.isSpecial()&&
""==f)return"Invalid host";if(b&&""==f&&(this.includesCredentials()||null!==this.port))return;if(d=this.parseHost(f))return d;f="";d=cd;if(b)return;continue}else"["==h?k=!0:"]"==h&&(k=!1),f+=h;else{if(""==f)return"Invalid host";if(d=this.parseHost(f))return d;f="";d=sf;if(b==rf)return}break;case sf:if(Ea(lf,h))f+=h;else if(void 0==h||"/"==h||"?"==h||"#"==h||"\\"==h&&this.isSpecial()||b){if(""!=f){d=Td(f,10);if(65535<d)return"Invalid port";this.port=this.isSpecial()&&d===Wd[this.scheme]?null:d;f=""}if(b)return;
d=cd;continue}else return"Invalid port";break;case tf:this.scheme="file";if("/"==h||"\\"==h)d=ti;else if(c&&"file"==c.scheme)if(void 0==h)this.host=c.host,this.path=fa(c.path),this.query=c.query;else if("?"==h)this.host=c.host,this.path=fa(c.path),this.query="",d=Ub;else if("#"==h)this.host=c.host,this.path=fa(c.path),this.query=c.query,this.fragment="",d=Sa;else{ni(Zc(fa(a,e),""))||(this.host=c.host,this.path=fa(c.path),this.shortenPath());d=Ia;continue}else{d=Ia;continue}break;case ti:if("/"==h||
"\\"==h){d=uf;break}c&&"file"==c.scheme&&!ni(Zc(fa(a,e),""))&&(bd(c.path[0],!0)?vc(this.path,c.path[0]):this.host=c.host);d=Ia;continue;case uf:if(void 0==h||"/"==h||"\\"==h||"?"==h||"#"==h){if(!b&&bd(f))d=Ia;else{if(""==f){if(this.host="",b)return}else{if(d=this.parseHost(f))return d;"localhost"==this.host&&(this.host="");if(b)return;f=""}d=cd}continue}else f+=h;break;case cd:if(this.isSpecial()){if(d=Ia,"/"!=h&&"\\"!=h)continue}else if(!b&&"?"==h)this.query="",d=Ub;else if(!b&&"#"==h)this.fragment=
"",d=Sa;else if(void 0!=h&&(d=Ia,"/"!=h))continue;break;case Ia:if(void 0==h||"/"==h||"\\"==h&&this.isSpecial()||!b&&("?"==h||"#"==h)){t=f;t=Ud(t);".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t?(this.shortenPath(),"/"==h||"\\"==h&&this.isSpecial()||vc(this.path,"")):"."===f||"%2e"===Ud(f)?"/"==h||"\\"==h&&this.isSpecial()||vc(this.path,""):("file"==this.scheme&&!this.path.length&&bd(f)&&(this.host&&(this.host=""),f=ya(f,0)+":"),vc(this.path,f));f="";if("file"==this.scheme&&(void 0==h||"?"==h||"#"==
h))for(;1<this.path.length&&""===this.path[0];)Am(this.path);"?"==h?(this.query="",d=Ub):"#"==h&&(this.fragment="",d=Sa)}else f+=qb(h,mi);break;case ui:"?"==h?(this.query="",d=Ub):"#"==h?(this.fragment="",d=Sa):void 0!=h&&(this.path[0]+=qb(h,Vd));break;case Ub:b||"#"!=h?void 0!=h&&("'"==h&&this.isSpecial()?this.query+="%27":this.query="#"==h?this.query+"%23":this.query+qb(h,Vd)):(this.fragment="",d=Sa);break;case Sa:void 0!=h&&(this.fragment+=qb(h,li))}e++}},parseHost:function(a){var b;if("["==ya(a,
0)){if("]"!=ya(a,a.length-1))return"Invalid host";var c=Nm($c(a,1,-1));if(!c)return"Invalid host"}else if(this.isSpecial()){c=[];a=um(tm(vm(a),ei,"."),".");for(b=0;b<a.length;b++){var d=a[b];if(sm(rm,d)){var e=d;d=[];var f=e;e=[];for(var g=0,k=f.length;g<k;){var l=gi(f,g++);if(55296<=l&&56319>=l&&g<k){var h=gi(f,g++);56320==(h&64512)?pb(e,((l&1023)<<10)+(h&1023)+65536):(pb(e,l),g--)}else pb(e,l)}g=e.length;k=128;var t=0,m=72;for(f=0;f<e.length;f++){var q=e[f];128>q&&pb(d,hf(q))}for((h=l=d.length)&&
pb(d,"-");h<g;){var n=2147483647;for(f=0;f<e.length;f++)q=e[f],q>=k&&q<n&&(n=q);var p=h+1;if(n-k>uc((2147483647-t)/p))throw fi("Overflow: input needs wider integers to process");t+=(n-k)*p;k=n;for(f=0;f<e.length;f++){q=e[f];if(q<k&&2147483647<++t)throw fi("Overflow: input needs wider integers to process");if(q==k){var r=t;for(q=36;;){n=q<=m?1:q>=m+26?26:q-m;if(r<n)break;r-=n;var u=36-n;n+=r%u;pb(d,hf(n+22+75*(26>n)));r=uc(r/u);q+=36}pb(d,hf(r+22+75*(26>r)));m=p;q=0;t=h==l?uc(t/700):t>>1;for(t+=uc(t/
m);455<t;)t=uc(t/35),q+=36;m=uc(q+36*t/(t+38));t=0;h++}}t++;k++}d="xn--"+hi(d,"")}pb(c,d)}a=hi(c,".");if(Ea(Hm,a))return"Invalid host";c=Mm(a);if(null===c)return"Invalid host"}else{if(Ea(Im,a))return"Invalid host";c="";a=tc(a);for(b=0;b<a.length;b++)c+=qb(a[b],Vd)}this.host=c},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return w(Wd,this.scheme)},
shortenPath:function(){var a=this.path,b=a.length;!b||"file"==this.scheme&&1==b&&bd(a[0],!0)||a.length--},serialize:function(){var a=this.scheme,b=this.username,c=this.password,d=this.host,e=this.port,f=this.path,g=this.query,k=this.fragment,l=a+":";null!==d?(l+="//",this.includesCredentials()&&(l+=b+(c?":"+c:"")+"@"),l+=ad(d),null!==e&&(l+=":"+e)):"file"==a&&(l+="//");l+=this.cannotBeABaseURL?f[0]:f.length?"/"+Zc(f,"/"):"";null!==g&&(l+="?"+g);null!==k&&(l+="#"+k);return l},setHref:function(a){if(a=
this.parse(a))throw jf(a);this.searchParams.update()},getOrigin:function(){var a=this.scheme,b=this.port;if("blob"==a)try{return(new wc(a.path[0])).origin}catch(c){return"null"}return"file"!=a&&this.isSpecial()?a+"://"+ad(this.host)+(null!==b?":"+b:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(a){this.parse(y(a)+":",nf)},getUsername:function(){return this.username},setUsername:function(a){a=tc(y(a));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var b=
0;b<a.length;b++)this.username+=qb(a[b],mf)}},getPassword:function(){return this.password},setPassword:function(a){a=tc(y(a));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var b=0;b<a.length;b++)this.password+=qb(a[b],mf)}},getHost:function(){var a=this.host,b=this.port;return null===a?"":null===b?ad(a):ad(a)+":"+b},setHost:function(a){this.cannotBeABaseURL||this.parse(a,qf)},getHostname:function(){var a=this.host;return null===a?"":ad(a)},setHostname:function(a){this.cannotBeABaseURL||
this.parse(a,rf)},getPort:function(){var a=this.port;return null===a?"":y(a)},setPort:function(a){this.cannotHaveUsernamePasswordPort()||(a=y(a),""==a?this.port=null:this.parse(a,sf))},getPathname:function(){var a=this.path;return this.cannotBeABaseURL?a[0]:a.length?"/"+Zc(a,"/"):""},setPathname:function(a){this.cannotBeABaseURL||(this.path=[],this.parse(a,cd))},getSearch:function(){var a=this.query;return a?"?"+a:""},setSearch:function(a){a=y(a);""==a?this.query=null:("?"==ya(a,0)&&(a=$c(a,1)),this.query=
"",this.parse(a,Ub));this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var a=this.fragment;return a?"#"+a:""},setHash:function(a){a=y(a);""==a?this.fragment=null:("#"==ya(a,0)&&(a=$c(a,1)),this.fragment="",this.parse(a,Sa))},update:function(){this.query=this.searchParams.serialize()||null}};var wc=function(a){var b=Qa(this,Y),c=1<Ob(arguments.length,1)?arguments[1]:void 0;c=wm(b,new vf(a,!1,c));A||(b.href=c.serialize(),b.origin=c.getOrigin(),
b.protocol=c.getProtocol(),b.username=c.getUsername(),b.password=c.getPassword(),b.host=c.getHost(),b.hostname=c.getHostname(),b.port=c.getPort(),b.pathname=c.getPathname(),b.search=c.getSearch(),b.searchParams=c.getSearchParams(),b.hash=c.getHash())},Y=wc.prototype,za=function(a,b){return{get:function(){return Sd(this)[a]()},set:b&&function(a){return Sd(this)[b](a)},configurable:!0,enumerable:!0}};A&&(U(Y,"href",za("serialize","setHref")),U(Y,"origin",za("getOrigin")),U(Y,"protocol",za("getProtocol",
"setProtocol")),U(Y,"username",za("getUsername","setUsername")),U(Y,"password",za("getPassword","setPassword")),U(Y,"host",za("getHost","setHost")),U(Y,"hostname",za("getHostname","setHostname")),U(Y,"port",za("getPort","setPort")),U(Y,"pathname",za("getPathname","setPathname")),U(Y,"search",za("getSearch","setSearch")),U(Y,"searchParams",za("getSearchParams")),U(Y,"hash",za("getHash","setHash")));na(Y,"toJSON",function(){return Sd(this).serialize()},{enumerable:!0});na(Y,"toString",function(){return Sd(this).serialize()},
{enumerable:!0});if(Yc){var vi=Yc.createObjectURL,wi=Yc.revokeObjectURL;vi&&na(wc,"createObjectURL",Nb(vi,Yc));wi&&na(wc,"revokeObjectURL",Nb(wi,Yc))}gc(wc,"URL");ea({global:!0,constructor:!0,forced:!Ye,sham:!A},{URL:wc});class Om{constructor(a){this.config=a}process(a){try{let b=new URL(a);return b.origin+b.pathname}catch(b){}"string"===typeof a&&(a=this.escapeQuotes(a),a=this.escapeBackslash(a),a=this.clearRedundantSpaces(a),a=this.clearHtmlTags(a),this.config.categoryKey&&(a=this.escapeCategoryName(a)));
return a}escapeCategoryName(a){a=a||"";try{var b=a.replace(/\//g,"&#47;").replace(/,/g,"&#44;")}catch(c){}return b||a}escapeQuotes(a){a=a||"";try{var b=a.replace(/'/g,"&#39;").replace(/"/g,"&#34;")}catch(c){}return b||a}escapeBackslash(a){a=a||"";try{var b=a.replace(/\\/g,"&#92;")}catch(c){}return b||a}clearRedundantSpaces(a){a=a||"";try{var b=a.replace(/\r/g," ").replace(/\n/g," ").replace(/\s+/g," ").replace(/\s+/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"")}catch(c){}return b||a}clearHtmlTags(a){a=
a||"";try{var b=a.replace(/<[^>]*>/g,"")}catch(c){}return b||a}}class xi{constructor(a){this.postprocessingConfig=a}process(a){if(!this.postprocessingConfig)return a;var b=a;try{if(this.postprocessingConfig&&this.postprocessingConfig.regex){var c=this.getRegularExpression(this.postprocessingConfig.regex);b=this.getRegExpResults(a,c);if(Array.isArray(b)&&b.length){if(Array.isArray(this.postprocessingConfig.group)){var d=[];this.postprocessingConfig.group.forEach(function(a){b[a-1]&&d.push(b[a-1])});
b=d.join("")}Number.isInteger(this.postprocessingConfig.group)&&(b=b[this.postprocessingConfig.group]);""===this.postprocessingConfig.group&&(b=b.join(""));b=b||""}}if(this.postprocessingConfig&&this.postprocessingConfig.replace){c=this.getRegularExpression(this.postprocessingConfig.replace);var e=this.postprocessingConfig.sub;b=null!==a?a.replace(c,e):""}}catch(f){}return b}getRegularExpression(a){var b=a.match(/^\/(.*?)\/([gim]*)$/);return b?new RegExp(b[1],b[2]):new RegExp(a)}getRegExpResults(a,
b){a=b.exec(a);if(!a)return null;1<a.length&&a.shift();return 1===a.length?a[0]:a}}class wf{constructor(a){this.postprocessingConfig=a}process(a){if(!this.postprocessingConfig)return a;switch(this.postprocessingConfig.type){case wf.type.PRICE:return this._processPrice(a);default:return a}}_processPrice(a){a=a||"";Array.isArray(a)&&(a=a[0]);a=a.replace(/[^\.,\d]/g,"");a=this._clearRedundantSpaces(a);return a=a.replace(/\./g,",").replace(" ",",").replace(/,(\d{1,2}),*$/,".$1").replace(/,/,"")}_clearRedundantSpaces(a){a=
a||"";try{var b=a.replace(/\r/g," ").replace(/\n/g," ").replace(/\s+/g," ").replace(/\s+/g," ").replace(/^\s+/g,"").replace(/\s+$/g,"")}catch(c){}return b||a}}n(wf,"type",{PRICE:"PRICE"});class xc{constructor(a,b){this.config=a;this.containerElement=b;this.postProcessorInstances=[new xi(this.getConfig().postprocessing),new wf(this.getConfig().es_postprocessing),new Om(this.getConfig())]}getConfig(){return this.config}processElementsValues(a){return a.map(a=>this._accumulatePostProcessorsValue(a))}_accumulatePostProcessorsValue(a){return this.postProcessorInstances.reduce((a,
c)=>c.process(a),a)}getElementsBySelector(a){if(Array.isArray(a)){let b=[];a.forEach(c=>{try{b=b instanceof NodeList?(b[0].contentDocument||b[0].contentWindow.document).querySelectorAll(c):this.containerElement?this.containerElement.querySelectorAll(c):document.querySelectorAll(c)}catch(d){throw new SyntaxError("Failed to access encapsulated element path (".concat(c,") for selector ").concat(a));}});return Array.from(b)}return this.containerElement?Array.from(this.containerElement.querySelectorAll(a)):
Array.from(document.querySelectorAll(a))}}class xf extends xc{constructor(a,b){super(a,b)}get(){if(!this.getConfig().selector)return[];let a=this.getElementsBySelector(this.getConfig().selector).map(a=>{const b=this.getConfig().value.toLowerCase();return b===xf.EXPLICITE_ATTR_NAME?a[this.getConfig().value]||a.getAttribute(b):a.getAttribute(b)});return this.processElementsValues(a)}}n(xf,"EXPLICITE_ATTR_NAME","value");class Pm extends xc{constructor(a,b){super(a,b)}get(){if(!this.getConfig().selector)return[];
let a=this.getElementsBySelector(this.getConfig().selector).map(a=>a.textContent);return this.processElementsValues(a)}}class Qm extends xc{constructor(a,b){super(a,b)}get(){if(!this.getConfig().selector)return[];let a=this.getElementsBySelector(this.getConfig().selector);return this.processElementsValues(a)}}class Rm extends xc{constructor(a){super(a)}get(){if(!this.getConfig().selector)return[];let a=new xi(this.getConfig().postprocessing);var b=window.location.href,c=a.getRegularExpression(this.getConfig().selector);
b=a.getRegExpResults(b,c);return(b=Array.isArray(b)&&b.length?b.length>=(this.getConfig().value||1)?a.process(this.getConfig(),b[b.value-1]):b[0]:a.process(b))?[b]:[]}}class Sm extends xc{constructor(a){super(a)}isObject(a){return!(!a||"object"!==typeof a||Array.isArray(a))}findNestedObject(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if(this.isObject(a)){a=Object.entries(a);for(let c=0;c<a.length;c+=1){let d=bb(a[c],
2),e=d[1];if(d[0]===b)return e}}return null}isString(a){return"[object String]"===Object.prototype.toString.call(a)}get(){if(!this.getConfig().selector)return[];let a=void 0;if(window.hasOwnProperty(this.getConfig().selector)){let b=window[this.getConfig().selector],c=this.getConfig().value;if(this.isObject(b)){if(Array.isArray(c)&&c.length){let d={};c.forEach((a,c)=>{d=0===c?this.findNestedObject(b,a):this.findNestedObject(d,a)});a=d&&!this.isObject(d)?d:void 0}this.isString(c)&&"value"===c.toLowerCase()&&
(a=Object.values(b)[0])}this.isString(b)&&this.isString(c)&&"value"===c.toLowerCase()&&(a=b)}return a?[a]:[]}}class yc{static create(a,b){switch(a.method){case "attribute":return new xf(a,b);case "text":return new Pm(a,b);case "element":return new Qm(a,b);case "url":return new Rm(a);case "window":return new Sm(a);default:return{get:()=>[]}}}}let Tm={RECOMS:{ROOT_ELEMENT_ID_PREFIX:"es-recom-",ROOT_ELEMENT_CLASSNAME:"es-recom-container"},FORMS:{ROOT_ELEMENT_ID_PREFIX:"es-form-",ROOT_ELEMENT_CLASSNAME:"es-form-container"}};
class Ta{constructor(){n(this,"obs",null);n(this,"_attemptsCount",0);n(this,"_maxAttemptsCount",5);n(this,"_attemptsInterval",200)}observe(a){this.obs=new MutationObserver(b=>{try{this._mutationRecordsHasProductVariants(b)||a()}catch(c){v.error(c)}});try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0})}catch(b){let a=this,d=setInterval(()=>{this._attemptsCount++;if(a._attemptsCount>=a._maxAttemptsCount)throw clearInterval(d),b;try{this.obs.observe(document.body,{subtree:!0,
childList:!0,attributes:!0}),clearInterval(d)}catch(e){}},this._attemptsInterval)}}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}_mutationRecordsHasProductVariants(a){return 0<a.filter(a=>{let b=Array.from(a.addedNodes);a=Array.from(a.removedNodes);return b.length||a.length?this._hasProductVariants(b)||this._hasProductVariants(a):null}).length}_hasProductVariants(a){return 0<a.filter(a=>a instanceof Element&&a.getAttribute("id")&&[Tm.RECOMS].some(b=>
a.getAttribute("id").startsWith(b.ROOT_ELEMENT_ID_PREFIX))).length}}class Um extends df{constructor(a,b){super({currentPageType:null,prevPageType:null});n(this,"_prevPageType",null);n(this,"_currentPageType",null);this.urlChangeService=a;this.crawlerConfig=b.getState().crawler;this.store=b;this.changeObserver=new Ta}activate(){this.urlChangeService.subscribe(a=>this._onUrlChanged(a))}_onUrlChanged(a){a.url;this.changeObserver.disconnect();let b=()=>{this._prevPageType=this.getState().currentPageType;
var a=this.store.getConfig().crawler;if(a){a=this._getPageTypeConfigs(a);a=Object.values(a).reduce((a,b)=>{const c=b.getterConfigs.find(a=>yc.create(a).get()[0]);c&&a.push({ptConfig:b,getterValue:c});return a},[]);var b=a.find(a=>a.ptConfig.type===x.STATUS_CART),e=a.find(a=>a.ptConfig.type===x.CHECKOUT);this._currentPageType=(a=(b=[b,e].find(a=>!!a))?b.ptConfig:a[0]&&a[0].ptConfig)&&a.type||null;null===this._prevPageType&&null===this._currentPageType||this._prevPageType===this._currentPageType||this.updateState({currentPageType:this._currentPageType,
prevPageType:this._prevPageType})}};b();this.changeObserver.observe(()=>{b()})}onNextPageDetected(a){this.subscribe(a)}_getPageTypeConfigs(a){return{[x.ANY]:{type:x.ANY,getterConfigs:this._getDefaultPageGetterConfigs(a.pages.any)},[x.MAIN]:{type:x.MAIN,getterConfigs:this._getDefaultPageGetterConfigs(a.pages.main)},[x.PRODUCT]:{type:x.PRODUCT,getterConfigs:this._getDefaultPageGetterConfigs(a.pages.product)},[x.STATUS_CART]:{type:x.STATUS_CART,getterConfigs:this._getCustomGetterConfigs(a.status_cart)},
[x.CATEGORY]:{type:x.CATEGORY,getterConfigs:this._getDefaultPageGetterConfigs(a.pages.catalog)},[x.CHECKOUT]:{type:x.CHECKOUT,getterConfigs:this._getCustomGetterConfigs(a.checkout)},[x.NOT_FOUND]:{type:x.NOT_FOUND,getterConfigs:this._getDefaultPageGetterConfigs(a.pages["404"])}}}_getCustomGetterConfigs(a){return a&&a.length?a.map(a=>({selector:a.selector,method:a.method,value:a.value})):[]}_getDefaultPageGetterConfigs(a){return a&&a.length?a:[]}}var zc=new Um(ef,m);class yf{static execute(a,b){let c=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d={method:b,headers:{...3<arguments.length&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"}},credentials:"same-origin",body:null,...4<arguments.length&&void 0!==arguments[4]?arguments[4]:{}};c&&(d.body=JSON.stringify(c));return fetch(a,d).then(a=>204===a.status?null:a.ok?Promise.all([a.clone().blob(),a]).then(a=>{a=bb(a,2);let b=a[1];return a[0].type.includes("application/json")?b.json():Promise.reject(b)}):a.json().then(a=>
Promise.reject(a)))}}let u={MainPage:"MainPage",NotFound:"NotFound",PageView:"PageView",ProductPage:"ProductPage",StatusCart:"StatusCart",StatusCartPage:"StatusCartPage",PurchasedItems:"PurchasedItems",ProductImpression:"ProductImpression",CategoryPage:"CategoryPage",CustomerData:"CustomerData",SearchRequest:"SearchRequest",AddToWishlist:"AddToWishlist",AnyPage:"AnyPage"},yi=(a,b)=>Promise.all([a,b]).then(a=>{var b=bb(a,2);a=b[1];b={status:a.status,body:b[0],statusText:a.statusText,headers:a.headers};
return a.ok?Promise.resolve(b):Promise.reject(b)});class rb{static execute(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var d=3<arguments.length?arguments[3]:void 0;d={method:b,headers:d?{...d}:null,credentials:"same-origin",body:null};c&&(d.body="string"===typeof c?c:JSON.stringify(c));return fetch(a,d).then(a=>{if(204===a.status)return{...a,body:null};switch((a.headers.get("Content-Type")||"").split(";")[0]){case "application/json":return yi(a.json(),a);default:return yi(a.text(),
a)}}).catch(a=>Promise.reject(a))}}class Z{constructor(a){this.uri=a}get(){return"".concat(this.getOrigin()).concat(this.uri)}_getBaseUrl(){let a=m.getConfig();return a&&a.formConfig&&a.formConfig.url||a.apiConfig&&a.apiConfig.hostUrl}getOrigin(){return(new URL("".concat(this._getBaseUrl()))).origin}}class Vm{constructor(a){this.store=a}run(a){if((a&&a.GeneralInfo&&a.GeneralInfo.eventName)!==u.PurchasedItems)return Promise.reject();a={OrgId:this.store.getConfig().orgId,...a};return rb.execute((new Z("/web-tracking/public/v1/order")).get(),
"POST",btoa(unescape(encodeURIComponent(JSON.stringify(a)))),{"Content-Type":"text/plain"})}}var Wm=new Vm(m);class sb{constructor(){n(this,"_eventsQueueMap",{});n(this,"delayMS",1E3);setInterval(()=>{Object.keys(this._eventsQueueMap).forEach(a=>{var b=this._eventsQueueMap[a];if(b=b&&b.length&&b[b.length-1]||null)b=b.payload,this.executeHttpRequest(b),Wm.run(b).then(()=>m.setPurchasedItems(null)).catch(a=>({})),this._eventsQueueMap[a]=[]})},this.delayMS)}track(a){this.addEventToQueue(a)}trackV2(a){return yf.execute(sb.URL_V2,
"POST",a).catch(a=>{})}executeHttpRequest(a,b){return yf.execute(sb.URL_V1,"POST",a,null,b).catch(a=>{v.info("FAILED_TRACKING_v1_WEB_EVENTS",{name:a.name,message:a.message,stack:a.stack})})}addEventToQueue(a){let b=a.GeneralInfo.eventName;this._eventsQueueMap[b]?this._eventsQueueMap[b].push({registeredDate:Date.now(),payload:a}):this._eventsQueueMap[b]=[{registeredDate:Date.now(),payload:a}]}}n(sb,"HOST","https://web-events.esputnik.com");n(sb,"URL_V1",sb.HOST+"/api/v1");n(sb,"URL_V2",sb.HOST+"/api/v2");
var Zd=new sb;class Xm{static map(a){switch(a){case x.CATEGORY:return u.CategoryPage;case x.PRODUCT:return u.ProductPage;case x.STATUS_CART:return u.StatusCart;case x.CHECKOUT:return u.PurchasedItems;case x.ANY:return u.AnyPage;default:return null}}}class Ua{_mapGetterConfigsObject(a,b,c){return Object.keys(a).reduce((d,e)=>{let f=this._findDomElement(a[e],c);return{...d,[e]:b?f&&f[0]||"":f}},{})}_findDomElement(a,b){let c=[];a.forEach(a=>{c.length||(c=yc.create(a,b).get())});return c}}class zi extends Ua{constructor(a){super();
this._payload=[];let b=this._mapGetterConfigsObject(a.mapper);var c=Object.keys(b)[0];if(c){c=b[c].length;for(let a=0;a<c;a++)this._payload.push(Object.keys(b).reduce((c,d)=>({...c,[d]:b[d][a]}),{}));0===a.postprocessing.isUnitPrice&&(this._payload=this._payload.map(a=>{let b=+a.price,c=+a.quantity;return isNaN(b)||isNaN(c)?a:{...a,price:String(b/c)}}))}}get(){return this._payload}}class Ym{constructor(a){n(this,"config",{});n(this,"statusCardVersion",1);this.store=a;a=this.store.getConfig().crawler;
this._setStatusCardVersion(a);this._setConfig(a);this.getConfigByEventType=a=>this._getConfigByEventType(a);this.getStatusCardVersion=a=>this._getStatusCardVersion(a)}_getStatusCardVersion(){return this.statusCardVersion}_setStatusCardVersion(a){if(a&&a.params&&a.params.StatusCartVersion){var b;this.statusCardVersion=null!==(b=a.params.StatusCartVersion)&&void 0!==b?b:1}}_getStatusCartConfig(a){let b;if(a)switch(this.statusCardVersion){case 2:b=this._setStatusCartEventTypeParamsV2(a);break;default:b=
this._setStatusCartEventTypeParamsV1(a)}return b||[]}_setConfig(a){this.config={[u.ProductPage]:{productKey:a.product&&a.product.productKey||[]},[u.StatusCart]:this._getStatusCartConfig(a.status_cart),[u.CategoryPage]:{categoryKey:Array.from(a.catalog&&a.catalog.categoryKey||[]).map(a=>({...a,categoryKey:!0}))},[u.PurchasedItems]:a.checkout&&this._setPurchasedItemsTypeParams(a.checkout)||[],[u.AnyPage]:this._getAnyPageConfig(a)}}_getConfigByEventType(a){this.config[u.StatusCart]=this._getStatusCartConfig(this.store.getConfig().crawler.status_cart);
return this.config[a]}_getAnyPageConfig(a){let b={};a.any&&(a.any.productKey&&(b.productKey=this._setAnyPageEventTypeParams(a.any.productKey)),a.any.categoryKey&&(b.categoryKey=Array.from(a.any.categoryKey).map(a=>({...a,categoryKey:!0}))));return b}_setStatusCartEventTypeParamsV1(a){a=a.find(a=>yc.create(a).get()[0]);if(!a)return{mapper:{},postprocessing:{}};let b=a.products.props,c=a.products.containers;return{mapper:Object.keys(b).reduce((a,e)=>({...a,[e]:b[e].map(a=>({...a,selector:"url"===a.method||
a.encapsulation?a.selector:c+" "+a.selector}))}),{}),postprocessing:{isUnitPrice:a.isUnitPrice}}}_getProductsConfig(a){a=a.find(a=>yc.create(a).get()[0]);if(!a)return{mapper:{},postprocessing:{}};let b=a.products.props,c=a.products.containers;return{mapper:Object.keys(b).reduce((a,e)=>({...a,[e]:b[e].map(a=>{let b=c;if("url"===a.method||a.encapsulation)b=null;return{...a,containerSelector:b}})}),{}),postprocessing:{isUnitPrice:a.isUnitPrice},containerSelector:c}}_setStatusCartEventTypeParamsV2(a){return this._getProductsConfig(a)}_setAnyPageEventTypeParams(a){return this._getProductsConfig(a)}_setPurchasedItemsTypeParams(a){return Array.isArray(a)?
a.map(a=>a.orderNumber):[]}}var Ai=new Ym(m);class Bi{constructor(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Date.now();this.eventName=a;this.siteId=b;this.datetime=f;this.s_location=window.location.href;this.referrer=document.referrer;this.cookies=e;if(c.email||d.email)this.user_email=c.email?c.email:
d.email;if(c.phone||d.phone)this.user_phone=c.phone?c.phone:d.phone;c.userClientId&&(this.user_client_id=c.userClientId);c.iid&&(this.iid=c.iid);d.externalCustomerId&&(this.externalCustomerId=String(d.externalCustomerId));c.clContactId?this.user_es_contact_id=String(c.clContactId):c.esContactId?this.user_es_contact_id=String(c.esContactId):d.esContactId&&(this.user_es_contact_id=String(d.esContactId))}}class Zm extends Ua{constructor(a){super();this._payload=this._mapGetterConfigsObject(a,!0)}get(){return this._payload}}
class $m extends Ua{constructor(a){super();this._payload=this._mapGetterConfigsObject(a,!0)}get(){return this._payload}}class an extends Ua{constructor(a){super();this._payload=(a=this._findDomElement(a))&&a[0]?a[0]:""}get(){return this._payload}}class zf extends Ua{constructor(a){super();this._payload=[];var b=new xc({},null);a.containerSelector&&(b=b.getElementsBySelector(a.containerSelector),0!==b.length&&(b.forEach(b=>{b=this._mapGetterConfigsObject(a.mapper,b);this._payload.push(b)}),0===a.postprocessing.isUnitPrice&&
(this._payload=this._payload.map(a=>{let b=+a.price,c=+a.quantity;return isNaN(b)||isNaN(c)?a:{...a,price:String(b/c)}}))))}_mapGetterConfigsObject(a,b){return Object.keys(a).reduce((c,d)=>{let e=this._findDomElement(a[d],b);return{...c,[d]:e}},{})}_findDomElement(a,b){let c=void 0;a.forEach(a=>{if(c)return c;(a=yc.create(a,b).get())&&a[0]&&!c&&(c=a[0])});return c}get(){return this._payload}}class bn extends Ua{constructor(a){super();this._payload={};if(a.productKey){let b=new zf(a.productKey);this._payload.products=
b.get()}a.categoryKey&&(a=this._mapGetterConfigsObject({categoryKey:a.categoryKey},!0),this._payload.categoryKey=a&&a.categoryKey||"")}get(){return this._payload}}class cn{constructor(a){this.eventPayloadConfigService=a}create(a){switch(a){case u.ProductPage:return a=this.eventPayloadConfigService.getConfigByEventType(u.ProductPage),new Zm(a);case u.StatusCart:return a=this.eventPayloadConfigService.getConfigByEventType(u.StatusCart),2===this.eventPayloadConfigService._getStatusCartConfig()?new zf(a):
new zi(a);case u.CategoryPage:return a=this.eventPayloadConfigService.getConfigByEventType(u.CategoryPage),new $m(a);case u.PurchasedItems:return a=this.eventPayloadConfigService.getConfigByEventType(u.PurchasedItems),new an(a);case u.AnyPage:return a=this.eventPayloadConfigService.getConfigByEventType(u.AnyPage),new bn(a)}}}var dn=new cn(Ai);class Af{static generate(){let a="",b,c;for(c=0;32>c;c++){if(8===c||12===c||16===c||20===c)a+="-";b=Math.floor(16*Math.random()).toString(16).toUpperCase();
a+=b}return a}}class Qb{activate(){this._get(Qb.userCookieName)||this._set(Qb.userCookieName,this._generateUserCookieValue())}getUserCookie(){if(!this._get(Qb.userCookieName)){let a=this._generateUserCookieValue();this._set(Qb.userCookieName,a);return a}return this._get(Qb.userCookieName)}_get(a){try{let b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):void 0}catch(b){}}_set(a,b){let c=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{};c={path:"/",...c,expires:new Date((new Date).getFullYear()+5,0)};c.expires instanceof Date&&(c.expires=c.expires.toUTCString());let d=encodeURIComponent(a)+"="+encodeURIComponent(b);for(let a in c){d+="; "+a;let b=c[a];!0!==b&&(d+="="+b)}try{var e;let c=null!==(e=location.host)&&void 0!==e?e:"localhost";if(1===c.split(".").length)document.cookie=d+"; path=/";else{let e=c.split(".");e.shift();let f="."+e.join(".");document.cookie=d+"; path=/; domain="+f;if(null==
this._get(a)||this._get(a)!==b)f="."+c,document.cookie=d+"; path=/; domain="+f}}catch(f){}}_generateUserCookieValue(){return Af.generate()}}n(Qb,"userCookieName","sc");var aa=new Qb;class en{constructor(){n(this,"_warningsQueueMap",{});n(this,"delayMS",1E3);setInterval(()=>{Object.keys(this._warningsQueueMap).forEach(a=>{var b=this._warningsQueueMap[a];if(b=b&&b.length&&b[b.length-1]||null)b=b.payload,v.warn(b.message,{event:b.event,value:"".concat(b.name,":").concat(b.value)}),this._warningsQueueMap[a]=
[]})},this.delayMS)}warn(a){this.addWarnToQueue(a)}addWarnToQueue(a){let b=a.name;this._warningsQueueMap[b]?this._warningsQueueMap[b].push({registeredDate:Date.now(),payload:a}):this._warningsQueueMap[b]=[{registeredDate:Date.now(),payload:a}]}}var Ci=new en;class kb{checkChanges(a,b,c,d,e){let f=m.getState().pageType;if(this._isIdentifierChanged(a,b)){let g=e||this._generateGUID(),k=(a=m.getConfig().crawler)&&a.params&&"number"===typeof a.params.statusCartDelay?a.params.statusCartDelay:100;Date.now()-
f.changedDate<k||setTimeout(()=>{let a=m.getState().pageType;a.current!==x.STATUS_CART?Math.abs(Date.now()-a.changedDate)-k<k||(m.setStatusCartIdentifier({identifier:b,GUID:g}),this._checkStatusCartStats(d),Zd.track({GeneralInfo:c,[u.StatusCart]:d,GUID:g})):(m.setStatusCartIdentifier({identifier:b,GUID:g}),this._checkStatusCartStats(d),Zd.track({GeneralInfo:c,[u.StatusCart]:d,GUID:g}))},k)}}_checkStatusCartStats(a){var b;let c=[],d=[],e=kb.DEFAULT_PRICE_LIMIT_CART,f=kb.DEFAULT_QUANTITY_LIMIT_CART,
g=null===(b=m.getConfig().crawler)||void 0===b?void 0:b.params;if(g&&g.alerting&&g.alerting[u.StatusCart]){var k,l;e=null!==(k=g.alerting[u.StatusCart].priceLimitCart)&&void 0!==k?k:kb.DEFAULT_PRICE_LIMIT_CART;f=null!==(l=g.alerting[u.StatusCart].quantityLimitCart)&&void 0!==l?l:kb.DEFAULT_QUANTITY_LIMIT_CART}a.forEach(a=>{var b=Number(a.quantity);b&&!isNaN(b)&&f&&b>f&&d.push({numberQuantity:b,quantity:a.quantity,productKey:a.productKey});"Infinity"!==a.price&&(b=Number(a.price))&&!isNaN(b)&&e&&b>
e&&c.push({numberPrice:b,price:a.price,productKey:a.productKey})});d.length&&Ci.warn({event:"StatusCart",name:"quantityLimitCart",message:"ALERT",value:JSON.stringify(d)});c.length&&Ci.warn({event:"StatusCart",name:"priceLimitCart",message:"ALERT",value:JSON.stringify(c)})}_isIdentifierChanged(a,b){return a!==b}_generateGUID(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}createIdentifier(a,b){return"".concat(b,
":")+a.reduce((a,b)=>{let c=Object.keys(b).map(a=>b[a]).join(",");return a.concat(c+";")},"")}}n(kb,"DEFAULT_PRICE_LIMIT_CART",3E5);n(kb,"DEFAULT_QUANTITY_LIMIT_CART",1E4);var $d=new kb;class fn{constructor(a,b,c,d,e,f){this.prevTrackedPayload=this.eventType=null;this.store=a;this.eventPayloadConfigService=c;this.eventTypePayloadFactoryService=d;this.eventsTrackingRepository=e;this.cookieService=f}activate(){this.changeObserver=new Ta;this.changeObserver.observe(a=>this._onDomChanged(a))}handle(a){this.eventType=
a;this._onDomChanged()}_onDomChanged(){this.store.setProductPageId(null);this.store.setCategoryKey(null);this.store.setStatusCartProducts(null);if(this.eventType){var a=this.store.getExperimentVariants();a=new Bi(this.eventType,this.store.getConfig().tenantId,m.getUserInfo(),m.getCustomerData(),{sc:this.cookieService.getUserCookie(),abTest:0<a.length?a.map(a=>"".concat(a.blockId,"_").concat(a.id)).join(","):""},Date.now());var b=m.getState().pageType;if(this.eventType===u.StatusCart||b.current===
x.STATUS_CART){var c=this.eventPayloadConfigService.getConfigByEventType(this.eventType);b=this.store.getState().tracking.statusCart;c=2===this.eventPayloadConfigService.getStatusCardVersion()?(new zf(c)).get():(new zi(c)).get();this.store.setPurchasedItems(c);this.store.setStatusCartProducts(this._createStatusCartProducts(c));var d=$d.createIdentifier(c,this.cookieService.getUserCookie());$d.checkChanges(b.identifier,d,a,c)}else{b=this.eventTypePayloadFactoryService.create(this.eventType).get();
this.eventType===u.ProductPage&&this.store.setProductPageId(b.productKey);this.eventType===u.CategoryPage&&this.store.setCategoryKey(b.categoryKey);this.eventType===u.AnyPage&&(b.hasOwnProperty("products")&&(c=this._createStatusCartProducts(b.products.filter(a=>a.productKey)),this.store.setStatusCartProducts(c)),b.hasOwnProperty("categoryKey")&&this.store.setCategoryKey(b.categoryKey));if(JSON.stringify(b)!==JSON.stringify(this.prevTrackedPayload))if(this.eventType===u.PurchasedItems){c=this.store.getState();
c=c.tracking&&c.tracking.purchasedItems&&c.tracking.purchasedItems.products;d=Af.generate();let e="".concat(null!==b&&void 0!==b?b:"");e&&0!==e.trim().length&&"NaN"!==e||v.warn("ALERT",{event:"PurchasedItems",value:"{ orderNumber:".concat(e,"; trackedOrderId: ").concat(d," }")});this.eventsTrackingRepository.track({GeneralInfo:a,GUID:this.store.getState().tracking.statusCart.GUID,OrderNumber:b,TrackedOrderId:d,PurchasedItems:c})}else this.eventType!==u.AnyPage&&this.eventsTrackingRepository.track({GeneralInfo:a,
[this.eventType]:b});this.prevTrackedPayload=b}}}_createStatusCartProducts(a){return a.map(a=>a.productKey)}}var gn=new fn(m,zc,Ai,dn,Zd,aa);class hn{constructor(a,b){this.store=a;this.cookieService=b}createGeneralPayload(a,b,c,d){var e=this.store.getExperimentVariants();c=new Bi(a,this.store.getConfig().tenantId,this.store.getUserInfo(),this.store.getCustomerData(),{sc:this.cookieService.getUserCookie(),abTest:0<e.length?e.map(a=>"".concat(a.blockId,"_").concat(a.id)).join(","):""},c);e=b||{};let f=
{};if(a===u.PurchasedItems&&null!==d&&void 0!==d&&d.apiMethod){var g;d=Af.generate();f={TrackedOrderId:d};let a="".concat(null!==(g=e.OrderNumber)&&void 0!==g?g:"");a&&0!==a.trim().length&&"NaN"!==a||v.warn("ALERT",{event:"PurchasedItems",value:"{ orderNumber:".concat(a,"; trackedOrderId: ").concat(d," }")})}g=e.hasOwnProperty("GeneralInfo")&&e.GeneralInfo||{};g={...e,...f,GeneralInfo:{...c,...g}};a===u.CustomerData&&b.hasOwnProperty(u.CustomerData)&&(g.GeneralInfo={...g.GeneralInfo,...b[u.CustomerData]});
return g}}var Bf=new hn(m,aa);class jn{constructor(a,b,c,d,e,f){this.pageTypeDetectorService=a;this.repository=b;this.store=c;this.eventsHandlerService=d;this.cookieService=e;this.storageService=f}activate(){this.eventsHandlerService.activate();this._collectUserInfo();this.pageTypeDetectorService.onNextPageDetected(a=>this._onNextPageDetected(a))}_onNextPageDetected(a){var b=a.currentPageType;a=a.prevPageType;this.trackPageView();this.registerPageChange(b,a);b=Xm.map(b);this.eventsHandlerService.handle(b);
setTimeout(()=>this._collectUserInfo())}trackPageView(){this.trackEvent(u.PageView,{[u.PageView]:{}})}trackInternalEvent(a,b){a=Bf.createGeneralPayload(a,b,Date.now());return this.repository.executeHttpRequest(a,{keepalive:!0})}trackEvent(a,b,c,d){return this.repository.track(Bf.createGeneralPayload(a,b,c,d))}trackEventV2(a,b,c,d){return this.repository.trackV2(Bf.createGeneralPayload(a,b,c,d))}_collectUserInfo(){var a=this.store.getConfig().crawler;let b={};if(a.user&&a.user.length){let c=new Ua,
e={};a.user[0].email&&(e.email=[a.user[0].email]);a.user[0].phone&&(e.phone=[a.user[0].phone]);a.user[0].userClientId&&(e.userClientId=[a.user[0].userClientId]);b=c._mapGetterConfigsObject(e,!0)}let c={...this.store.getUserInfo()};a=this.storageService.get("esWebPushContactId");!c.esContactId&&a&&(c.esContactId=a);a=this.storageService.get("clContactId");!c.clContactId&&a&&(c.clContactId=a);Object.keys(b).forEach(a=>{b[a]&&(c[a]=b[a])});this.store.setUserInfo({...c})}registerPageChange(a,b){m.setPageType({current:a,
previous:b})}}var tb=new jn(zc,Zd,m,gn,aa,X);class kn{getActiveRecomVariantsForPageType(a,b){a=this.getActiveVariantsToRenderByPageType(a,b);return this._getAppropriateVariant(a)}getActiveVariantsToRenderByPageType(a,b){let c=this.getActiveVariantsToRender(b).filter(c=>this._filterVariantsWithCorrespondingPageType(b,c,a));return this.formattingVariants(b,c)}getActiveVariantsToRender(a){return Object.values(a.recommendationVariants||{}).filter(b=>this._filterVariantsWithCorrespondingStatus(a,b,"ACTIVE")).filter(b=>
!this._recomShouldBeInDebug(a,b))}getDebugRecomVariantsForPageType(a,b){return Object.values(b.recommendationVariants||{}).filter(a=>b.recommendations[a.recomId]).filter(c=>this._filterVariantsWithCorrespondingPageType(b,c,a))}formattingVariants(a,b){return Object.values(b.reduce(this._aggregateByRecom,{})).map(b=>{if(1===b.length)return{recomVariants:b,trafficSplitRules:null};var c=a.recommendations[b[0].recomId].config;return c?(c=c.trafficSplitRules)&&c.length?{recomVariants:b,trafficSplitRules:c}:
{recomVariants:b,trafficSplitRules:null}:{recomVariants:b,trafficSplitRules:null}})}_getAppropriateVariant(a){return a.map(a=>{if(!a.trafficSplitRules)return a.recomVariants;const b=m.getExperimentVariants();return a.recomVariants.filter(a=>b.find(b=>b.id===a.id))}).reduce((a,c)=>a.concat(c),[])}_aggregateByRecom(a,b){a[b.recomId]?a[b.recomId].push(b):a[b.recomId]=[b];return a}_recomShouldBeInDebug(a,b){a=new URL(window.location.href);a=new URLSearchParams(a.searchParams);return a.has("esDebugRecom")?
a.get("esDebugRecom").split(",").includes(String(b.recomId)):!1}_filterVariantsWithCorrespondingStatus(a,b,c){return a.recommendations[b.recomId]&&a.recommendations[b.recomId].status===c}_filterVariantsWithCorrespondingPageType(a,b,c){return a.recommendations[b.recomId].pageType===c}}var ae=new kn;class ln{compute(a,b){b=this._buildRanges(b);let c=this._generateRandomValue(0,b[b.length-1].to),d=this._getRangeByWeight(b,c);return a.find(a=>a.id===d.variantId)}_getRangeByWeight(a,b){return a.find(a=>
b>=a.from&&b<=a.to)}_buildRanges(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c];if(0===c)b.push({from:0,to:parseInt(d.weight),variantId:d.variantId});else{let a=b[b.length-1].to,c=a+parseInt(d.weight);b.push({from:a,to:c,variantId:d.variantId})}}return b}_generateRandomValue(a,b){return Math.floor(Math.random()*(b-a))+a}}var Di=new ln;class Ei{constructor(a){this.variantComputationByRulesService=a}getExperimentVariantsConfig(){throw Error("You have to implement the method setExperimentVariants!");
}getExperimentVariantsFromConfig(){throw Error("You have to implement the method getExperimentVariantsFromConfig!");}addExperimentVariant(a,b){throw Error("You have to implement the method addExperimentVariant!");}getExperimentVariants(){throw Error("You have to implement the method getExperimentVariants!");}setExperimentVariants(a){throw Error("You have to implement the method setExperimentVariants!");}activate(){let a=this.getExperimentVariantsConfig();this._removeOldExperimentsFromStorage(this.getExperimentVariants(),
a);this._removeModifiedExperimentsFromStorage(this.getExperimentVariants(),a);this._writeNewExperimentsToStorage(this.getExperimentVariants(),a)}_removeOldExperimentsFromStorage(a){let b=this.getExperimentVariantsFromConfig();a=a.filter(a=>b.find(b=>b.id===a.id));this.setExperimentVariants(a)}_removeModifiedExperimentsFromStorage(a,b){b&&b.length&&(b=b.reduce((b,d)=>b.concat(this._getUnmodifiedVariants(d.itemVariants,a,d.trafficSplitRules)),[]),this.setExperimentVariants(b))}_writeNewExperimentsToStorage(a,
b){b.forEach(b=>{let c=b.itemVariants;b=b.trafficSplitRules;if(!a.find(a=>c.find(b=>b.id===a.id))){var e=this.variantComputationByRulesService.compute(c,b);this.addExperimentVariant(e,b)}})}_generateHash(a,b){return"".concat(a,".").concat(b.length,".").concat(b.map(a=>a.weight).join("."))}_getUnmodifiedVariants(a,b,c){return c&&c.length&&a&&a.length?b.filter(b=>a.some(a=>b.hash===this._generateHash(a.id,c))):b}}class mn extends Ei{constructor(a){super(a)}getExperimentVariantsConfig(){let a=m.getConfig();
return ae.formattingVariants(a,ae.getActiveVariantsToRender(a)).filter(a=>a.trafficSplitRules).map(a=>({itemVariants:a.recomVariants,trafficSplitRules:a.trafficSplitRules}))}setExperimentVariants(a){m.setExperimentVariants(a)}getExperimentVariants(){return m.getExperimentVariants()}addExperimentVariant(a,b){m.addExperimentVariant({blockId:a.blockId,id:a.id,hash:this._generateHash(a.id,b)})}getExperimentVariantsFromConfig(){let a=m.getConfig();return Object.values(a.recommendations).filter(a=>a&&a.config&&
a.config.trafficSplitRules).map(b=>Object.values(a.recommendationVariants).filter(a=>b.config.trafficSplitRules.find(b=>b.variantId===a.id))).reduce((a,c)=>a.concat(c),[])}}var nn=new mn(Di);class on{_createParamIfPresent(a,b){return a?Array.isArray(a)?a.length?"".concat(b,": [").concat(a.map(a=>'"'.concat(a,'"')),"],"):"":"".concat(b,": ").concat("string"===typeof a?'"'.concat(a,'"'):a,","):""}}class pn extends on{build(a){let b="isV2: true,"+"".concat(this._createParamIfPresent(a.productIds,"products"))+
"".concat(this._createParamIfPresent(a.cookie,"cookie"))+"".concat(this._createParamIfPresent(a.blockId,"blockId"))+"".concat(this._createParamIfPresent(a.categoryKey,"category"))+"".concat(this._createParamIfPresent(a.languageCode,"languageCode"))+"".concat(Object.keys(a.staticParams).map(b=>this._createParamIfPresent(a.staticParams[b],b)).join(""))+"".concat(this._createParamIfPresent(a.filterValuesParams,"filterValues")),c=a.blockId+(a.variantId?"_"+a.variantId:"");return"\n            {\n  recommendations {\n    products(".concat(b.endsWith(",")?
b.slice(0,-1):b,") {\n      products {\n        ").concat(a.productAvailableFields.map(a=>"url"===a.name?'url: urlWithContent(id: "'.concat(c,'", delimiter: "?")'):a.query).join(" "),"\n        }\n      status\n    }\n  }\n}\n")}}class qn{static get(){try{return m.getConfig().crawler.params[m.getState().pageType.current].recoms.productsRecommendationsArgs||{}}catch(a){return{}}}}let rn="aa ab ae af ak am an ar as av ay az ba be bg bh bi bm bn bo br bs ca ce -- ch co cr cs cu cv cy da de dv dz ee el en eo es et eu fa ff fi fj fo fr fy ga gd gl gn gu gv ha -- he hi ho hr ht hu hy hz ia id ie ig ii ik io is it iu ja jv ka kg ki kj kk kl km kn ko kr ks ku kv kw ky la lb lg li ln lo lt lu lv mg mh mi mk ml mn mr ms mt my na nb nd ne ng nl nn no nr nv ny oc oj om or os pa pi pl ps pt qu rm rn ro ru rw ry sa sc sd se sg sh si sk sl sm sn so sq sr ss st su sv sw ta te tg th ti tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa wo xh yi yo za zh zu".split(" ");
class sn{getLanguageForForms(){let a=this._fromHtml()||this._fromUrl()||this._fromNavigator();return this._normalizeBrowserLanguages(a)}getLanguageForRecoms(){var a;if(null!==(a=m.getConfig().features)&&void 0!==a&&a.mulanRecoms)return(a=this._fromHtml()||this._fromUrl())&&this._normalizeBrowserLanguages(a)||void 0}_fromHtml(){return document.querySelector("html").getAttribute("lang")}_fromUrl(){return location.href.split("/").filter(a=>2===a.length||5===a.length).find(a=>rn.includes(a))}_fromNavigator(){return navigator.language}_normalizeBrowserLanguages(a){return a.includes("-")?
a.split("-")[0].toLowerCase():a.includes("_")?a.split("_")[0].toLowerCase():a}}var Va=new sn;class tn{static get(){try{return m.getConfig().crawler.params.filterValues||[]}catch(a){return[]}}}class Fi extends Error{}class un{static build(a,b){let c;a.productId?c=a.productId:a.productIds?c=a.productIds:m.getState().tracking.product.productId?c=m.getState().tracking.product.productId:m.getState().tracking.statusCart.products&&(c=m.getState().tracking.statusCart.products);let d=m.getConfig().productAvailableFields;
!a.allFields&&a.apiMethod&&(d=m.getConfig().productAvailableFields.filter(a=>"url"===a.name||"item_init"===a.name||"container_type"===a.name));let e=a.variantId||b.id;if(!e)throw new Fi('"variantId" is required');b=a.blockId||b.blockId;if(!b){b=Object.values(m.getConfig().recommendationVariants).find(a=>a.id===e);if(!b)throw new Fi("variantId ".concat(e," was not found in config"));b=b.blockId}let f=[];f=a.filterParams?a.filterParams:tn.get();let g=[];f.length&&f.forEach(a=>{a=yc.create(a).get();
a.length&&a.forEach(a=>g.push(a))});return{blockId:b,variantId:e,productAvailableFields:d,productIds:Array.isArray(c)?c:c?[c]:[],categoryKey:a.categoryKey||m.getState().tracking.category.categoryKey,cookie:aa.getUserCookie(),languageCode:a.languageCode||Va.getLanguageForRecoms(),staticParams:qn.get(),filterValuesParams:g}}}class Gi{constructor(a){n(this,"url","https://ai.esputnik.com/graphql");this.variant=a;this.products=[];this.errors=[];this.params={}}getRecommendations(){let a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};return Promise.resolve().then(()=>{let b=un.build(a,this.variant);var c=new pn;this.params=Object.assign({},b);c=c.build(b);return yf.execute(this.url,"POST",{query:c}).then(a=>a.errors&&a.errors.length?(this.setErrors(a.errors),[]):this.products=a.data.recommendations.products.products.map(a=>({...a,container_type:b.blockId+"_"+b.variantId,product_id:a.id}))).catch(a=>{a.errors&&a.errors.length&&this.setErrors(a.errors);return[]})})}setErrors(a){this.errors=
a.map(a=>a.message.concat(" at: "+(a.path||a.locations).toString())).join(", ")}getErrors(){return this.errors}}let be={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class vn{static map(a){return be.hasOwnProperty(a)?be[a]:be.AFTER_END}}class ub{constructor(a,b,c){n(this,"_rootElement",null);n(this,"_insertType",null);n(this,"selectors",null);n(this,"variant",null);this.position=this._insertType=vn.map(a.insertType);this.selectors=
ub.mapPlacementSelector(a);this.setTargetElement(c||ub.findTargetElement(a));this._rootElement=b}disconnect(){this._rootElement.remove()}setRootElement(a){ub.isElement(a)&&(this._rootElement=a)}getRootElement(){return this._rootElement}setTargetElement(a){a&&ub.isElement(a)&&(this._targetElement=a)}getTargetElement(){return this._targetElement}static isElement(a){return a instanceof Element}static mapPlacementSelector(a){return a.selector?[a.selector]:a.selectors}static findTargetElement(a){return ub.mapPlacementSelector(a).reduce((b,
c,d)=>{if(ub.isElement(b))if(0!==d&&a.encapsulation){if("SHADOW_DOM"===a.encapsulation)return b.shadowRoot.querySelector(c);if("IFRAME"===a.encapsulation)throw Error("Placement#encapsulation IFRAME is not supported yet");}else return b.querySelector(c);return b},document.body)}isMobileEnv(a){return window.matchMedia("(max-width: ".concat(a,"px)")).matches}}class dd extends ub{constructor(a,b,c){super(a,b,c)}connect(a,b){let c=document.createElement("style"),d=document.createElement("div");c.innerHTML=
b;d.innerHTML=a;this._rootElement.appendChild(c);this._rootElement.appendChild(d);this.connectRootToTarget()}connectRootToTarget(){switch(this._insertType){case be.REPLACE:return this.getTargetElement().replaceWith(this.getRootElement());default:return this.getTargetElement().insertAdjacentElement(this._insertType,this._rootElement),this.getRootElement()}}}class wn extends ub{constructor(a,b,c){super(a,b,c)}connect(a,b){let c=document.createElement("style"),d=document.createElement("div");c.innerHTML=
b;d.innerHTML=a;a=document.createElement("div");a.appendChild(c);a.appendChild(d);let e=document.createElement("iframe");e.addEventListener("load",()=>{let a=e.contentWindow.document;e.style.setProperty("height","".concat(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight),"px"))});e.style.border="none";e.style.width="100%";e.srcdoc=a.innerHTML;this._rootElement.appendChild(e);this._targetElement.insertAdjacentElement(this._insertType,
this._rootElement)}}class xn extends dd{constructor(a,b,c){super(a,b,c)}}class yn{static create(a,b,c,d){switch(a?a:"NONE"){case "NONE":return new dd(b,c,d);case "IFRAME":return new wn(b,c,d);case "SHADOW_ROOT":return new xn(b,c,d);default:return new dd(b,c,d)}}}class zn{constructor(a,b){n(this,"handlers",{});this._connector=b;this.variant=a}shouldConnect(a){this.handlers.shouldConnect=a}beforeConnect(a){this.handlers.beforeConnect=a}afterConnect(a){this.handlers.afterConnect=a}beforeDisconnect(a){this.handlers.beforeDisconnect=
a}getRootElement(){return this._connector.getRootElement()}setRootElement(a){this._connector.setRootElement(a)}getTargetElement(){return this._connector.getTargetElement()}}class An{constructor(a,b){this.variant=a;this.connector=b;try{this.callableBody=new Function("context",this.variant.appearance.js)}catch(c){v.error(c,"RecomVariantContext initialization errors: ")}}start(){try{this.ctx=new zn(this.variant,this.connector),this.callableBody(this.ctx)}catch(a){v.error(a,"RecomVariantContext start errors: ")}}runHandler(a,
b){let c=this.ctx.handlers[a];if("function"===typeof c)try{return c(b)}catch(d){v.error(d,"RecomVariantContext handler ".concat(a," errors: "))}else return!0}}var ka={};["forEach","some","every","filter","map"].forEach(function(a){ka[a]=function(b,c,d){if(!b||"string"===typeof b)return b;d=d||this;return b[a]?b[a](c,d):Object.keys(b)[a](function(a){return c.call(d,b[a],a,b)},d)}});var Bn=0;ka.guid=function(){return Bn++};ka.mixin=function(a,b){ka.forEach(b,function(b,d){ka.isArray(b)||ka.isObject(b)?
a[d]=ka.mixin(b,a[d]||{}):a[d]=b});return a};ka.isArray=function(a){return"[object Array]"==={}.toString.call(a)};ka.isObject=function(a){return"[object Object]"==={}.toString.call(a)};ka.indexOf=function(a,b){if(ka.isArray(b))return b.indexOf(a)};ka.keys=Object.keys;ka.now=Date.now;var R=ka,Cf={};(function(a,b){function c(a){var e=a.leader,f=void 0!==a.args;"macro_call"===a.type&&(e="#");a.isWraped&&(e+="{");e=f?e+d(a):e+a.id;b.forEach(a.path,function(a){if("method"==a.type)e+="."+d(a);else if("index"==
a.type){a=a.id;if("integer"===a.type)a=a.value;else if("string"===a.type){var b=a.isEval?'"':"'";a=b+a.value+b}else a=c(a);e+="["+a+"]"}else"property"==a.type&&(e+="."+a.id)},this);a.isWraped&&(e+="}");return e}function d(a){var c=[],d="";b.forEach(a.args,function(a){c.push(e(a))});return d+=a.id+"("+c.join(",")+")"}function e(a){var d="";switch(a.type){case "string":var f=a.isEval?'"':"'";d=f+a.value+f;break;case "integer":case "runt":case "bool":d=a.value;break;case "array":d="[";var l=a.value.length-
1;b.forEach(a.value,function(a,b){d+=e(a);b!==l&&(d+=", ")});d+="]";break;default:d=c(a)}return d}a.getRefText=c})(Cf,R);let Df={get:{match:Ma("get",!0),resolve:function(a){return le(a.context,a.params[0])}},set:{match:Ma("set",!0),resolve:function(a){let b=a.context,c=a.params;a.property;b[c[0]]=c[1];return""}},getValue:{match:ke("get"),resolve:function(a){return le(a.context,a.property.slice(3))}},isValue:{match:ke("is"),resolve:function(a){return le(a.context,a.property.slice(2))}},setValue:{match:ke("set"),
resolve:function(a){let b=a.context,c=a.params;b[a.property.slice(3)]=c[0];b.toString=function(){return""};return b}},keySet:{match:Ma("keySet",!0),resolve:function(a){return R.keys(a.context)}},entrySet:{match:Ma("entrySet",!0),resolve:function(a){const b=[];R.forEach(a.context,function(a,d){b.push({key:d,value:a})});return b}},size:{match:Ma("size",!0),resolve:function(a){a=a.context;a=R.isArray(a)?a.length:R.isObject(a)?R.keys(a).length:void 0;return a}},put:{match:Ma("put",!0),resolve:function(a){let b=
a.params;return a.context[b[0]]=b[1]}},add:{match:Ma("add",!0),resolve:function(a){let b=a.context;if("function"===typeof b.push)return b.push(a.params[0])}},remove:{match:Ma("remove",!0),resolve:function(a){let b=a.context;a=a.params;if(R.isArray(b)){let c;c="number"===typeof c?a[0]:b.indexOf(a[0]);ret=b[c];b.splice(c,1);return ret}if(R.isObject(b))return ret=b[a[0]],delete b[a[0]],ret}},subList:{match:Ma("subList",!0),resolve:function(a){let b=a.params;return a.context.slice(b[0],b[1])}}};var ij=
R.keys(Df).map(function(a){return{uid:"system: "+a,match:Df[a].match,resolve:Df[a].resolve}}),Cn=function(a,b){b=b||{};var c=typeof a;if("string"===c&&0<a.length)return hj(a);if("number"===c&&isFinite(a))return b.long?(b=Math.abs(a),a=864E5<=b?id(a,b,864E5,"day"):36E5<=b?id(a,b,36E5,"hour"):6E4<=b?id(a,b,6E4,"minute"):1E3<=b?id(a,b,1E3,"second"):a+" ms"):(b=Math.abs(a),a=864E5<=b?Math.round(a/864E5)+"d":36E5<=b?Math.round(a/36E5)+"h":6E4<=b?Math.round(a/6E4)+"m":1E3<=b?Math.round(a/1E3)+"s":a+"ms"),
a;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a));},Dn=function(a){function b(a){function d(){for(var a=arguments.length,c=Array(a),f=0;f<a;f++)c[f]=arguments[f];if(d.enabled){a=Number(new Date);d.diff=a-(e||a);d.prev=e;e=d.curr=a;c[0]=b.coerce(c[0]);"string"!==typeof c[0]&&c.unshift("%O");var g=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,(a,e)=>{if("%%"===a)return"%";g++;e=b.formatters[e];"function"===typeof e&&(a=e.call(d,c[g]),c.splice(g,1),g--);return a});b.formatArgs.call(d,
c);(d.log||b.log).apply(d,c)}}let e,k=null,l,h;d.namespace=a;d.useColors=b.useColors();d.color=b.selectColor(a);d.extend=c;d.destroy=b.destroy;Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(null!==k)return k;l!==b.namespaces&&(l=b.namespaces,h=b.enabled(a));return h},set:a=>{k=a}});"function"===typeof b.init&&b.init(d);return d}function c(a,c){a=b(this.namespace+("undefined"===typeof c?":":c)+a);a.log=this.log;return a}function d(a){return a.toString().substring(2,a.toString().length-
2).replace(/\.\*\?$/,"*")}b.debug=b;b.default=b;b.coerce=function(a){return a instanceof Error?a.stack||a.message:a};b.disable=function(){let a=[...b.names.map(d),...b.skips.map(d).map(a=>"-"+a)].join();b.enable("");return a};b.enable=function(a){b.save(a);b.namespaces=a;b.names=[];b.skips=[];let c,d=("string"===typeof a?a:"").split(/[\s,]+/),e=d.length;for(c=0;c<e;c++)d[c]&&(a=d[c].replace(/\*/g,".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.slice(1)+"$")):b.names.push(new RegExp("^"+a+"$")))};
b.enabled=function(a){if("*"===a[a.length-1])return!0;let c,d;c=0;for(d=b.skips.length;c<d;c++)if(b.skips[c].test(a))return!1;c=0;for(d=b.names.length;c<d;c++)if(b.names[c].test(a))return!0;return!1};b.humanize=Cn;b.destroy=function(){};Object.keys(a).forEach(c=>{b[c]=a[c]});b.names=[];b.skips=[];b.formatters={};b.selectColor=function(a){let c=0;for(let b=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b),c|=0;return b.colors[Math.abs(c)%b.colors.length]};b.enable(b.load());return b},Wa=Bb(function(a,b){b.formatArgs=
function(b){b[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+b[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff);if(this.useColors){var c="color: "+this.color;b.splice(1,0,c,"color: inherit");var d=0,g=0;b[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(g=d))});b.splice(g,0,c)}};b.save=function(a){try{a?b.storage.setItem("debug",a):b.storage.removeItem("debug")}catch(e){}};b.load=function(){let a;try{a=b.storage.getItem("debug")}catch(e){}!a&&"undefined"!==
typeof process&&"env"in process&&(a=process.env.DEBUG);return a};b.useColors=function(){return"undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs)?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&
(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};a:{try{var c=localStorage;break a}catch(d){}c=void 0}b.storage=c;b.destroy=(()=>()=>{})();b.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
b.log=console.debug||console.log||(()=>{});a.exports=Dn(b);a.exports.formatters.j=function(a){try{return JSON.stringify(a)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});Wa.formatArgs;Wa.save;Wa.load;Wa.useColors;Wa.storage;Wa.destroy;Wa.colors;Wa.log;var En=Wa("velocity");pa.Helper=Cf;pa.prototype={constructor:pa};(function(a,b){b.mixin(a.prototype,{getBlock:function(a){var b="";switch(a[0].type){case "if":b=this.getBlockIf(a);break;case "foreach":b=this.getBlockEach(a);break;case "macro":this.setBlockMacro(a);
break;case "noescape":b=this._render(a.slice(1));break;case "define":this.setBlockDefine(a);break;case "macro_body":b=this.getMacroBody(a);break;default:b=this._render(a)}return b||""},setBlockDefine:function(a){var b=a[0];a=a.slice(1);this.defines[b.id]=a},setBlockMacro:function(a){var b=a[0];a=a.slice(1);this.macros[b.id]={asts:a,args:b.args}},getMacroBody:function(a){let b=a[0];a=a.slice(1);a=this.eval(a,{});return this.getMacro(b,a)},getMacro:function(c,d){var e=this.macros[c.id],f="";if(e){f=
e.asts;e=e.args;var g=c.args,k={bodyContent:d};d=b.guid();c="macro:"+c.id+":"+d;b.forEach(e,function(a,b){k[a.id]=g[b]?this.getLiteral(g[b]):void 0},this);f=this.eval(f,k,c)}else{d=this.jsmacros;e=d[c.id];var l=[];if(e&&e.apply){b.forEach(c.args,function(a){l.push(this.getLiteral(a))},this);var h=this;d.eval=function(){return h.eval.apply(h,arguments)};try{f=e.apply(d,l)}catch(t){throw f=c.pos,c="\n      at "+a.Helper.getRefText(c)+" L/N "+f.first_line+":"+f.first_column,t.name="",t.message+=c,t;
}}}return f},eval:function(c,d,e){if(d){var f=[],g=a.parse;e=e||"eval:"+b.guid();b.isArray(c)?f=c:g&&(f=g(c));if(f.length)return this.local[e]=d,c=this._render(f,e),this.local[e]={},this.conditions.shift(),this.condition=this.conditions[0]||"",c}else return b.isArray(c)?this._render(c):this.evalStr(c)},getBlockEach:function(a){var c=a[0],e={};Object.assign(e,c.from,{pos:c.pos});var f=this.getLiteral(e),g=a.slice(1),k=c.to,l={foreach:{count:0}},h="",t="foreach:"+b.guid();a={}.toString.call(f);if(!f||
"[object Array]"!==a&&"[object Object]"!==a)return"";if(b.isArray(f)){var m=f.length;b.forEach(f,function(a,b){this._state.break||(l[k]=a,l.foreach={count:b+1,index:b,hasNext:b+1<m},l.velocityCount=b+1,this.local[t]=l,h+=this._render(g,t))},this)}else m=b.keys(f).length,b.forEach(b.keys(f),function(a,b){this._state.break||(l[k]=f[a],l.foreach={count:b+1,index:b,hasNext:b+1<m},l.velocityCount=b+1,this.local[t]=l,h+=this._render(g,t))},this);f&&f.length&&(this._state.break=!1,this.local[t]={},this.conditions.shift(),
this.condition=this.conditions[0]||"");return h},getBlockIf:function(a){var c=!1,e=[];b.some(a,function(a){if(a.condition){if(c)return!0;c=this.getExpression(a.condition)}else if("else"===a.type){if(c)return!0;c=!0}else c&&e.push(a);return!1},this);return this._render(e,this.condition)}})})(pa,R);(function(a,b){b.mixin(a.prototype,{getLiteral:function(a){var c=a.type,e="";"string"===c?e=this.getString(a):"integer"===c?e=parseInt(a.value,10):"decimal"===c?e=parseFloat(a.value,10):"array"===c?e=this.getArray(a):
"map"===c?(e={},b.forEach(a.value,function(a,b){e[b]=this.getLiteral(a)},this)):"bool"===c?"null"===a.value?e=null:"false"===a.value?e=!1:"true"===a.value&&(e=!0):e=this.getReferences(a);return e},getString:function(a){var b=a.value,c=b;!a.isEval||-1===b.indexOf("#")&&-1===b.indexOf("$")||(c=this.evalStr(b));return c},getArray:function(a){var c=[];if(a.isRange){var e=a.value[0];"references"===e.type&&(e=this.getReferences(e));a=a.value[1];"references"===a.type&&(a=this.getReferences(a));a=parseInt(a,
10);e=parseInt(e,10);if(!isNaN(e)&&!isNaN(a))if(e<a)for(;e<=a;e++)c.push(e);else for(;e>=a;e--)c.push(e)}else b.forEach(a.value,function(a){c.push(this.getLiteral(a))},this);return c},evalStr:function(b){b=a.parse(b);return this._render(b,this.condition)}})})(pa,R);(function(a,b){function c(a){if("string"!==typeof a)return a;var b="",c=!1,d;for(d=0;d<a.length;d++){var e=a.charAt(d);" "<=e&&"~">=e||"\r"===e||"\n"===e?"&"===e?(e="&amp;",c=!0):'"'===e?(e="&quot;",c=!0):"<"===e?(e="&lt;",c=!0):">"===
e?(e="&gt;",c=!0):e=e.toString():e="&#"+e.charCodeAt().toString()+";";b+=e}return c?b:a}var d={first_line:"unknown",first_column:"unknown"};b.mixin(a.prototype,{getReferences:function(d,f){if(d.prue){var e=this.defines[d.id];if(b.isArray(e))return this._render(e);d.id in this.config.unescape&&(d.prue=!1)}e=this.config.escape;var k=this.silence||"$!"===d.leader,l=void 0!==d.args,h=this.context,t=h[d.id],m=this.getLocal(d),n=a.Helper.getRefText(d);if(n in h)return d.prue&&e?c(h[n]):h[n];void 0!==t&&
l&&(t=this.getPropMethod(d,h,d));m.isLocaled&&(t=m.value);d.path&&b.some(d.path,function(a,b,c){void 0===t&&this._throw(d,a);t=this.getAttributes(a,t,d)},this);f&&void 0===t&&(t=k?"":a.Helper.getRefText(d));return t=d.prue&&e?c(t):t},getLocal:function(a){var c=a.id,d=this.local,e=!1;a=b.some(this.conditions,function(a){a=d[a];return c in a?(e=a[c],!0):!1},this);return{value:e,isLocaled:a}},getAttributes:function(a,b,c){if(null!==b&&void 0!==b){var d=a.type,e=a.id;return"method"===d?this.getPropMethod(a,
b,c):"property"===d?b[e]:this.getPropIndex(a,b)}},getPropIndex:function(a,b){a=a.id;a="references"===a.type?this.getReferences(a):a.value;return b[a]},getPropMethod:function(c,f,g){var e=c.id,l=f[e],h=[];b.forEach(c.args,function(a){h.push(this.getLiteral(a))},this);let t={property:e,params:h,context:f};if(e=this.customMethodHandlers.find(function(a){return a&&a.match(t)}))En("match custom method handler, uid %s",e.uid),l=e.resolve(t);else if(l&&l.call){var m=this;"object"===typeof f&&f&&(f.eval=
function(){return m.eval.apply(m,arguments)});try{l=l.apply(f,h)}catch(q){throw c=g.pos||d,g=" on "+a.Helper.getRefText(g)+" at L/N "+c.first_line+":"+c.first_column,q.message+=g,q;}}else this._throw(g,c,"TypeError"),l=void 0;return l},_throw:function(b,c,g){if("development"===this.config.env){var e=a.Helper.getRefText(b);b=b.pos||d;c="index"===c.type?c.id.value:c.id;var f="get property "+c+" of undefined";"TypeError"===g&&(f=c+" is not method");f+="\n  at L/N "+e+" "+b.first_line+":"+b.first_column;
e=Error(f);e.name=g||"ReferenceError";throw e;}}})})(pa,R);(function(a,b){b.mixin(a.prototype,{getContext:function(a){var b=this.local,c;for(c of this.conditions)if(b[c].hasOwnProperty(a))return b[c];return this.context},setValue:function(a){var c=a.equal[0],e=this.getContext(c.id);this.condition&&0===this.condition.indexOf("macro:")&&(e=this.context);var f=a.equal[1];var g="math"===f.type?this.getExpression(f):this.config.valueMapper(this.getLiteral(a.equal[1]));if(c.path){var k=e[c.id];"object"!=
typeof k&&(k={});e[c.id]=k;var l=c.path?c.path.length:0;let a=this;b.some(c.path,function(b,c){c=l===c+1;var d=b.id;"index"===b.type&&(d=b.id?a.getLiteral(b.id):d.value);if(c)return k[d]=g;k=k[d];if(void 0===k)return!0})}else e[c.id]=g}})})(pa,R);(function(a,b){b.mixin(a.prototype,{getExpression:function(a){var b=a.expression;if("math"===a.type){switch(a.operator){case "+":a=this.getExpression(b[0])+this.getExpression(b[1]);break;case "-":a=this.getExpression(b[0])-this.getExpression(b[1]);break;
case "/":a=this.getExpression(b[0])/this.getExpression(b[1]);break;case "%":a=this.getExpression(b[0])%this.getExpression(b[1]);break;case "*":a=this.getExpression(b[0])*this.getExpression(b[1]);break;case "||":a=this.getExpression(b[0])||this.getExpression(b[1]);break;case "&&":a=this.getExpression(b[0])&&this.getExpression(b[1]);break;case ">":a=this.getExpression(b[0])>this.getExpression(b[1]);break;case "<":a=this.getExpression(b[0])<this.getExpression(b[1]);break;case "==":a=this.getExpression(b[0])==
this.getExpression(b[1]);break;case ">=":a=this.getExpression(b[0])>=this.getExpression(b[1]);break;case "<=":a=this.getExpression(b[0])<=this.getExpression(b[1]);break;case "!=":a=this.getExpression(b[0])!=this.getExpression(b[1]);break;case "minus":a=-this.getExpression(b[0]);break;case "not":a=!this.getExpression(b[0]);break;case "parenthesis":a=this.getExpression(b[0]);break;default:return}return a}return this.getLiteral(a)}})})(pa,R);(function(a,b){b.mixin(a.prototype,{init:function(){this.context=
{};this.macros={};this.defines={};this.conditions=[];this.local={};this.silence=!1;this.unescape={};var a=this;this.directive={stop:function(){a._state.stop=!0;return""}}},render:function(a,d,e){this.silence=!!e;this.context=a||{};this.jsmacros=b.mixin(d||{},this.directive);a=b.now();d=this._render();this.cost=b.now()-a;return d},_render:function(a,d){var c="";a=a||this.asts;d?(d!==this.condition&&-1===b.indexOf(d,this.conditions)&&this.conditions.unshift(d),this.condition=d):this.condition=null;
b.forEach(a,function(a){if(!0===this._state.stop)return!1;switch(a.type){case "references":c+=this.format(this.getReferences(a,!0));break;case "set":this.setValue(a);break;case "break":this._state.break=!0;break;case "macro_call":c+=this.getMacro(a);break;case "comment":break;case "raw":c+=a.value;break;default:c+="string"===typeof a?a:this.getBlock(a)}},this);return c},format:function(a){if(b.isArray(a))return"["+a.map(this.format.bind(this)).join(", ")+"]";if(b.isObject(a)){if(-1===a.toString.toString().indexOf("[native code]"))return a;
var c=function(b){return b+"="+this.format(a[b])}.bind(this);return"{"+Object.keys(a).map(c).join(", ")+"}"}return a}})})(pa,R);var Ef=Object.freeze({__proto__:null,"default":{}}),Hi=Ef&&Ef["default"]||Ef,ed=Bb(function(a,b){var c=function(){function a(){this.yy={}}var b=function(a,b,c,d){c=c||{};for(d=a.length;d--;c[a[d]]=b);return c},c=[1,8],g=[1,9],k=[1,19],l=[1,10],h=[1,24],m=[1,25],n=[1,23],q=[4,10,11,20,35,36,46,83],p=[1,29],r=[1,34],u=[1,30],v=[1,33],W=[4,10,11,20,23,35,36,39,46,49,50,51,54,
55,56,57,58,59,60,61,62,63,64,65,66,83,85,94],A=[1,51],w=[1,56],x=[1,57],E=[1,74],F=[1,73],B=[1,86],J=[1,81],y=[1,89],D=[1,97],G=[1,92],z=[1,87],K=[1,96],H=[1,93],I=[1,94],C=[4,10,11,20,23,35,36,39,46,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,76,81,83,84,85,94],O=[1,109],qa=[1,123],ra=[1,119],ua=[1,120],P=[1,133],M=[23,50,85],R=[2,98],vb=[23,39,49,50,85],N=[23,39,49,50,54,55,56,57,58,59,60,61,62,63,64,65,66,83,85],S=[23,39,49,50,54,55,56,57,58,59,60,61,62,63,64,65,66,83,85,96],T=[2,111],U=[23,
39,49,50,54,55,56,57,58,59,60,61,62,63,64,65,66,83,85,94],X=[2,114],Z=[1,142],aa=[1,148],Q=[23,49,50],ha=[1,153],ia=[1,154],Rb=[1,155],Sb=[1,156],gb=[1,157],hb=[1,158],ib=[1,159],V=[1,160],Y=[1,161],ba=[1,162],ca=[1,163],da=[1,164],fa=[1,165],Xa=[23,54,55,56,57,58,59,60,61,62,63,64,65,66],ja=[50,85],ka=[2,115],la=[23,35],ma=[1,215],na=[1,214],ea=[39,50],oa=[23,54,55],pa=[23,54,55,56,57,61,62,63,64,65,66],Tb=[23,54,55,61,62,63,64,65,66];b={trace:function(){},yy:{},symbols_:{error:2,root:3,EOF:4,statements:5,
statement:6,references:7,directives:8,content:9,RAW:10,COMMENT:11,set:12,"if":13,elseif:14,"else":15,end:16,foreach:17,"break":18,define:19,HASH:20,NOESCAPE:21,PARENTHESIS:22,CLOSE_PARENTHESIS:23,macro:24,macro_call:25,macro_body:26,SET:27,equal:28,IF:29,expression:30,ELSEIF:31,ELSE:32,END:33,FOREACH:34,DOLLAR:35,ID:36,IN:37,MAP_BEGIN:38,MAP_END:39,array:40,BREAK:41,DEFINE:42,MACRO:43,macro_args:44,macro_call_args_all:45,MACRO_BODY:46,macro_call_args:47,literals:48,SPACE:49,COMMA:50,EQUAL:51,map:52,
math:53,"||":54,"&&":55,"+":56,"-":57,"*":58,"/":59,"%":60,">":61,"<":62,"==":63,">=":64,"<=":65,"!=":66,parenthesis:67,"!":68,literal:69,brace_begin:70,attributes:71,brace_end:72,BOOL:73,methodbd:74,VAR_BEGIN:75,VAR_END:76,attribute:77,method:78,index:79,property:80,DOT:81,params:82,CONTENT:83,BRACKET:84,CLOSE_BRACKET:85,string:86,number:87,integer:88,INTEGER:89,DECIMAL_POINT:90,STRING:91,EVAL_STRING:92,range:93,RANGE:94,map_item:95,MAP_SPLIT:96,$accept:0,$end:1},terminals_:{2:"error",4:"EOF",10:"RAW",
11:"COMMENT",20:"HASH",21:"NOESCAPE",22:"PARENTHESIS",23:"CLOSE_PARENTHESIS",27:"SET",29:"IF",31:"ELSEIF",32:"ELSE",33:"END",34:"FOREACH",35:"DOLLAR",36:"ID",37:"IN",38:"MAP_BEGIN",39:"MAP_END",41:"BREAK",42:"DEFINE",43:"MACRO",46:"MACRO_BODY",49:"SPACE",50:"COMMA",51:"EQUAL",54:"||",55:"&&",56:"+",57:"-",58:"*",59:"/",60:"%",61:">",62:"<",63:"==",64:">=",65:"<=",66:"!=",68:"!",73:"BOOL",75:"VAR_BEGIN",76:"VAR_END",81:"DOT",83:"CONTENT",84:"BRACKET",85:"CLOSE_BRACKET",89:"INTEGER",90:"DECIMAL_POINT",
91:"STRING",92:"EVAL_STRING",94:"RANGE",96:"MAP_SPLIT"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,4],[8,1],[8,1],[8,1],[12,5],[13,5],[14,5],[15,2],[16,2],[17,8],[17,10],[17,8],[17,10],[18,2],[19,6],[24,6],[24,5],[44,1],[44,2],[25,5],[25,4],[26,5],[26,4],[47,1],[47,1],[47,3],[47,3],[47,3],[47,3],[45,1],[45,2],[45,3],[45,2],[28,3],[30,1],[30,1],[30,1],[53,3],[53,3],[53,3],[53,3],[53,3],[53,3],[53,3],[53,3],[53,3],[53,3],
[53,3],[53,3],[53,3],[53,1],[53,2],[53,2],[53,1],[53,1],[67,3],[7,5],[7,3],[7,3],[7,2],[7,5],[7,3],[7,2],[7,4],[7,2],[7,4],[70,1],[70,1],[72,1],[72,1],[71,1],[71,2],[77,1],[77,1],[77,1],[78,2],[74,4],[74,3],[82,1],[82,1],[82,1],[82,3],[82,3],[80,2],[80,2],[79,3],[79,3],[79,3],[79,2],[79,2],[69,1],[69,1],[69,1],[87,1],[87,3],[87,4],[88,1],[88,2],[86,1],[86,1],[48,1],[48,1],[48,1],[40,3],[40,1],[40,2],[93,5],[93,5],[93,5],[93,5],[52,3],[52,2],[95,3],[95,3],[95,2],[95,5],[95,5],[9,1],[9,1],[9,2],[9,
3],[9,3],[9,2]],performAction:function(a,b,c,d,e,f,g){a=f.length-1;switch(e){case 1:return[];case 2:return f[a-1];case 3:case 35:case 41:case 42:case 88:case 96:case 98:this.$=[f[a]];break;case 4:case 36:case 89:this.$=[].concat(f[a-1],f[a]);break;case 5:f[a].prue=!0;f[a].pos=this._$;this.$=f[a];break;case 6:f[a].pos=this._$;this.$=f[a];break;case 7:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 19:case 20:case 21:case 47:case 48:case 52:case 53:case 54:case 68:case 71:case 72:case 84:case 85:case 86:case 87:case 93:case 101:case 108:case 109:case 114:case 120:case 122:case 135:case 136:this.$=
f[a];break;case 8:this.$={type:"raw",value:f[a]};break;case 9:this.$={type:"comment",value:f[a]};break;case 18:this.$={type:"noescape"};break;case 22:this.$={type:"set",equal:f[a-1]};break;case 23:this.$={type:"if",condition:f[a-1]};break;case 24:this.$={type:"elseif",condition:f[a-1]};break;case 25:this.$={type:"else"};break;case 26:this.$={type:"end"};break;case 27:case 29:this.$={type:"foreach",to:f[a-3],from:f[a-1]};break;case 28:case 30:this.$={type:"foreach",to:f[a-4],from:f[a-1]};break;case 31:this.$=
{type:f[a]};break;case 32:this.$={type:"define",id:f[a-1]};break;case 33:this.$={type:"macro",id:f[a-2],args:f[a-1]};break;case 34:this.$={type:"macro",id:f[a-1]};break;case 37:this.$={type:"macro_call",id:f[a-3].replace(/^\s+|\s+$/g,""),args:f[a-1]};break;case 38:this.$={type:"macro_call",id:f[a-2].replace(/^\s+|\s+$/g,"")};break;case 39:this.$={type:"macro_body",id:f[a-3],args:f[a-1]};break;case 40:this.$={type:"macro_body",id:f[a-2]};break;case 43:case 44:case 45:case 46:case 99:case 100:this.$=
[].concat(f[a-2],f[a]);break;case 49:case 50:case 103:case 104:this.$=f[a-1];break;case 51:this.$=[f[a-2],f[a]];break;case 55:this.$={type:"math",expression:[f[a-2],f[a]],operator:"||"};break;case 56:this.$={type:"math",expression:[f[a-2],f[a]],operator:"&&"};break;case 57:case 58:case 59:case 60:case 61:this.$={type:"math",expression:[f[a-2],f[a]],operator:f[a-1]};break;case 62:this.$={type:"math",expression:[f[a-2],f[a]],operator:">"};break;case 63:this.$={type:"math",expression:[f[a-2],f[a]],operator:"<"};
break;case 64:this.$={type:"math",expression:[f[a-2],f[a]],operator:"=="};break;case 65:this.$={type:"math",expression:[f[a-2],f[a]],operator:">="};break;case 66:this.$={type:"math",expression:[f[a-2],f[a]],operator:"<="};break;case 67:this.$={type:"math",expression:[f[a-2],f[a]],operator:"!="};break;case 69:this.$={type:"math",expression:[f[a]],operator:"minus"};break;case 70:this.$={type:"math",expression:[f[a]],operator:"not"};break;case 73:this.$={type:"math",expression:[f[a-1]],operator:"parenthesis"};
break;case 74:this.$={type:"references",id:f[a-2],path:f[a-1],isWraped:!0,leader:f[a-4]};break;case 75:case 76:this.$={type:"references",id:f[a-1],path:f[a],leader:f[a-2]};break;case 77:case 80:this.$={type:"references",id:f[a],leader:f[a-1]};break;case 78:this.$={type:"references",id:f[a-2].id,path:f[a-1],isWraped:!0,leader:f[a-4],args:f[a-2].args};break;case 79:this.$={type:"references",id:f[a-1].id,path:f[a],leader:f[a-2],args:f[a-1].args};break;case 81:this.$={type:"references",id:f[a-1],isWraped:!0,
leader:f[a-3]};break;case 82:this.$={type:"references",id:f[a].id,leader:f[a-1],args:f[a].args};break;case 83:this.$={type:"references",id:f[a-1].id,isWraped:!0,args:f[a-1].args,leader:f[a-3]};break;case 90:this.$={type:"method",id:f[a].id,args:f[a].args};break;case 91:this.$={type:"index",id:f[a]};break;case 92:this.$={type:"property",id:f[a]};"content"===f[a].type&&(this.$=f[a]);break;case 94:this.$={id:f[a-3],args:f[a-1]};break;case 95:this.$={id:f[a-2],args:!1};break;case 97:this.$=[{type:"runt",
value:f[a]}];break;case 102:this.$={type:"content",value:f[a-1]+f[a]};break;case 105:this.$={type:"content",value:f[a-2]+f[a-1].value+f[a]};break;case 106:case 107:this.$={type:"content",value:f[a-1]+f[a]};break;case 110:this.$={type:"bool",value:f[a]};break;case 111:this.$={type:"integer",value:f[a]};break;case 112:this.$={type:"decimal",value:+(f[a-2]+"."+f[a])};break;case 113:this.$={type:"decimal",value:-(f[a-2]+"."+f[a])};break;case 115:this.$=-parseInt(f[a],10);break;case 116:this.$={type:"string",
value:f[a]};break;case 117:this.$={type:"string",value:f[a],isEval:!0};break;case 118:case 119:this.$=f[a];break;case 121:this.$={type:"array",value:f[a-1]};break;case 123:this.$={type:"array",value:[]};break;case 124:case 125:case 126:case 127:this.$={type:"array",isRange:!0,value:[f[a-3],f[a-1]]};break;case 128:this.$={type:"map",value:f[a-1]};break;case 129:this.$={type:"map"};break;case 130:case 131:this.$={};this.$[f[a-2].value]=f[a];break;case 132:this.$={};this.$[f[a-1].value]=f[$01];break;
case 133:case 134:this.$=f[a-4];this.$[f[a-2].value]=f[a];break;case 137:case 140:this.$=f[a-1]+f[a];break;case 138:this.$=f[a-2]+f[a-1]+f[a];break;case 139:this.$=f[a-2]+f[a-1]}},table:[{3:1,4:[1,2],5:3,6:4,7:5,8:6,9:7,10:c,11:g,12:11,13:12,14:13,15:14,16:15,17:16,18:17,19:18,20:k,24:20,25:21,26:22,35:l,36:h,46:m,83:n},{1:[3]},{1:[2,1]},{4:[1,26],6:27,7:5,8:6,9:7,10:c,11:g,12:11,13:12,14:13,15:14,16:15,17:16,18:17,19:18,20:k,24:20,25:21,26:22,35:l,36:h,46:m,83:n},b(q,[2,3]),b(q,[2,5]),b(q,[2,6]),
b(q,[2,7]),b(q,[2,8]),b(q,[2,9]),{36:p,38:r,70:28,73:u,74:31,75:v,83:[1,32]},b(q,[2,10]),b(q,[2,11]),b(q,[2,12]),b(q,[2,13]),b(q,[2,14]),b(q,[2,15]),b(q,[2,16]),b(q,[2,17]),{21:[1,35],27:[1,38],29:[1,39],31:[1,40],32:[1,41],33:[1,42],34:[1,43],36:[1,37],41:[1,44],42:[1,45],43:[1,46],83:[1,36]},b(q,[2,19]),b(q,[2,20]),b(q,[2,21]),b(q,[2,135]),b(q,[2,136]),{36:[1,47]},{1:[2,2]},b(q,[2,4]),{36:[1,48],74:49},b(W,[2,80],{71:50,77:52,78:53,79:54,80:55,22:A,81:w,84:x}),b(W,[2,77],{77:52,78:53,79:54,80:55,
71:58,81:w,84:x}),b(W,[2,82],{77:52,78:53,79:54,80:55,71:59,81:w,84:x}),b(q,[2,140]),{36:[2,84]},{36:[2,85]},{22:[1,60]},b(q,[2,137]),{4:[1,62],22:[1,63],83:[1,61]},{22:[1,64]},{22:[1,65]},{22:[1,66]},b(q,[2,25]),b(q,[2,26]),{22:[1,67]},b(q,[2,31]),{22:[1,68]},{22:[1,69]},{22:[1,70]},{22:A,39:E,71:71,72:72,76:F,77:52,78:53,79:54,80:55,81:w,84:x},{39:E,71:75,72:76,76:F,77:52,78:53,79:54,80:55,81:w,84:x},b(W,[2,75],{78:53,79:54,80:55,77:77,81:w,84:x}),{7:82,23:[1,79],35:B,36:J,38:y,40:83,48:80,52:84,
57:D,69:85,73:G,82:78,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},b(C,[2,88]),b(C,[2,90]),b(C,[2,91]),b(C,[2,92]),{36:[1,99],74:98,83:[1,100]},{7:102,35:B,57:D,69:101,73:G,83:[1,103],85:[1,104],86:90,87:91,88:95,89:K,91:H,92:I},b(W,[2,76],{78:53,79:54,80:55,77:77,81:w,84:x}),b(W,[2,79],{78:53,79:54,80:55,77:77,81:w,84:x}),{23:[1,105]},b(q,[2,138]),b(q,[2,139]),{7:111,23:[1,107],35:B,38:y,40:83,45:106,47:108,48:110,49:O,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{7:113,28:112,
35:B},{7:121,22:qa,30:114,35:B,38:y,40:115,52:116,53:117,57:ra,67:118,68:ua,69:122,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{7:121,22:qa,30:124,35:B,38:y,40:115,52:116,53:117,57:ra,67:118,68:ua,69:122,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{35:[1,125]},{35:[1,126]},{36:[1,127]},{7:111,23:[1,129],35:B,38:y,40:83,45:128,47:108,48:110,49:O,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{39:E,72:130,76:F,77:77,78:53,79:54,80:55,81:w,84:x},b(W,[2,81]),b(W,[2,86]),
b(W,[2,87]),{39:E,72:131,76:F,77:77,78:53,79:54,80:55,81:w,84:x},b(W,[2,83]),b(C,[2,89]),{23:[1,132],50:P},b(C,[2,95]),b(M,[2,96]),b(M,[2,97]),b([23,50],R),b(vb,[2,118]),b(vb,[2,119]),b(vb,[2,120]),{36:p,38:r,70:28,73:u,74:31,75:v},{7:137,35:B,36:J,38:y,40:83,48:80,52:84,57:D,69:85,73:G,82:134,84:z,85:[1,135],86:90,87:91,88:136,89:K,91:H,92:I,93:88},b(vb,[2,122]),{39:[1,139],86:140,91:H,92:I,95:138},b(N,[2,108]),b(N,[2,109]),b(N,[2,110]),b(S,[2,116]),b(S,[2,117]),b(N,T),b(U,X,{90:[1,141]}),{89:Z},
b(C,[2,93]),b(C,[2,101],{22:A}),b(C,[2,102]),{83:[1,144],85:[1,143]},{85:[1,145]},b(C,[2,106]),b(C,[2,107]),b(q,[2,18]),{23:[1,146]},b(q,[2,38]),{23:[2,47],49:[1,147],50:aa},{7:111,35:B,38:y,40:83,47:149,48:110,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},b(Q,[2,41]),b(Q,[2,42]),{23:[1,150]},{51:[1,151]},{23:[1,152]},{23:[2,52]},{23:[2,53]},{23:[2,54],54:ha,55:ia,56:Rb,57:Sb,58:gb,59:hb,60:ib,61:V,62:Y,63:ba,64:ca,65:da,66:fa},b(Xa,[2,68]),{22:qa,67:166,89:Z},{7:121,22:qa,35:B,
53:167,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},b(Xa,[2,71]),b(Xa,[2,72]),{7:121,22:qa,35:B,53:168,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{23:[1,169]},{36:[1,170],38:[1,171]},{36:[1,172]},{7:175,23:[1,174],35:B,44:173},{23:[1,176]},b(q,[2,40]),b(W,[2,74]),b(W,[2,78]),b(C,[2,94]),{7:178,35:B,38:y,40:83,48:177,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{50:P,85:[1,179]},b(vb,[2,123]),b(ja,T,{94:[1,180]}),b(ja,R,{94:[1,181]}),
{39:[1,182],50:[1,183]},b(vb,[2,129]),{96:[1,184]},{89:[1,185]},b(U,ka,{90:[1,186]}),b(C,[2,103]),b(C,[2,105]),b(C,[2,104]),b(q,[2,37]),{7:188,23:[2,50],35:B,38:y,40:83,48:187,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{7:190,35:B,38:y,40:83,48:189,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{23:[2,48],49:[1,191],50:aa},b(q,[2,22]),{7:121,22:qa,30:192,35:B,38:y,40:115,52:116,53:117,57:ra,67:118,68:ua,69:122,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,
93:88},b(q,[2,23]),{7:121,22:qa,35:B,53:193,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:194,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:195,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:196,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:197,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:198,57:ra,67:118,
68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:199,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:200,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:201,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:202,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:203,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},
{7:121,22:qa,35:B,53:204,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},{7:121,22:qa,35:B,53:205,57:ra,67:118,68:ua,69:122,73:G,86:90,87:91,88:95,89:K,91:H,92:I},b(Xa,[2,69]),b(Xa,[2,70]),{23:[1,206],54:ha,55:ia,56:Rb,57:Sb,58:gb,59:hb,60:ib,61:V,62:Y,63:ba,64:ca,65:da,66:fa},b(q,[2,24]),{37:[1,207]},{36:[1,208]},{23:[1,209]},{7:211,23:[1,210],35:B},b(q,[2,34]),b(la,[2,35]),b(q,[2,39]),b(M,[2,99]),b(M,[2,100]),b(vb,[2,121]),{7:213,35:B,57:ma,88:212,89:na},{7:217,35:B,57:ma,88:216,
89:na},b(vb,[2,128]),{86:218,91:H,92:I},b(ea,[2,132],{40:83,52:84,69:85,93:88,86:90,87:91,88:95,48:219,7:220,35:B,38:y,57:D,73:G,84:z,89:K,91:H,92:I}),b(N,[2,112]),{89:[1,221]},b(Q,[2,43]),b(Q,[2,46]),b(Q,[2,44]),b(Q,[2,45]),{7:188,23:[2,49],35:B,38:y,40:83,48:187,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},{23:[2,51]},b(oa,[2,55],{56:Rb,57:Sb,58:gb,59:hb,60:ib,61:V,62:Y,63:ba,64:ca,65:da,66:fa}),b(oa,[2,56],{56:Rb,57:Sb,58:gb,59:hb,60:ib,61:V,62:Y,63:ba,64:ca,65:da,66:fa}),
b(pa,[2,57],{58:gb,59:hb,60:ib}),b(pa,[2,58],{58:gb,59:hb,60:ib}),b(Xa,[2,59]),b(Xa,[2,60]),b(Xa,[2,61]),b(Tb,[2,62],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Tb,[2,63],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Tb,[2,64],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Tb,[2,65],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Tb,[2,66],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Tb,[2,67],{56:Rb,57:Sb,58:gb,59:hb,60:ib}),b(Xa,[2,73]),{7:222,35:B,40:223,84:z,93:88},{39:[1,224]},b(q,[2,32]),b(q,[2,33]),b(la,[2,36]),{85:[1,225]},{85:[1,226]},{85:X},
{89:[1,227]},{85:[1,228]},{85:[1,229]},{96:[1,230]},b(ea,[2,130]),b(ea,[2,131]),b(N,[2,113]),{23:[1,231]},{23:[1,232]},{37:[1,233]},b(vb,[2,124]),b(vb,[2,126]),{85:ka},b(vb,[2,125]),b(vb,[2,127]),{7:234,35:B,38:y,40:83,48:235,52:84,57:D,69:85,73:G,84:z,86:90,87:91,88:95,89:K,91:H,92:I,93:88},b(q,[2,27]),b(q,[2,29]),{7:236,35:B,40:237,84:z,93:88},b(ea,[2,133]),b(ea,[2,134]),{23:[1,238]},{23:[1,239]},b(q,[2,28]),b(q,[2,30])],defaultActions:{2:[2,1],26:[2,2],33:[2,84],34:[2,85],115:[2,52],116:[2,53],
192:[2,51],214:[2,114],227:[2,115]},parseError:function(a,b){if(b.recoverable)this.trace(a);else throw a=Error(a),a.hash=b,a;},parse:function(a){var b=[0],c=[null],d=[],e=this.table,f="",g=0,h=0,k=d.slice.call(arguments,1),l=Object.create(this.lexer),m={};for(t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,t)&&(m[t]=this.yy[t]);l.setInput(a,m);m.lexer=l;m.parser=this;"undefined"==typeof l.yylloc&&(l.yylloc={});var t=l.yylloc;d.push(t);var n=l.options&&l.options.ranges;this.parseError="function"===
typeof m.parseError?m.parseError:Object.getPrototypeOf(this).parseError;for(var q,p,ta,r={},u,L;;){p=b[b.length-1];if(this.defaultActions[p])ta=this.defaultActions[p];else{if(null===q||"undefined"==typeof q)q=l.lex()||1,"number"!==typeof q&&(q=this.symbols_[q]||q);ta=e[p]&&e[p][q]}if("undefined"===typeof ta||!ta.length||!ta[0]){L=[];for(u in e[p])this.terminals_[u]&&2<u&&L.push("'"+this.terminals_[u]+"'");var v=l.showPosition?"Parse error on line "+(g+1)+":\n"+l.showPosition()+"\nExpecting "+L.join(", ")+
", got '"+(this.terminals_[q]||q)+"'":"Parse error on line "+(g+1)+": Unexpected "+(1==q?"end of input":"'"+(this.terminals_[q]||q)+"'");this.parseError(v,{text:l.match,token:this.terminals_[q]||q,line:l.yylineno,loc:t,expected:L})}if(ta[0]instanceof Array&&1<ta.length)throw Error("Parse Error: multiple actions possible at state: "+p+", token: "+q);switch(ta[0]){case 1:b.push(q);c.push(l.yytext);d.push(l.yylloc);b.push(ta[1]);q=null;h=l.yyleng;f=l.yytext;g=l.yylineno;t=l.yylloc;break;case 2:L=this.productions_[ta[1]][1];
r.$=c[c.length-L];r._$={first_line:d[d.length-(L||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(L||1)].first_column,last_column:d[d.length-1].last_column};n&&(r._$.range=[d[d.length-(L||1)].range[0],d[d.length-1].range[1]]);p=this.performAction.apply(r,[f,h,g,m,ta[1],c,d].concat(k));if("undefined"!==typeof p)return p;L&&(b=b.slice(0,-2*L),c=c.slice(0,-1*L),d=d.slice(0,-1*L));b.push(this.productions_[ta[1]][0]);c.push(r.$);d.push(r._$);ta=e[b[b.length-2]][b[b.length-1]];
b.push(ta);break;case 3:return!0}}}};c=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a,b){this.yy=b||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=
this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-
1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);var d=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-b]);this.yyleng=this.yytext.length;return this},more:function(){this._more=
!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<
a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c;if(this.options.backtrack_lexer){var d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,
last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))}if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?
c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a;
if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a;this._more||(this.match=this.yytext="");for(var b=this._currentRules(),c=0;c<b.length;c++)if((a=this._input.match(this.rules[b[c]]))&&(!d||a[0].length>d[0].length)){var d=a;var e=c;if(this.options.backtrack_lexer){d=this.test_match(a,b[c]);if(!1!==d)return d;if(this._backtrack)d=!1;else return!1}else if(!this.options.flex)break}return d?(d=this.test_match(d,b[e]),
!1!==d?d:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-
1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){switch(c){case 0:a=/\\+$/;(a=(a=b.yytext.match(a))?a[0].length:null)&&a%2?(b.yytext=b.yytext.replace(/\\$/,""),this.begin("esc")):this.begin("mu");
1<a&&(b.yytext=b.yytext.replace(/(\\\\)+$/,"\\"));if(b.yytext)return 83;break;case 1:a=/\\+$/;(a=(a=b.yytext.match(a))?a[0].length:null)&&a%2?(b.yytext=b.yytext.replace(/\\$/,""),this.begin("esc")):this.begin("h");1<a&&(b.yytext=b.yytext.replace(/(\\\\)+$/,"\\"));if(b.yytext)return 83;break;case 2:return 83;case 3:return this.popState(),11;case 4:return this.popState(),b.yytext=b.yytext.replace(/^#\[\[|\]\]#$/g,""),10;case 5:return this.popState(),11;case 6:return 46;case 7:return 20;case 8:return 27;
case 9:return 29;case 10:return 31;case 11:return this.popState(),32;case 12:return this.popState(),32;case 13:return this.popState(),33;case 14:return this.popState(),33;case 15:return this.popState(),41;case 16:return 34;case 17:return 21;case 18:return 42;case 19:return 43;case 20:return 37;case 21:return b.yytext;case 22:return b.yytext;case 23:return 65;case 24:return b.yytext;case 25:return 64;case 26:return b.yytext;case 27:return 61;case 28:return 62;case 29:return b.yytext;case 30:return 63;
case 31:return b.yytext;case 32:return 54;case 33:return b.yytext;case 34:return 55;case 35:return b.yytext;case 36:return 66;case 37:return 68;case 38:return 35;case 39:return 35;case 40:return b.yytext;case 41:return 51;case 42:b=this.stateStackSize();if(2<=b&&"c"===this.topState()&&"run"===this.topState(1))return 49;break;case 44:return 38;case 45:return 39;case 46:return 96;case 47:return a.begin=!0,75;case 48:return this.popState(),!0===a.begin?(a.begin=!1,76):83;case 49:return this.begin("c"),
22;case 50:return"c"===this.popState()?(b=this.stateStackSize(),"run"===this.topState()&&(this.popState(),--b),a=this.topState(b-2),2===b&&"h"===a?this.popState():3===b&&"mu"===a&&"h"===this.topState(b-3)&&(this.popState(),this.popState()),23):83;case 51:return this.begin("i"),84;case 52:return"i"===this.popState()?85:83;case 53:return 94;case 54:return 81;case 55:return 90;case 56:return 50;case 57:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),92;case 58:return b.yytext=b.yytext.substr(1,
b.yyleng-2).replace(/\\'/g,"'"),91;case 59:return 73;case 60:return 73;case 61:return 73;case 62:return 89;case 63:return 36;case 64:return this.begin("run"),36;case 65:return this.begin("h"),20;case 66:return this.popState(),83;case 67:return this.popState(),83;case 68:return this.popState(),83;case 69:return this.popState(),4;case 70:return 4}},rules:[/^(?:[^#]*?(?=\$))/,/^(?:[^\$]*?(?=#))/,/^(?:[^\x00]+)/,/^(?:#\*[\s\S]+?\*#)/,/^(?:#\[\[[\s\S]+?\]\]#)/,/^(?:##[^\n]*)/,/^(?:#@)/,/^(?:#(?=[a-zA-Z{]))/,
/^(?:set[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:if[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:elseif[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:else\b)/,/^(?:\{else\})/,/^(?:end\b)/,/^(?:\{end\})/,/^(?:break\b)/,/^(?:foreach[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:noescape(?=[^a-zA-Z0-9_]+))/,/^(?:define[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:macro[ ]*(?=[^a-zA-Z0-9_]+))/,/^(?:in\b)/,/^(?:[%\+\-\*/])/,/^(?:<=)/,/^(?:le\b)/,/^(?:>=)/,/^(?:ge\b)/,/^(?:[><])/,/^(?:gt\b)/,/^(?:lt\b)/,/^(?:==)/,/^(?:eq\b)/,/^(?:\|\|)/,/^(?:or\b)/,/^(?:&&)/,/^(?:and\b)/,/^(?:!=)/,
/^(?:ne\b)/,/^(?:not\b)/,/^(?:\$!(?=[{a-zA-Z_]))/,/^(?:\$(?=[{a-zA-Z_]))/,/^(?:!)/,/^(?:=)/,/^(?:[ ]+(?=[^,]))/,/^(?:\s+)/,/^(?:\{)/,/^(?:\})/,/^(?::[\s]*)/,/^(?:\{[\s]*)/,/^(?:[\s]*\})/,/^(?:\([\s]*(?=[$'"\[\{\-0-9\w()!]))/,/^(?:\))/,/^(?:\[[\s]*(?=[\-$"'0-9{\[\]]+))/,/^(?:\])/,/^(?:\.\.)/,/^(?:\.(?=[a-zA-Z_]))/,/^(?:\.(?=[\d]))/,/^(?:,[ ]*)/,/^(?:"(\\"|[^"])*")/,/^(?:'(\\'|[^'])*')/,/^(?:null\b)/,/^(?:false\b)/,/^(?:true\b)/,/^(?:[0-9]+)/,/^(?:[_a-zA-Z][a-zA-Z0-9_\-]*)/,/^(?:[_a-zA-Z][a-zA-Z0-9_\-]*[ ]*(?=\())/,
/^(?:#)/,/^(?:.)/,/^(?:\s+)/,/^(?:[\$#])/,/^(?:$)/,/^(?:$)/],conditions:{mu:{rules:[5,38,39,47,48,49,50,51,52,54,63,65,66,67,69],inclusive:!1},c:{rules:[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,49,50,51,52,54,55,56,57,58,59,60,61,62,63],inclusive:!1},i:{rules:[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,44,44,45,45,46,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],inclusive:!1},h:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,38,
39,40,41,46,49,50,51,52,54,62,64,66,67,69],inclusive:!1},esc:{rules:[68],inclusive:!1},run:{rules:[38,39,40,42,43,44,45,46,49,50,51,52,54,55,56,57,58,59,60,61,62,63,66,67,69],inclusive:!1},INITIAL:{rules:[0,1,2,70],inclusive:!0}}}}();b.lexer=c;a.prototype=b;b.Parser=a;return new a}();"undefined"!==typeof Wf&&(b.parser=c,b.Parser=c.Parser,b.parse=function(){return c.parse.apply(c,arguments)},b.main=function(a){a[1]||process.exit(1);a=Hi.readFileSync(Hi.normalize(a[1]),"utf8");return b.parser.parse(a)},
Wf.main===a&&b.main(process.argv.slice(1)))});ed.parser;ed.Parser;ed.parse;ed.main;var Fn=ed.parse,jj={if:!0,foreach:!0,macro:!0,noescape:!0,define:!0,macro_body:!0},Zf=[],Ff=function(a,b,c){var d=Fn(a);Zf=b||{};c||R.forEach(d,function(a,b){var c=/^[ \t]*\n/;a.type&&-1===["references","raw"].indexOf(a.type)&&(a=d[b+1],"string"===typeof a&&c.test(a)&&(d[b+1]=a.replace(c,"")))});a=Yf(d);return R.isArray(a)?a:a.arr};pa.parse=Ff;var Ii={parse:Ff,Compile:pa,Helper:Cf,render:function(a,b,c,d){a=Ff(a);return(new pa(a,
d)).render(b,c)}};window.Velocity=Ii;class Gn{static compile(a,b){return Ii.render(a,b)}}var Hn=p([].reverse),Ji=[1,2];ea({target:"Array",proto:!0,forced:String(Ji)===String(Ji.reverse())},{reverse:function(){Ue(this)&&(this.length=this.length);return Hn(this)}});class In{constructor(a,b){var c;this.products=a;this.variant=b;this.language=Va.getLanguageForRecoms();this.defaultLanguage=null===(c=m.getConfig().recommendationConfig)||void 0===c?void 0:c.defaultLanguage;this.translations=this.variant.appearance.translations;
this.headerTranslations=this.variant.headerTranslations;this.header=this.variant.header}translate(a,b,c){let d;c&&b&&Object.keys(c).includes(b)&&(d=c[b][a]);return d||""}translatePageLanguage(a,b){let c=this.translate(a,this.language,this.translations);!c&&b&&(c=this.translate(a,this.defaultLanguage,this.translations));return c}translateHeader(){if(this.language&&this.defaultLanguage&&this.language===this.defaultLanguage)return this.header;let a;this.headerTranslations&&Object.keys(this.headerTranslations).includes(this.language)&&
(a=this.headerTranslations[this.language]);return a||""}create(){return{products:this.products,recom:{header:this.translateHeader()||this.header,variantId:this.variant.id,blockId:this.variant.blockId},translate:a=>this.translatePageLanguage(a,!0),mathTool:{add:function(a,b){return 1*a+1*b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){return a/b}},stringTool:{equalsIgnoreCase:function(a,b){return String(a).toLowerCase()===String(b).toLowerCase()}},numberTool:{integer:function(a){return Math.floor(a)},
format:function(a,b){a=(a||"").split(".")[1];return Number(b).toFixed((a||"").length)},number:function(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:",",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3;return Number(a).toFixed(c).replace(new RegExp("[.]0{".concat(c,"}")),"").split(".").map((a,c)=>{if(0===c)return a.split("").reverse().join("").split("").map((a,c,d)=>{0===c%3&&0!==c&&(a+=b);return a}).reverse().join("");if(1===c)return a}).join(".")}},dateTool:{currentDate:function(a){return this.formatDate(a||
"ISO",new Date)},currentTimeStamp:function(){return this.formatDate(null,new Date)},formatDate:function(a,b){let c=a=>9>a?"0".concat(a):"".concat(a),d=new Date(b);if("Invalid Date"===d.toString())return b;if("ISO"===a)return d.toISOString();if(!a||"string"!==typeof a)return d.getTime();let e="";a.split(" ").forEach(a=>{a=a.toUpperCase();e=0===e.length?e:e+" ";a.includes("HH")&&(e+=a.replace("HH",c(d.getHours())).replace("MM",c(d.getMinutes())).replace("SS",c(d.getSeconds())));if(a.includes("YYYY")||
a.includes("DD"))e+=a.replace("YYYY",String(d.getFullYear())).replace("DD",c(d.getDate())).replace("MM",c(d.getMonth()+1))});return e}}}}}class Jn{constructor(a){n(this,"_options",{disablePrevNextBtnClass:"es-carouselControl__disabled",nextBtnSelector:".js-es-carouselControl__next",previousBtnSelector:".js-es-carouselControl__previous",productItemSelector:".js-es-productsContainer--item",productItemsContainerSelector:".js-es-productsContainer--items",sliderTrackClassName:"es-slider-track",transition:"transform 0.3s ease 0s"});
n(this,"_countVisibleItemsOnPage",0);n(this,"_connector",null);n(this,"_items",[]);n(this,"_itemsContainer",null);n(this,"_nextButtonElement",null);n(this,"_previousButtonElement",null);n(this,"_indexFirstVisibleItem",0);n(this,"_initialItemMinWidth",0);n(this,"_sliderTrackBlock",null);n(this,"_currentPage",0);n(this,"domChangeObserver",null);this.connector=a;this.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}init(){let a=this.connector.getRootElement();
a.isConnected&&this.itemsContainer&&(this.initialItemMinWidth=this.calculateInitialItemMinWidth(),this.correctItemsWidth(),this.indexFirstVisibleItem=this.defaultLIndexFirstVisibleItem,a.addEventListener("click",a=>{this.handleDotClick(a);this.carouseling||(this.carouseling=!0,this.nextBtnClickHandler(a),this.previousBtnClickHandler(a),this.toggleDisablePrevNextButtons(),this.carouseling=!1)}),window.addEventListener("resize",()=>{requestAnimationFrame(()=>{this.itemWidth=null;this.correctItemsWidth();
this.toggleDisablePrevNextButtons()})}),this.initialY=this.initialX=null,this.itemsContainer.addEventListener("touchstart",a=>this.startTouchHandler(a),!1),this.itemsContainer.addEventListener("mousedown",a=>this.startTouchHandler(a),!1),this.itemsContainer.addEventListener("touchmove",a=>this.moveTouchHandler(a),!1),this.itemsContainer.addEventListener("mousemove",a=>this.moveTouchHandler(a),!1),this.itemsContainer.addEventListener("touchend",a=>this.endTouchHandler(a),!1),this.itemsContainer.addEventListener("mouseup",
a=>this.endTouchHandler(a),!1),a.querySelector(this.options.productItemsContainerSelector).addEventListener("mouseleave",a=>this.mouseOutHandler(a),!1),this.toggleDisablePrevNextButtons(),this.initMutationObserver(),this.initAutoScroll())}initMutationObserver(){this.domChangeObserver=new Ta;this.domChangeObserver.observe(a=>this.correctItemsWidth(a))}calculateInitialItemMinWidth(){let a=this.items[0];return a?this.items[0].offsetWidth+(this.getCSSPropertyValue(a,"marginLeft")||0)+(this.getCSSPropertyValue(a,
"marginRight")||0):1}disableScroll(){this.isMobile&&(document.addEventListener("touchmove",this.preventTouchMoveEvent,{passive:!1}),document.body.style.height="100vh !important",document.body.style.overflow="hidden !important")}enableScroll(){this.isMobile&&(document.removeEventListener("touchmove",this.preventTouchMoveEvent),document.body.style.height="",document.body.style.overflow="")}preventTouchMoveEvent(a){a.preventDefault()}startTouchHandler(a){this.isOneRow()&&(this.initialX=a.touches?a.touches[0].pageX:
a.clientX,this.initialY=a.touches?a.touches[0].pageY:a.clientY,this.sliderTrackBlock.style.transition="")}_getConfig(){let a={initDotsOnMobile:!0,initDotsOnDesktop:!1};try{return m.getConfig().crawler.params.sliderPluginOptions||a}catch(b){return a}}initDots(a){var b=this._getConfig();let c=Math.round(this.visibleItems.length/this.countVisibleItemsOnPage)||1,d=a.querySelectorAll(".es-carouselDots--item").length;if((this.isMobile||b.initDotsOnDesktop)&&(!this.isMobile||b.initDotsOnMobile)&&c!==d){try{a.querySelector(".es-carouselDots").remove()}catch(e){}if(a=
a.querySelector(".es-productsContainer"))b=document.createElement("div"),b.classList.add("es-carouselDots"),b.innerHTML=this.getDotsHtml(c),a.appendChild(b);this.updateSlideStatus(c)}}updateSlideStatus(a){this.currentPage>a&&(this.currentPage=a);this.slideToSpecificPage(this.currentPage)}getDotsHtml(a){return'\n            <ul class="es-carouselDots--wrap">\n                '.concat(this.getDots(a),"\n            </ul>\n        ")}getDots(a){let b="";for(let c=0;c<a;c++)b+='<li class="es-carouselDots--item\n                        '.concat(c===
this.currentPage?"es-carouselDots--item__selected":"",'"\n                         data-index="').concat(c,'"><button>').concat(c,"</button></li>");return b}handleDotClick(a){try{let b=a.target.closest(".es-carouselDots--item");this.currentPage=parseInt(b.getAttribute("data-index"));this.slideToSpecificPage(this.currentPage);this.setAutoScrollInterval(this._getConfig())}catch(b){}}initAutoScroll(){let a=this._getConfig();!0===a.autoScrollAfterInit&&(this.incrementCurrentPage(0),this.slideToSpecificPage(this.currentPage));
this.setAutoScrollInterval(a)}incrementCurrentPage(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.maxPages;this.currentPage+=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.currentPage=this.currentPage>this.maxPages?a:this.currentPage}autoScrollFnc(){this.incrementCurrentPage(0);this.slideToSpecificPage(this.currentPage)}setAutoScrollInterval(a){"number"===typeof a.autoScrollDelay&&(this.autoScrollIntervalId&&(clearInterval(this.autoScrollIntervalId),this.autoScrollIntervalId=
null),this.autoScrollIntervalId=setInterval(()=>this.autoScrollFnc(),a.autoScrollDelay))}slideToSpecificPage(a){let b=this.countVisibleItemsOnPage-1;this.removeDotSelectedClass();this.indexFirstVisibleItem=this.defaultLIndexFirstVisibleItem+a*this.countVisibleItemsOnPage;this.indexFirstVisibleItem>this.indexLastVisibleItem-b&&(this.indexFirstVisibleItem=this.indexLastVisibleItem-b);this.indexFirstVisibleItem<this.defaultLIndexFirstVisibleItem&&(this.indexFirstVisibleItem=this.defaultLIndexFirstVisibleItem);
this.addDotSelectedClass(a);this.moveCarouselByValue(-this.indexFirstVisibleItem*this.itemWidth)}removeDotSelectedClass(){try{this.connector.getRootElement().querySelector(".es-carouselDots--item.es-carouselDots--item__selected").classList.remove("es-carouselDots--item__selected")}catch(a){}}addDotSelectedClass(a){try{this.connector.getRootElement().querySelector('[data-index="'.concat(a,'"].es-carouselDots--item')).classList.add("es-carouselDots--item__selected")}catch(b){}}moveTouchHandler(a){if(null!==
this.initialX&&null!==this.initialY&&this.isOneRow())if(a.target.closest(this.options.productItemsContainerSelector)){Array.from(this.sliderTrackBlock.querySelectorAll("a[href], button")).forEach(a=>{a.style.pointerEvents="none"});var b=a.touches?a.touches[0].pageY:a.clientY;this.diffX=this.initialX-(a.touches?a.touches[0].pageX:a.clientX);this.diffY=this.initialY-b;4>=Math.abs(this.diffY)?this.disableScroll():this.enableScroll();a=parseInt("-".concat(this.getCSSPropertyValue(this.sliderTrackBlock,
"width")));b=-(this.indexFirstVisibleItem*this.itemWidth)-this.diffX;0<b&&(b=0);a>b&&(b=a);this.moveCarouselByValue(b)}else this.endTouchHandler()}mouseOutHandler(){this.endTouchHandler()}endTouchHandler(){this.isOneRow()&&(this.enableScroll(),this.sliderTrackBlock&&(this.sliderTrackBlock.style.transition=this.options.transition,Array.from(this.sliderTrackBlock.querySelectorAll("a[href], button")).forEach(a=>{a.style.pointerEvents="auto"})),this.removeDotSelectedClass(),Math.abs(this.diffX)>Math.abs(this.diffY)&&
(0<this.diffX?this.moveCarouselRight():this.moveCarouselLeft()),this.diffY=this.diffX=this.initialY=this.initialX=null,this.toggleDisablePrevNextButtons(),this.addDotSelectedClass(this.currentPage))}toggleDisablePrevNextButtons(){this.previousButtonElement&&(this.indexFirstVisibleItem===this.defaultLIndexFirstVisibleItem?this.previousButtonElement.classList.add(this.options.disablePrevNextBtnClass):this.previousButtonElement.classList.remove(this.options.disablePrevNextBtnClass));this.nextButtonElement&&
(this.indexFirstVisibleItem+this.countVisibleItemsOnPage===this.visibleItems.length?this.nextButtonElement.classList.add(this.options.disablePrevNextBtnClass):this.nextButtonElement.classList.remove(this.options.disablePrevNextBtnClass))}initSliderTrack(){if(this.isOneRow()){var a="".concat(this.items.reduce((a,b)=>a+b.clientWidth,0),"px");if(this.sliderTrackBlock)this.sliderTrackBlock.style.width=a,this.initDots(this.connector.getRootElement());else{var b=this.items[0].parentElement,c=b.innerHTML,
d=document.createElement("div");d.innerHTML=c;d.classList.add(this.options.sliderTrackClassName);d.style.opacity="1";d.style.display="flex";d.style.transition=this.options.transition;d.style.transform="translate3d(-".concat(this.indexFirstVisibleItem*this.itemWidth,"px, 0px, 0px)");d.style.width=a;b.innerHTML="";b.appendChild(d);this._items=[];this.items.forEach(a=>{a.addEventListener("dragstart",a=>{a.preventDefault()})});this.initDots(this.connector.getRootElement());this.markVisibleItems()}}}correctItemsWidth(){(new Promise((a,
b)=>{let c=0,d=setInterval(()=>{c+=1;0<this.itemsContainer.clientWidth&&(clearInterval(d),a());10===c&&(clearInterval(d),b())},300)})).then(()=>{this.initialItemMinWidth||(this.initialItemMinWidth=this.calculateInitialItemMinWidth());let a=this.itemsContainer.clientWidth-(this.getCSSPropertyValue(this.itemsContainer,"paddingLeft")||0)-(this.getCSSPropertyValue(this.itemsContainer,"paddingRight")||0);this.countVisibleItemsOnPage=getComputedStyle(this.itemsContainer).getPropertyValue("--es-recom-count-visible-items")||
Math.floor(a/this.calculateCountVisibleItems(a,this.initialItemMinWidth))||1;let b=a/this.countVisibleItemsOnPage;this.items.forEach(a=>{let c=(this.getCSSPropertyValue(a,"marginLeft")||0)+(this.getCSSPropertyValue(a,"marginRight")||0);this.itemWidth=this.itemWidth||b;a.style.minWidth="".concat(Math.floor(this.itemWidth-c),"px");a.style.maxWidth="".concat(Math.floor(this.itemWidth-c),"px");a.style.display="inline-block";a.style.float="left"});setTimeout(()=>this.initSliderTrack())},()=>{setTimeout(()=>
this.initSliderTrack())})}calculateCountVisibleItems(a,b){return"number"===typeof b?b:b.includes("px")?parseFloat(b):b.includes("%")?(b=parseFloat(b)/100,a*b):.25*a}isOneRow(){return 1===Math.floor(this.itemsContainer.clientHeight/this.items[0].clientHeight)}getCSSPropertyValue(a,b){try{let c=window.getComputedStyle(a)[b];return isNaN(parseFloat(c))?c:parseFloat(c)}catch(c){return""}}get items(){0===this._items.length&&this.itemsContainer instanceof HTMLElement&&(this._items=Array.from(this.itemsContainer.querySelectorAll(this.options.productItemSelector)));
return this._items}get visibleItems(){return Array.from(this.items).filter(a=>!a.classList.contains("cloned"))}nextBtnClickHandler(a){this.isNextButton(a.target)&&this.moveCarouselRight()}moveCarouselByValue(a){this.markVisibleItems();this.sliderTrackBlock&&(this.sliderTrackBlock.style.transform="translate3d(".concat(a,"px, 0px, 0px)"));this.toggleDisablePrevNextButtons()}moveCarouselRight(){let a=this.countVisibleItemsOnPage-1;this.currentPage++;this.correctCurrentPage();this.indexFirstVisibleItem+=
this.countVisibleItemsOnPage;this.indexFirstVisibleItem=this.indexFirstVisibleItem<this.indexLastVisibleItem-a?this.indexFirstVisibleItem:this.indexLastVisibleItem-a;requestAnimationFrame(()=>{this.markVisibleItems();this.sliderTrackBlock&&(this.sliderTrackBlock.style.transform="translate3d(-".concat(this.indexFirstVisibleItem*this.itemWidth,"px, 0px, 0px)"));this.removeDotSelectedClass();this.addDotSelectedClass(this.currentPage);this.setAutoScrollInterval(this._getConfig())})}correctCurrentPage(){this.currentPage>
this.maxPages&&(this.currentPage=this.maxPages);0>this.currentPage&&(this.currentPage=0)}previousBtnClickHandler(a){this.isPreviousButton(a.target)&&this.moveCarouselLeft()}markVisibleItems(){let a=this.indexFirstVisibleItem,b=this.indexFirstVisibleItem+this.countVisibleItemsOnPage;this.items.forEach((c,d)=>{d<a||d>=b?c.classList.remove("visible"):c.classList.add("visible")})}moveCarouselLeft(){this.currentPage--;this.correctCurrentPage();this.indexFirstVisibleItem-=this.countVisibleItemsOnPage;this.indexFirstVisibleItem=
this.indexFirstVisibleItem>=this.defaultLIndexFirstVisibleItem?this.indexFirstVisibleItem:this.defaultLIndexFirstVisibleItem;requestAnimationFrame(()=>{this.markVisibleItems();this.sliderTrackBlock.style.transform="translate3d(-".concat(this.indexFirstVisibleItem*this.itemWidth,"px, 0px, 0px)");this.removeDotSelectedClass();this.addDotSelectedClass(this.currentPage);this.setAutoScrollInterval(this._getConfig())})}isNextButton(a){return a.closest(this.options.nextBtnSelector)}isPreviousButton(a){return a.closest(this.options.previousBtnSelector)}get itemsContainer(){this._itemsContainer instanceof
HTMLElement||(this._itemsContainer=this.connector.getRootElement().querySelector(this.options.productItemsContainerSelector));return this._itemsContainer}get indexFirstVisibleItem(){return this._indexFirstVisibleItem}get defaultLIndexFirstVisibleItem(){return this.items.findIndex(a=>!a.classList.contains("cloned"))}get indexLastVisibleItem(){let a=this.items.findIndex((a,c,d)=>!a.classList.contains("cloned")&&d[c+1]&&d[c+1].classList.contains("cloned"));return 0<a?a:this.visibleItems.length-1}set indexFirstVisibleItem(a){this._indexFirstVisibleItem=
a}get connector(){return this._connector}set connector(a){this._connector=a}get options(){return this._options}get initialItemMinWidth(){return this._initialItemMinWidth}set initialItemMinWidth(a){this._initialItemMinWidth=a}get countVisibleItemsOnPage(){return this._countVisibleItemsOnPage}set countVisibleItemsOnPage(a){this._countVisibleItemsOnPage=a}get nextButtonElement(){this._nextButtonElement instanceof HTMLElement||(this._nextButtonElement=this.connector.getRootElement().querySelector(this.options.nextBtnSelector));
return this._nextButtonElement}get previousButtonElement(){this._previousButtonElement instanceof HTMLElement||(this._previousButtonElement=this.connector.getRootElement().querySelector(this.options.previousBtnSelector));return this._previousButtonElement}get sliderTrackBlock(){this._sliderTrackBlock||(this._sliderTrackBlock=this.connector.getRootElement().querySelector(".".concat(this.options.sliderTrackClassName)));return this._sliderTrackBlock}get currentPage(){return this._currentPage}set currentPage(a){this._currentPage=
a}get maxPages(){let a=this.visibleItems.length/this.countVisibleItemsOnPage;return 0<this.visibleItems.length%this.countVisibleItemsOnPage?Math.floor(a):a-1}}class Kn{constructor(a){this._payload=a.productIds.map(b=>({product_id:String(b),container_type:String(a.blockId)}))}get(){return this._payload}}class Ki{constructor(a,b){this.observer=null;this.rootElement=a;this.oneTimeObserver=b}handle(a){this.observer=new IntersectionObserver(b=>{b.find(a=>a.isIntersecting)&&(a(),this.oneTimeObserver&&this.unsubscribe())},
{root:null,rootMargin:"0px",threshold:.1});this.observer.observe(this.rootElement)}unsubscribe(){this.observer.disconnect()}}class Ln extends Ki{constructor(a,b){super(a,!0);this.params=b}handle(){super.handle(this.onElementShown.bind(this))}onElementShown(){(new Promise(a=>{var b={productIds:this.params.products.map(a=>a.id),blockId:this.params.blockId};let c=this.params.products[0].url.split("sc_content=")[1];c&&(b.blockId=c);b=(new Kn(b)).get();tb.trackInternalEvent("ProductImpressions",{[u.ProductImpression]:b});
a()})).catch(a=>v.error(a,"onElementShown error on ProductImpressionEventHandler: "))}}class Mn{constructor(a,b){this.element=document.createElement("div");a&&(this.element.id=a);b&&(this.element.className=b)}get(){return this.element}}class Nn extends Mn{constructor(a){super("es-recom-".concat(a.recomId,"-v-").concat(a.id),"es-recom-container")}get(){super.get().style.minWidth="100%";super.get().style.overflow="auto";return super.get()}}class Li{constructor(a){n(this,"_successInjected",!1);n(this,
"variant",null);this.variant=a;this.dataSource=new Gi(a);this.connector=yn.create(a.appearance.encapsulation,a.placement,(new Nn(this.variant)).get());this.ctxContainer=new An(a,this.connector);this.plugins=[new Jn(this.connector)]}async inject(){this._successInjected=!1;this.ctxContainer.start();if(!this.ctxContainer.runHandler("shouldConnect")){var a="Should not be connected variantId: "+this.getId();return Promise.reject({reason:a})}this.ctxContainer.runHandler("beforeConnect");a=await this.dataSource.getRecommendations();
if(!a||!a.length)return a="No products for recom variant variantId: ".concat(this.getId()),Promise.reject({reason:a});var b=(new In(a,this.variant)).create();b=Gn.compile(this.variant.appearance.html,b);this.connector.connect(b,this.variant.appearance.css,this.variant.placement,this.getId(),this.variant.recomId);this.ctxContainer.runHandler("afterConnect",a);this._handleAddToStatusCartClick();this._handleRecommendationsShownInViewport(this.dataSource.params.blockId,a);try{this.plugins.forEach(a=>
requestAnimationFrame(()=>a.init()))}catch(c){}this._successInjected=!0;return Promise.resolve(this)}destroy(){this.ctxContainer.runHandler("beforeDisconnect");this.connector.disconnect();this._successInjected=!1}getId(){return this.variant.id}get isPresent(){return!!this.connector.getRootElement().isConnected}get isInjectSuccessful(){return this._successInjected}_handleAddToStatusCartClick(){try{this.connector.getRootElement().addEventListener("click",a=>{a&&a.target&&(a=a.target.getAttribute("data-add-to-status-cart-product-id"))&&
tb.trackEventV2("ProductPage",{ProductPage:{Product:{productKey:a},Tags:{block_id:[this.ctxContainer.variant.blockId+"_"+this.ctxContainer.variant.id]}}},Date.now())})}catch(a){v.error(a)}}_handleRecommendationsShownInViewport(a,b){let c=this.connector.getRootElement();(new Ln(c,{products:b,blockId:a})).handle()}}class On{constructor(a,b){n(this,"_activeRecomVariants",[]);n(this,"_variantsQueue",[]);n(this,"_injectedVariants",[]);this._activeRecomVariants=a;this._variantsQueue=this._activeRecomVariants.slice();
this.changeObserver=new Ta;this.onVariantInjected=b;this.changeObserver.observe(()=>this._tryToInjectVariants());this._tryToInjectVariants();this._initListenerRecomVariantsStillPresent()}destroy(){this._disconnectChangeObserver();this._listenRecomVariantsStillPresentObserver&&this._listenRecomVariantsStillPresentObserver.disconnect();this._injectedVariants.forEach(a=>{try{a.destroy()}catch(b){}});this._injectedVariants=[]}_tryToInjectVariants(a){let b=this._getReadyToInjectVariants();this._injectVariants(b);
this._removeInjectedVariantsFromQueue(b);this._variantsQueue.length||(this._disconnectChangeObserver(),"function"===typeof a&&a())}_disconnectChangeObserver(){this.changeObserver.disconnect()}_getReadyToInjectVariants(){return this._variantsQueue.filter(a=>a.placement.selector&&document.querySelector(a.placement.selector))}_injectVariants(a){a.forEach(a=>{a=new Li(a);this._injectedVariants.push(a);a.inject().then(this.onVariantInjected).catch(a=>{a.reason||v.error(a)})})}_removeInjectedVariantsFromQueue(a){a.forEach(a=>
{let b=this._variantsQueue.findIndex(b=>b.id===a.id);this._variantsQueue.splice(b,1)})}_listenRecomVariantsStillPresent(){0===this._variantsQueue.length&&(this._injectedVariants.forEach(a=>{let b=a.variant,c=this._variantsQueue.findIndex(a=>a.id===b.id);if(a.isInjectSuccessful&&!a.isPresent&&-1===c){try{a.destroy()}catch(d){}this._variantsQueue.push(b)}}),0<this._variantsQueue.length&&this._tryToInjectVariants())}_inject(){return new Promise(a=>this._tryToInjectVariants(a))}_initListenerRecomVariantsStillPresent(){this._listenRecomVariantsStillPresentObserver=
new Ta;this._listenRecomVariantsStillPresentObserver.observe(()=>this._listenRecomVariantsStillPresent())}}class Mi{constructor(a){n(this,"collectionIntervalHours",null);this.collectionIntervalHours=a}setData(a,b){this._storeData({[a]:b})}getData(a){return this._getData().data[a]}_getData(){}_setData(a){}_storeData(a){let b=this._getData();this._setData({...b,data:{...b.data,...a}})}_updateMetricCollectionDate(){let a=this._getData();this._setData({...a,lastDate:(new Date).toISOString()})}_shouldMetricBeCollected(){var a=
this._getLastDate();if(!a)return!0;a=new Date(a);return parseInt(((new Date).getTime()-a.getTime())/36E5)>=this.collectionIntervalHours}_getLastDate(){return this._getData().lastDate}}class Ni extends Mi{constructor(){super(2);this._storeData({SCRIPT_INITIAL_LOAD:this._getWindowPerf()});this._shouldMetricBeCollected()&&v.info("SCRIPT_INITIAL_LOAD",this._composePayload())}collect(a){this._storeData({[a]:this._getWindowPerf()})}_getData(){return m.getMetrics()}_setData(a){m.setMetrics(a)}_composePayload(){let a=
this._getData();return{site:(new URL(document.location.href)).hostname,...a.data}}_getWindowPerf(){return window.performance.now()}}n(Ni,"METRICS_URL","https://site-script.esputnik.com/site-script/v1/monitoring");var Oi=new Ni;class Pn{constructor(a,b){n(this,"injector",null);this.pageTypeDetectorService=a;this.recomVariantsDataService=b}activate(){this.pageTypeDetectorService.onNextPageDetected(a=>this._onNextPageDetected(a))}initializePageRecoms(a){a=this.recomVariantsDataService.getActiveRecomVariantsForPageType(a,
m.getConfig());this.injector=new On(a,()=>this._onVariantInjected())}destroyPageRecoms(){this.injector&&this.injector.destroy()}_onNextPageDetected(a){a=a.currentPageType;this.destroyPageRecoms();this.initializePageRecoms(a)}_onVariantInjected(){Oi.collect("RECOM_RENDERED")}}var Qn=new Pn(zc,ae);class Pi{isDebugQueryStringPresentInUrl(a){let b=window.location.href.toLowerCase();return!!Object.values(a).find(a=>b.includes(a))}_getDebugIds(a,b){return(a.get(b)||"").split(",").map(a=>parseInt(a)).filter(a=>
Number.isInteger(a))}}class Rn extends Pi{constructor(a,b){super();n(this,"_countAttempts",0);n(this,"_currentPageType",null);n(this,"_injectableDebugRecomVariants",[]);n(this,"_queryParamNames",{DEBUG_RECOM:"esdebugrecom",DEBUG_RECOM_VARIANT:"esdebugrecomvariant"});this.pageTypeDetectorService=a;this.recomVariantsDataService=b;this.changeObserver=new Ta}activate(){this.pageTypeDetectorService.onNextPageDetected(a=>this._onNextPageDetected(a));this.changeObserver.observe(a=>this.tryToRenderDebugVariant(a))}tryToRenderDebugVariant(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;a=Array.isArray(a)&&a.length?a:this._getConfigsToDebug(this._currentPageType);this._tryToRenderDebugRecomVariants(a)}_tryToRenderDebugRecomVariants(a){(a||[]).filter(a=>!this._injectableDebugRecomVariants.find(b=>b.variant.id===a.id)).forEach(a=>{let b=new Li(a);this._injectableDebugRecomVariants.push(b);b.inject().catch(c=>{b.isInjectSuccessful||this._destroyDebugVariant(a.id);c.reason||this._destroyDebugVariant(a.id)})})}_onNextPageDetected(a){this._currentPageType=
a.currentPageType;this.destroyDebugVariants();this.tryToRenderDebugVariant()}_getConfigsToDebug(a){if(null!==window.location.href&&this.isDebugQueryStringPresentInUrl(this._queryParamNames)){var b=new URL(window.location.href.toLowerCase());b=new URLSearchParams(b.searchParams);var c=this._getDebugIds(b,this._queryParamNames.DEBUG_RECOM);if(0!==c.length)return this._getRecomConfigsToDebug(c,b,a)}}_getRecomConfigsToDebug(a,b,c){c=this.recomVariantsDataService.getDebugRecomVariantsForPageType(c,m.getConfig());
c=a.length?c.filter(b=>a.includes(b.recomId)):c;if(b.has(this._queryParamNames.DEBUG_RECOM_VARIANT)){let a=b.get(this._queryParamNames.DEBUG_RECOM_VARIANT).split(",");c=c.filter(b=>a.includes(b.id))}return c}destroyDebugVariants(){this._injectableDebugRecomVariants.length&&(this._injectableDebugRecomVariants.forEach(a=>a.destroy()),this._injectableDebugRecomVariants=[])}_destroyDebugVariant(a){this._countAttempts+=1;if(this._injectableDebugRecomVariants.length&&5>this._countAttempts){let b=this._injectableDebugRecomVariants.find(b=>
b.variant.id===a);b&&"function"===typeof b.destroy&&(b.destroy(),this._injectableDebugRecomVariants=this._injectableDebugRecomVariants.filter(a=>a.variant.id!==b.variant.id))}}}var Sn=new Rn(zc,ae);class Fa{static isEmail(a){return Fa.emailPattern.test(a)}static isPhoneNumber(a){return a?(a=(a||"").match(Fa.phonePattern))?10<=a.length:!1:!1}}n(Fa,"emailPattern",/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/);n(Fa,"phonePattern",new RegExp(/\d/,"g"));class Tn extends df{constructor(){super({url:""});
window.addEventListener("beforeunload",a=>this.onBeforeNavigationHandler(a))}onBeforeNavigationHandler(){this.updateState({url:""})}}var Qi=new Tn;class Un{constructor(a,b,c){n(this,"eventListeners",{});this.store=a;this.urlChangeService=b;this.onBeforeUnloadChangeService=c;this.changeObserver=new Ta;this.dataWasCollectedOnCurrentPageRefresh=void 0;this.navigationChangeSubscriptions=[]}activate(){this._isCrawlerConfigHasCustomerData()&&(this.changeObserver.observe(a=>this._collectCustomerData(a)),
this._collectCustomerData(),this.dataWasCollectedOnCurrentPageRefresh=!1,this.navigationChangeSubscriptions.push(this.urlChangeService.subscribeSingle(a=>this._urlChangeListener(a))),this.navigationChangeSubscriptions.push(this.onBeforeUnloadChangeService.subscribeSingle(a=>this._urlChangeListener(a))))}_collectCustomerData(){this.store.getConfig().crawler.customer_data.forEach(a=>{var b=a.actionElement;let c=b.selector;b=b.eventType;let d=this._getActionElement(c);d&&!this.eventListeners[c]&&(this.eventListeners[c]=
()=>this._formSubmitHandler(a),d.addEventListener(b,this.eventListeners[c]))})}getValidCustomerData(a){return Object.values(a).reduce((a,c)=>{Fa.isEmail(c)&&(a.email=c);Fa.isPhoneNumber(c)&&(a.phone=c.match(Fa.phonePattern).join(""));return a},{})}isPayloadPresent(a){return 0<Object.values(a||{}).filter(a=>!!a).length}_mapCustomerDataBySC(a){return Object.keys(a).reduce((b,c)=>{b["user_".concat(c)]=a[c];return b},{})}_getActionElement(a){return document.querySelector(a)}_formSubmitHandler(a){let b=
(new Ua)._mapGetterConfigsObject(a.values,!0);this.dataWasCollectedOnCurrentPageRefresh=!0;this.store.setCustomerData(this.getValidCustomerData(b));this.eventListeners[a.actionElement.selector]=void 0}_isEventListenersEmpty(){return 0===Object.values(this.eventListeners).filter(a=>!!a).length}_tryCancelChangeObservable(){this._isEventListenersEmpty()&&this.changeObserver.disconnect()}_urlChangeListener(){this.isPayloadPresent(this.store.getState().customerData)&&(this._sendData(),this._tryCancelChangeObservable(),
this.unsubscribeDataCollectorListeners())}unsubscribeDataCollectorListeners(){this.navigationChangeSubscriptions.forEach(a=>a.unsubscribe())}_sendData(){if(!0===this.dataWasCollectedOnCurrentPageRefresh){var a={[u.CustomerData]:this._mapCustomerDataBySC(this.store.getState().customerData)};tb.trackInternalEvent(u.CustomerData,a)}}_isCrawlerConfigHasCustomerData(){return!!this.store.getConfig().crawler.customer_data}}var Vn=new Un(m,ef,Qi);class Wn{constructor(){this.key=(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:"")+"f.session.count"}isFirstTimeSeen(){return!localStorage.getItem(this.key)}getStats(){return{}}destroy(){}}class Gf{constructor(){this.prefix=0<arguments.length&&void 0!==arguments[0]?arguments[0]:""}incrementCount(a){let b=this.getCount(a)+1;X.set(a,b)}getKey(a){return this.prefix+a}getCount(a){return this.getCountFromValue(X.get(a))}map(a){let b=X.get(a)||{},c=this.getCountFromValue.bind(this);return{put(c,e){b[c]=e;X.set(a,b)},incrementCount(d){b[d]=c(b[d])+1;X.set(a,
b)},get(a){return b[a]},value(){return b}}}getCountFromValue(a){a=Number.parseInt(a);return Number.isInteger(a)?a:0}}class Xn extends Zh{get(a){return this._process(()=>sessionStorage.getItem(a))}set(a,b){return this._process(()=>sessionStorage.setItem(a,b))}}var Ja=new Xn;class Yn extends Gf{constructor(a){super(a)}startSession(){let a=this.generateSessionTimestamp();X.set(this.getKey("f.session.")+a,a);Ja.set(this.getKey("f.session"),a);Ja.set(this.getKey("f.session.pages.count"),"1");Ja.set(this.getKey("f.session.url.search"),
"");this.incrementSessionCount()}getStats(){return{sessionDurationMs:new Date-new Date(this.getSessionTimestamp()),lastSessionIndex:this.getCount(this.getKey("f.session.count")),sessionPagesCount:this.getSessionPagesCount(),currentSession:this.getSessionTimestamp(),sessionUrlSearchParams:this.getUrlSearchParams()}}isInCurrentSession(){let a=Ja.get(this.getKey("f.session"));return a?!!X.get(this.getKey("f.session."+a)):!1}incrementSessionCount(){this.incrementCount(this.getKey("f.session.count"))}getSessionTimestamp(){return Ja.get(this.getKey("f.session"))}generateSessionTimestamp(){return(new Date).toISOString()}incrementSessionPagesCount(){var a=
Ja.get(this.getKey("f.session.pages.count"));a=(a?Number.parseInt(a):0)+1;Ja.set(this.getKey("f.session.pages.count"),a)}getSessionPagesCount(){let a=Ja.get(this.getKey("f.session.pages.count"));return a?Number.parseInt(a):0}setUrlSearchParams(){Ja.set(this.getKey("f.session.url.search"),window.location.search)}getUrlSearchParams(){return Ja.get(this.getKey("f.session.url.search"))}destroy(){}}class Ri extends Gf{constructor(a){super(a);document.addEventListener("mousemove",this.handleInteraction.bind(this));
document.addEventListener("scroll",this.handleInteraction.bind(this));document.addEventListener("keydown",this.handleInteraction.bind(this));document.addEventListener("click",this.handleInteraction.bind(this));document.addEventListener("touchstart",this.handleInteraction.bind(this));this.startTime=new Date;this.lastInteraction=new Date}handleInteraction(){this.lastInteraction=new Date}incrementPageCount(){this.incrementCount(this.getKey("f.page.count"));this.startTime=new Date;this.lastInteraction=
new Date}getStats(){return{timeSpentOnPageMs:new Date-this.startTime,readPercent:Number.parseInt(100*(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight),unActiveMs:new Date-this.lastInteraction,lastViewIndex:this.getCount(this.getKey("f.page.count"))}}destroy(){document.removeEventListener("mousemove",this.handleInteraction.bind(this));document.removeEventListener("scroll",this.handleInteraction.bind(this));document.removeEventListener("keydown",this.handleInteraction.bind(this));
document.removeEventListener("click",this.handleInteraction.bind(this));document.removeEventListener("touchstart",this.handleInteraction.bind(this))}}class Zn{constructor(){n(this,"listeners",{"*":[]})}emit(a,b){a=this.listeners[a];Array.isArray(a)&&a.forEach(a=>a(b));this.listeners["*"].forEach(a=>a())}on(a,b){let c=0;this.listeners[a]&&this.listeners[a].length?(this.listeners[a].push(b),c=this.listeners[a].length-1):this.listeners[a]=[b];return{off:()=>{this.listeners[a].splice(c,1)}}}destroy(){}}
class wb extends Gf{constructor(a){super(a)}view(a){this.map(this.getKey(wb.storageKeys.VIEW)).put(a,(new Date).toISOString())}submit(a){this.map(this.getKey(wb.storageKeys.SUBMIT)).put(a,(new Date).toISOString())}close(a){this.map(this.getKey(wb.storageKeys.CLOSE)).incrementCount(a)}destroy(){}getStats(){var a=this.map(this.getKey(wb.storageKeys.VIEW)).value();let b=this.map(this.getKey(wb.storageKeys.SUBMIT)).value(),c=this.map(this.getKey(wb.storageKeys.CLOSE)).value(),d={};for(let b in a)d[b]=
d[b]?{...d[b],view:a[b]}:{view:a[b]};for(let c in b)d[c]=d[c]?{...d[c],submit:a[c]}:{submit:a[c]};for(let b in c)a=this.getCountFromValue(c[b]),d[b]=d[b]?{...d[b],close:a}:{close:a};return{formVariants:d}}}n(wb,"storageKeys",{VIEW:"f.fv.view",SUBMIT:"f.fv.submit",CLOSE:"f.fv.close"});class $n extends Zn{constructor(){super();let a=m.getPrefix().storagePrefix;this.siteStat=new Wn(a);this.sessionStat=new Yn(a);this.pageStat=new Ri(a);this.formVariantStat=new wb(a);this.performDetection();this.mouseOutHandler=
this.onMouseOut.bind(this);this.mouseOverHandler=this.onMouseOver.bind(this);document.addEventListener("mouseout",this.mouseOutHandler);document.addEventListener("mouseover",this.mouseOverHandler)}getStats(){return{...this.siteStat.getStats(),...this.sessionStat.getStats(),...this.pageStat.getStats(),...this.formVariantStat.getStats()}}performDetection(){let a=this.siteStat.isFirstTimeSeen(),b=this.sessionStat.isInCurrentSession();this.pageStat.incrementPageCount();this.sessionStat.incrementSessionPagesCount();
if(a||!b)this.sessionStat.startSession(),this.sessionStat.setUrlSearchParams()}onUrlChanged(){this.reInitPageStat();this.performDetection()}reInitPageStat(){this.pageStat.destroy();this.pageStat=new Ri(m.getPrefix().storagePrefix)}onMouseOut(a){null==a.toElement&&null==a.relatedTarget&&this.emit("mouseout")}onMouseOver(a){(a.toElement&&"HTML"===a.toElement.tagName||a.toElement===document.body)&&this.emit("mouseover")}destroy(){this.urlChangeSubscription.unsubscribe();this.pageStat.destroy();this.siteStat.destroy();
document.removeEventListener("mouseout",this.mouseOutHandler);document.removeEventListener("mouseover",this.mouseOverHandler)}}class Si{constructor(a){this.state=a||{}}getState(){return this.state}setState(a){this.state=Object.assign(Object.assign({},this.state),a)}destroy(){}}var ao=function(a){return{isValid:"boolean"===typeof a?a:a&&a.length,errorKey:"REQUIRED"}};class bo{constructor(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length?arguments[2]:void 0,d=3<
arguments.length?arguments[3]:void 0;this.control=a;this.customValidatorsMap=c;this.asyncCustomValidators=d;this.required=b.required;this.validator=b.validator}async isValid(a){return!(await this.getErrorKeys(a)).length}getErrorKeys(a){var b=[];let c=[],d=[];this.required&&(this.customValidatorsMap&&this.customValidatorsMap.REQUIRED?b.push(this.customValidatorsMap.REQUIRED):b.push(ao));if(!this.required&&!a)return Promise.resolve([]);this.validator&&this.customValidatorsMap&&"REQUIRED"!==this.validator&&
this.validator in this.customValidatorsMap&&b.push(this.customValidatorsMap[this.validator]);this.validator&&this.asyncCustomValidators&&this.validator in this.asyncCustomValidators&&c.push(this.asyncCustomValidators[this.validator]);b.length&&(b=b.map(b=>b(a)),b.forEach(a=>{null!==a.value&&void 0!==a.value&&this.control.setValue(a.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})}),d=b.filter(a=>!a.isValid).map(a=>a.errorKey));return c.length?Promise.all(c.map(b=>b(a))).then(a=>{a.forEach(a=>
{null!==a.value&&void 0!==a.value&&this.control.setValue(a.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})});a=a.filter(a=>!a.isValid).map(a=>a.errorKey);return[...d,...a]}):Promise.resolve(d)}}class co{static generate(){let a="",b;for(let c=0;32>c;c++){if(8===c||12===c||16===c||20===c)a+="-";b=Math.floor(16*Math.random()).toString(16).toUpperCase();a+=b}return a}}class Aa{constructor(){this.listeners=Aa.createDefaultListenersState()}emit(a,b){let c=this.listeners[a];c&&Object.values(c).forEach(c=>
c(b,a));Object.values(this.listeners["*"]).forEach(c=>c(b,a))}on(a,b){let c=co.generate(),d=this.listeners[a];d?d[c]=b:this.listeners[a]={[c]:b};return{off:()=>{delete this.listeners[a][c]}}}destroy(){this.listeners=Aa.createDefaultListenersState()}}Aa.createDefaultListenersState=()=>({"*":{}});class eo{constructor(a,b,c,d,e){this.name=a.name;this.value=(this.defaultValue=a.defaultValue)?a.defaultValue:void 0;this.validator=new bo(this,a.validation,c,d);this.errorKeys=this.valid=void 0;this.pending=
this.disabled=!1;this.debounceValue=a.hasOwnProperty("debounceValue")?a.debounceValue:300;this.tracking=e;this.elementRef=b;this.emitter=new Aa;let f=this.elementRef?this.elementRef.getAttribute("type"):null;this.elementRef&&a.defaultValue&&("checkbox"===f?this.elementRef.checked=a.defaultValue:this.elementRef.value=a.defaultValue);this.debouncedValidate=this.debounceValue?kj(a=>this.validate(a),this.debounceValue):this.validate.bind(this);this.elementRef&&this.elementRef.addEventListener(a.triggerEvent?
a.triggerEvent:"input",a=>this.inputElementValueChanged("checkbox"===f?a.target.checked:a.target.value))}inputElementValueChanged(a){this.tracking.send("FormStartFilling_[Name]");this.setValue(a)}setDisabled(){this.disabled=!0;this.elementRef&&this.elementRef.setAttribute("disabled","disabled")}setEnabled(){this.disabled=!1;this.elementRef&&this.elementRef.removeAttribute("disabled")}getName(){return this.name}getValue(){return this.value}setValue(){let a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{silent:!1,skipValidation:!1,skipElementUpdate:!1};this.value=a;this.elementRef&&!b.skipElementUpdate&&(this.elementRef.value=a);b.silent||this.emitter.emit("valueChanged",a);b.skipValidation||(this.emitter.emit("statusChanged","pending"),this.debouncedValidate(b))}isValid(){return this.validate()}isPending(){return this.pending}async validate(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{silent:!1};this.pending=
!0;let b=await this.validator.getErrorKeys(this.getValue());this.valid=!b.length;this.errorKeys=b;this.pending=!1;a.silent||this.emitter.emit("statusChanged",this.valid?"valid":"invalid");return this.valid}markAsTouched(){this.setValue(this.getValue())}getErrorKeys(){void 0===this.errorKeys&&this.validate();return Promise.resolve(this.errorKeys)}destroy(){this.elementRef&&this.elementRef.removeEventListener("change",this.inputElementValueChanged.bind(this));this.emitter.destroy()}}class fo{constructor(a){this.controls=
{};this.listeners=[];this.tracking=a;this.emitter=new Aa}registerControl(a,b,c,d){b=new eo(a,b,c,d,this.tracking);this.controls[a.name]=b;this.listeners.push(b.emitter.on("*",(a,b)=>{this.emitter.emit(b,a)}));return this.controls[a.name]}getControl(a){return this.controls[a]}hasControl(a){return!!this.getControl(a)}setControlValue(a,b){this.controls[a].setValue(b)}destroy(){this.listeners.forEach(a=>a.off());this.emitter.destroy()}isValid(){let a=Object.values(this.controls);return Promise.all(a.filter(a=>
!a.valid).map(a=>a.isValid())).then(a=>0===a.filter(a=>!a).length)}isPending(){let a=Object.values(this.controls),b=a.filter(a=>a.isPending());return a.length===b.length}getControlsMap(){return Object.values(this.controls).reduce((a,b)=>Object.assign(Object.assign({},a),{[b.getName()]:b.getValue()}),{})}getControlsAsArray(){return Object.values(this.controls)}setDisabledAll(){this.getControlsAsArray().forEach(a=>a.setDisabled())}setEnabledAll(){this.getControlsAsArray().forEach(a=>a.setEnabled())}}
class Hf{static extract(a){let b=a.views.map(a=>{const b=a.children.map(a=>"MODULE"===a.type?Object.assign(Object.assign({},a),Hf.moduleToContainerParams):a);return Object.assign(Object.assign({},a),{children:b})});return Object.assign(Object.assign({},a),{views:b})}static sort(a,b){return a.index>b.index?1:-1}static reIndex(a,b){return Object.assign(Object.assign({},a),{index:b+a.index})}}Hf.moduleToContainerParams={name:"SysContainerComponent",version:"1.0.0"};class ba{static removeNode(a,b){var c=
this.getParentPath(b);b=b[b.length-1];if(c=this.getNodeByPath(a,c))return a=c.children.splice(b,1)[0],a.path=null,ba.reIndex(c,c.path),a;c=a.splice(b,1)[0];c.path=null;a.forEach((a,b)=>{a.path=[b];ba.reIndex(a,a.path)});return c}static insertNode(a,b,c,d){var e=ba.getPathToInsert(b,d,c);b="INSIDE"===d?b:this.getParentPath(e);b=this.getNodeByPath(c,b);e=e[e.length-1];b?(b.children.splice(e,0,...[a]),ba.reIndex(b,b.path)):(c.splice(e,0,...[a]),c.forEach((a,b)=>{a.path=[b];ba.reIndex(a,a.path)}));return a}static iterateDepthFirst(a,
b){a.children&&a.children.forEach(a=>this.iterateDepthFirst(a,b));b(a)}static reIndex(a,b){a.path=b;a.children&&a.children.forEach((a,d)=>{a.path=b.concat(d);ba.reIndex(a,a.path)})}static getRelativePath(a){return a.slice(1,a.length)}static getParentPath(a){return a.slice(0,-1)}static getNodeByPath(a,b){for(let c=0;c<b.length;c++){if(c===b.length-1)return a[b[c]]||null;if(a[b[c]])a=a[b[c]].children;else return null}}static getNodeById(a,b){let c=null;for(let d=0;d<a.length;d++){let e=a[d];if(c)break;
if(e.id===b){c=e;break}else e.children&&e.children.length&&(c=this.getNodeById(e.children,b))}return c}static getPathToInsert(a,b,c){let d,e=a[a.length-1];"BEFORE"===b?d=a:"AFTER"===b?(d=a.slice(),d[a.length-1]=e+1):"INSIDE"===b&&(d=a.concat([ba.getNodeByPath(c,a).children.length]));return d}}class go extends Aa{constructor(a){super();this.json=a;this.flatJson=Hf.extract(this.json)}getModel(){return this.flatJson}getView(a){return this.flatJson.views[a]}getViews(){return this.flatJson.views}getShared(){return this.flatJson.shared}iterateViewModelAndExecute(a,
b){a=this.getView(a);ba.iterateDepthFirst(a,b)}destroy(){}afterConnectView(a){this.iterateViewModelAndExecute(a,a=>{a.componentRef&&a.componentRef.afterConnect()})}destroyView(a){this.iterateViewModelAndExecute(a,a=>{a.componentRef&&(a.componentRef.beforeDisconnect(),a.componentRef.disconnectHost(),a.componentRef=null)})}}class ho{constructor(a){this.config=Object.assign(Object.assign({},{subscribeContactUrl:""}),a||{})}getConfig(a){return a?this.config[a]:this.config}}class If extends Aa{constructor(a,
b){super();this.documentModel=a;this.mobileBreakpointWidth=this.documentModel.getShared().mobileBreakpointWidth;this._isMobile=this.getElementsWidthPx(b)<this.mobileBreakpointWidth;this.documentModel.on("MOBILE_BREAKPOINT_UPDATE",a=>{this.mobileBreakpointWidth=a;this._isMobile=this.getElementsWidthPx(b)<this.mobileBreakpointWidth});this.observer=new MutationObserver(a=>{a.some(a=>"style"===a.attributeName)&&this.listener(b)});this.observer.observe(b,{subtree:!1,childList:!1,attributes:!0})}isMobile(){return this._isMobile}getElementsWidthPx(a){return parseInt(getComputedStyle(a).width)}listener(a){this._isMobile=
this.getElementsWidthPx(a)<this.mobileBreakpointWidth;this.emit(If.changeEventName,this._isMobile)}destroy(){super.destroy();this.observer&&this.observer.disconnect()}}If.changeEventName="CHANGE";let ma={SYSTEM_CLASS_PREFIX:"cl-",SYSTEM_ATTRIBUTE_PREFIX:"cl-"};class Jf{static applyHostStyles(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length?arguments[3]:void 0;var e,f;if(null===(f=null===(e=null===c||void 0===c?void 0:c.props)||void 0===e?void 0:e.handlers)||
void 0===f?0:f.find(a=>"CLICK"===a.type))b.style.cursor="pointer";if("VIEW"===a||"CONTAINER"===a)b.style.display="CONTENT_LOCKER"===d&&"VIEW"===a?"flex":"inline-flex",b.style.position="relative";b.style.boxSizing="border-box"}constructor(){this.styles="/* common styles */ *, *:before, *:after { box-sizing: border-box; font-family: inherit; }"}setStyles(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.styles="".concat(this.styles," ").concat(a)}getStyles(){return this.styles}}
class io{static create(a,b){let c=document.createElement("div");c.setAttribute(E("type"),a.type);c.setAttribute(E("id"),a.id);c.setAttribute(E("component"),a.name);c.setAttribute(E("path"),a.path);c.setAttribute(E("element"),"host");Jf.applyHostStyles(a.type,c,a,b);c.attachShadow({mode:"open"});return c}}class ce{static sortActions(a){let b={CLOSE_WIDGET:-1,SHOW_WIDGET:1,SUBSCRIBE_CONTACT:2,REQUEST:3};return[...a].sort((a,d)=>(void 0!==b[a.type]?b[a.type]:0)>(void 0!==b[d.type]?b[d.type]:
0)?-1:(void 0!==b[a.type]?b[a.type]:0)<(void 0!==b[d.type]?b[d.type]:0)?1:0)}constructor(a,b){this.config=a;this.actions=ce.sortActions(b);this.targetElement=this.listener=null}activate(a,b,c){b=c();let d=b.getAttribute(E("id"));this.listener=b=>{let c=b.composedPath().filter(a=>a instanceof HTMLElement&&a.getAttribute(E("type"))),e=0;for(;c[e]&&c[e].getAttribute(E("id"))!==d;){let a=c[e].getAttribute(E("type"));if(ce.IGNORING_VIEW_ENTRY_TYPES.includes(a))return;e++}(async()=>{for(let c of this.actions)if(!await c.execute(a.getState(),
b))break})()};this.targetElement=this.config.relativeSelector?(b.shadowRoot||b).querySelector(this.config.relativeSelector):b;this.targetElement.addEventListener("click",this.listener)}destroy(){this.listener&&this.targetElement&&(this.targetElement.removeEventListener("click",this.listener),this.targetElement=void 0)}}ce.IGNORING_VIEW_ENTRY_TYPES=["BUTTON","CONSENT","INPUT"];class jo{constructor(a,b){this.config=a;this.actions=b;this.componentEmitterListener=null}activate(a,b,c){this.componentEmitterListener=
b.on(this.config.eventName,()=>{this.actions.forEach(b=>b.execute(a.getState(),this.config.params))})}destroy(){this.componentEmitterListener&&this.componentEmitterListener.off()}}class ko{constructor(a){this.actionFactory=a}get(a){switch(a.type){case "CLICK":return new ce(a,a.actions.map(a=>this.actionFactory.get(a)));case "COMPONENT_EVENT":return new jo(a,a.actions.map(a=>this.actionFactory.get(a)));default:throw Error("Not supported handler type ".concat(a.type));}}}class lo{constructor(a,b,c,
d,e,f){this.type="SUBSCRIBE_CONTACT";this.id=c.id;this.params=c.params;this.form=b;this.eventEmitter=a;this.httpClient=d;this.configService=e;this.formEventsListener=null;this.tracking=f}execute(){this.formEventsListener&&this.formEventsListener.off();return new Promise(a=>{this.form.isValid().then(b=>{if(b){let f=this.form.getControlsMap();if(f.email||f.phone){this.eventEmitter.emit("CONTACT_DATA_SUBMIT");this.tracking.send("FormFinish_[Name]");var c={};Object.keys(f).forEach(a=>{if(a.startsWith("clConsentId")){let b=
{value:f[a]};c.consents?c.consents[a]=b:c.consents={[a]:b}}else c[a]=f[a]});var d=this.configService.getConfig("widgetDebugMode");b={data:c,referrer:window.location.href};d&&(b.ignoreTracking=!0);d={};var e=this.configService.getConfig("clCustomerId");e&&Object.assign(d,{"cl-customer-id":e});this.httpClient.execute(this.configService.getConfig("subscribeContactUrl"),"POST",b,d).then(a=>a.json().then(b=>429===a.status?{state:"TOO_MANY_REQUESTS"}:{contactId:b.contactId,state:b&&b.next&&b.next.type}),
()=>({state:"ERROR"})).then(b=>{switch(b.state){case "SUCCESS":this.goToView(this.params.viewIndexOnSuccess);this.tracking.send("FormSuccessSubscribe_[Name]");break;case "ALREADY_SUBSCRIBED":this.goToView(this.params.viewIndexOnSubscribed);this.tracking.send("FormAlreadySubscribe_[Name]");break;case "ERROR":this.goToView(this.params.viewIndexOnError);this.tracking.send("FormErrorSubscribe_[Name]");break;case "TOO_MANY_REQUESTS":this.goToView(this.params.viewIndexOnError),this.tracking.send("RequestFormError_[Name]"),
this.eventEmitter.emit("TOO_MANY_REQUESTS")}b.contactId&&this.eventEmitter.emit("CONTACT_ID_WAS_RECEIVED",b.contactId);a("SUCCESS"===b.state||"ALREADY_SUBSCRIBED"===b.state)}).catch(()=>{this.goToView(this.params.viewIndexOnError);a(!1)})}else this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID"),this.formEventsListener=this.form.emitter.on("statusChanged",()=>{this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID")}),a(!1)}else this.eventEmitter.emit("INVALID_CONTACT_DATA_SUBMIT_ATTEMPT"),
a(!1)})})}goToView(a){this.eventEmitter.emit("GO_TO_VIEW",a)}}class mo{constructor(a,b,c,d,e,f){this.type="REQUEST";this.id=c.id;this.params=c.params;this.form=b;this.eventEmitter=a;this.httpClient=d;this.configService=e;this.tracking=f}execute(){return new Promise(a=>{this.form.isValid().then(b=>{if(b){let d=this.form.getControlsMap();this.eventEmitter.emit("CONTACT_DATA_SUBMIT");this.tracking.send("RequestFormFinish_[Name]");let e={};Object.keys(d).forEach(a=>{if(a.startsWith("clConsentId")){let b=
{value:d[a]};e.consents?e.consents[a]=b:e.consents={[a]:b}}else e[a]=d[a]});var c=this.configService.getConfig("widgetDebugMode");b={data:e,referrer:window.location.href};c&&(b.ignoreTracking=!0);c={};let f=this.configService.getConfig("clCustomerId");f&&Object.assign(c,{"cl-customer-id":f});this.httpClient.execute(this.configService.getConfig("subscribeContactUrl"),"POST",b,c).then(a=>a.json().then(b=>429===a.status?{state:"TOO_MANY_REQUESTS"}:{contactId:b.contactId,state:b&&b.next&&b.next.type}),
()=>({state:"ERROR"})).then(b=>{switch(b.state){case "SUCCESS":this.goToView(this.params.viewIndexOnSuccess);this.tracking.send("RequestFormSuccess_[Name]");break;case "ERROR":this.goToView(this.params.viewIndexOnError);this.tracking.send("RequestFormError_[Name]");break;case "TOO_MANY_REQUESTS":this.goToView(this.params.viewIndexOnError),this.tracking.send("RequestFormError_[Name]"),this.eventEmitter.emit("TOO_MANY_REQUESTS")}a("SUCCESS"===b.state)}).catch(()=>{this.goToView(this.params.viewIndexOnError);
a(!1)})}else this.eventEmitter.emit("INVALID_CONTACT_DATA_SUBMIT_ATTEMPT"),a(!1)})})}goToView(a){this.eventEmitter.emit("GO_TO_VIEW",a)}}class no{constructor(a,b){this.type="DISPATCH_EVENT";this.eventEmitter=a;this.config=b}execute(a){this.eventEmitter.emit(this.config.params.eventName,null);return Promise.resolve(!0)}}class oo{constructor(a){this.type="GO_TO_PREVIOUS_VIEW";this.eventEmitter=a}execute(){this.eventEmitter.emit(this.type);return Promise.resolve(!0)}}class po{constructor(a){this.type=
"GO_TO_NEXT_VIEW";this.eventEmitter=a}execute(){this.eventEmitter.emit(this.type);return Promise.resolve(!0)}}class Ti{static log(a){window.scriptLog09u8y9&&scriptLog09u8y9("ERROR","RUNTIME_ERROR",Error(a))}}class Kf{constructor(a){this.configService=a}track(a,b){if(!this.configService.getConfig("widgetDebugMode")){var c=this.configService.getConfig("formVariantId");if(c){a=+c.split("v")[1];let d=+c.split("v")[0].replace("f","");c=this.configService.getConfig("hostUrl")+"forms/v1/event";b=btoa(JSON.stringify({formId:d,
variantId:a,type:"click",referrer:window.location.href,params:b}));try{navigator.sendBeacon(c,b)}catch(e){Ti.log(e)}}}}}class qo extends Kf{constructor(a,b,c){super(c);this.type="GO_TO_VIEW";this.eventEmitter=a;this.config=b}execute(){this.eventEmitter.emit(this.type,this.config.params.viewIndex);this.config.params.trackClick&&this.track("GoToViewAction",this.config.params.trackClickParams);return Promise.resolve(!0)}}class ro{execute(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
null;var d=4<arguments.length?arguments[4]:void 0;d={method:b,headers:Object.assign({"Content-Type":"text/plain"},(3<arguments.length?arguments[3]:void 0)||{}),credentials:"same-origin",body:null,signal:d};c&&(d.body="string"===typeof c?c:JSON.stringify(c));return fetch(a,d)}}var de=new ro;class so{constructor(a,b){this.type="SHOW_WIDGET";this.params=b.params||{};this.eventEmitter=a}execute(){this.eventEmitter.emit(this.type,this.params);return Promise.resolve(!0)}}class Ya extends Kf{constructor(a,
b){super(b);this.type="OPEN_LINK";this.params=a.params;this.configService=b}execute(a,b){b.stopPropagation();this.track("OpenLinkAction",this.params.trackClickParams);b=this.params.link;a=this.configService.getConfig("utmTag");this.params.tagsEnabled&&(null===a||void 0===a?0:a.enabled)&&(b=Ya.getDynamicUtmParamsMap(this.configService),a=Ya.getUtmTags(a,b),b=Ya.appendQueryParamsToLink(this.params.link,a));window.open(b,this.params.target);return Promise.resolve(!0)}static appendQueryParamsToLink(a,
b){let c=new URL(a);Object.keys(b).forEach(a=>{c.searchParams.has(a)||c.searchParams.append(a,b[a])});return c.href}static getUtmTags(a,b){let c={},d=new Map([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmContent","utm_content"],["utmTerm","utm_term"]]);["utmSource","utmMedium","utmCampaign","utmContent","utmTerm"].filter(b=>void 0!==(null===a||void 0===a?void 0:a[b])).forEach(e=>{let f=d.get(e);e=b.has(a[e])?b.get(a[e]):encodeURIComponent(a[e]);c[f]=e});
(null===a||void 0===a?0:a.customTagsEnabled)&&Object.keys((null===a||void 0===a?void 0:a.utmCustomTags)||{}).filter(b=>{var c;return void 0!==(null===(c=null===a||void 0===a?void 0:a.utmCustomTags)||void 0===c?void 0:c[b])}).forEach(b=>c[b]=encodeURIComponent(a.utmCustomTags[b]));return c}static getDynamicUtmParamsMap(a){return new Map([["$widgetId",Ya.normalizeUtmParam(a.getConfig("widgetId"))],["$widgetName",encodeURIComponent(Ya.normalizeUtmParam(a.getConfig("widgetName")))],["$widgetType",Ya.normalizeUtmParam(a.getConfig("type"))],
["$widgetLang",Ya.normalizeUtmParam(a.getConfig("browserLanguage"))],["$contactId",encodeURIComponent(Ya.normalizeUtmParam(a.getConfig("clContactId")))]])}static normalizeUtmParam(a){return void 0===a||null===a?"":String(a)}}class to extends Kf{constructor(a,b,c){super(c);this.type="CLOSE_WIDGET";this.params=b.params;this.eventEmitter=a;this.configService=c}execute(){return new Promise(a=>{this.eventEmitter.emit(this.type,()=>{a(!0)});this.track("CloseWidgetAction",this.params.trackClickParams)})}}
class uo{constructor(a,b,c,d){this.eventEmitter=a;this.form=b;this.configService=c;this.tracking=d}get(a){switch(a.type){case "SUBSCRIBE_CONTACT":return new lo(this.eventEmitter,this.form,a,de,this.configService,this.tracking);case "REQUEST":return new mo(this.eventEmitter,this.form,a,de,this.configService,this.tracking);case "DISPATCH_EVENT":return new no(this.eventEmitter,a);case "GO_TO_VIEW":return new qo(this.eventEmitter,a,this.configService);case "GO_TO_PREVIOUS_VIEW":return new oo(this.eventEmitter);
case "GO_TO_NEXT_VIEW":return new po(this.eventEmitter);case "SHOW_WIDGET":return new so(this.eventEmitter,a);case "OPEN_LINK":return new Ya(a,this.configService);case "CLOSE_WIDGET":return new to(this.eventEmitter,a,this.configService);default:throw Error("Not supported action type ".concat(a.type));}}}class fd extends Aa{constructor(a){super();this.documentModel=a;this.mobileBreakpointWidth=this.documentModel.getShared().mobileBreakpointWidth;this.mediaQueryList=window.matchMedia("(max-width: ".concat(this.mobileBreakpointWidth,
"px)"));this.mediaQueryList.addListener(this.listener.bind(this));this._isMobile=this.mediaQueryList.matches;this.documentModel.on("MOBILE_BREAKPOINT_UPDATE",a=>{this.mobileBreakpointWidth=a;this.mediaQueryList.removeListener(this.listener.bind(this));this.mediaQueryList=window.matchMedia("(max-width: ".concat(this.mobileBreakpointWidth,"px)"));this.mediaQueryList.addListener(this.listener.bind(this));this._isMobile=this.mediaQueryList.matches;this.emit(fd.changeEventName,this._isMobile)})}isMobile(){return this._isMobile}listener(a){this._isMobile=
a.matches;this.emit(fd.changeEventName,this._isMobile)}destroy(){super.destroy();this.mediaQueryList.removeListener(this.listener.bind(this))}}fd.changeEventName="CHANGE";class gd{static set(a,b){a[gd.accumulatorPropertyName]=Object.assign(Object.assign({},a[gd.accumulatorPropertyName]||{}),b.styleAttributes);Object.keys(a[gd.accumulatorPropertyName]).forEach(c=>{c.includes("--")?a.style.setProperty(c,b.styleAttributes[c]||""):a.style[c]=b.styleAttributes[c]?b.styleAttributes[c]:""})}}gd.accumulatorPropertyName=
"clStyleAttributes";class vo{constructor(a,b,c,d,e,f){this.hostElement=b;this.documentModel=a;this.getSharedCb=c;this.getPropsCb=d;this.getEnvCb=e;this.httpClient=f;this.subscription=null;this.envUrlMaps={desktop:new Map,mobile:new Map}}apply(a){this.getPropsCb().backgroundDynamicInlineSVGElements[a].forEach(b=>{var c=this.getPropsCb().adaptiveStyles[a].find(a=>a.element===b);c=String(c.styleAttributes.background).split("(")[1].split(")");var d=bb(c,2);c=d[0];d=d[1];c=c.split('"').join("");this.envUrlMaps[a].set(b,
{originalSVGResourceURL:c,inlineSvgString:null,positionOptions:d.replace(";","")})});return Promise.all(Array.from(this.envUrlMaps[a].entries()).map(b=>{b=bb(b,2);let c=b[0],d=b[1];return this.httpClient.execute(d.originalSVGResourceURL).then(a=>a.text()).then(b=>{this.envUrlMaps[a].set(c,Object.assign(Object.assign({},d),{inlineSvgString:b}))})})).then(()=>{this.hostElement.style.background=this._buildBackgroundUrl(this.envUrlMaps[a].get("host"),this.getSharedCb().cssVars)}).catch(a=>{Ti.log("Failed to load/apply backgroundDynamicInlineSVGElements[".concat(this.getPropsCb().backgroundDynamicInlineSVGElements,
"] ").concat(a))})}subscribe(){this.subscription=this.documentModel.on("COLOR_SCHEMA_UPDATE",a=>{this.envUrlMaps[this.getEnvCb()].get("host")&&(this.hostElement.style.background=this._buildBackgroundUrl(this.envUrlMaps[this.getEnvCb()].get("host"),a))})}_buildBackgroundUrl(a,b){b=a.inlineSvgString.trim().replace("var(--cl-schema-accent)",b["cl-schema-accent"]);b=encodeURIComponent(b);return"url('data:image/svg+xml,".concat(b,"')").concat(a.positionOptions)}off(){var a;null===(a=this.subscription)||
void 0===a?void 0:a.off()}}class Ui{static camelCaseToDashCase(a){return a.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}static camelCaseToUpperSnakeCase(a){return a.replace(/[A-Z]/g,a=>"_"+a).toUpperCase()}}class wo{constructor(a,b,c,d,e,f,g,k,l,h){this.layoutType=h;this.lifeCycleHandlers={beforeConnect:[],afterConnect:[],beforeDisconnect:[]};this.hostElement=a;this.componentType=b.type;this.manifest=k;this.props=b.props;this.propsObserverCbs=[];this.sharedObserverCbs=[];this.environmentObserverCbs=
[];this.documentModel=e;this.resizeListener=f;this.state=new Si;this.emitter=new Aa;this._actionFactory=new uo(c,d,g,l);this._handlerFactory=new ko(this._actionFactory);this.lifeCycleHandlers.afterConnect=(b.props.handlers||[]).map(a=>this._handlerFactory.get(a)).map(a=>()=>a.activate(this.state,this.emitter,this.getHostElement.bind(this)));this.prevProps=b.props;this.prevEnvironment=this.getEnvironment();this.documentModel.on("".concat("COMPONENT_PROPS_UPDATE","_").concat(b.id),a=>{this.props=a;
this.propsObserverCbs.forEach(b=>b(this.prevProps,a));this.prevProps=a});this.documentModel.on("SHARED_UPDATE_ALL",()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles);this.sharedObserverCbs.forEach(a=>a(this.getShared()))});b.props.backgroundDynamicInlineSVGElements&&(this.colorSchemaListener=new vo(this.documentModel,this.getHostElement(),()=>this.getShared(),()=>this.props,()=>this.getEnvironment(),de),this.colorSchemaListener.apply(this.getEnvironment()).then(()=>{this.colorSchemaListener.subscribe()}));
this.prevProps.adaptiveStyles&&(this.subscription=this.resizeListener.on(fd.changeEventName,()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles);let a=this.getEnvironment();this.environmentObserverCbs.forEach(b=>b(this.prevEnvironment,a));this.prevEnvironment=a}))}destroy(){var a,b;this.propsObserverCbs=[];this.sharedObserverCbs=[];this.environmentObserverCbs=[];null===(a=this.subscription)||void 0===a?void 0:a.off();null===(b=this.colorSchemaListener)||void 0===b?void 0:b.off();this.state.destroy();
this.emitter.destroy()}getProps(){return this.props}getShared(){return this.documentModel.getShared()}getEnvironment(){return this.resizeListener.isMobile()?"mobile":"desktop"}runHandler(a){this.lifeCycleHandlers[a].forEach(a=>{a&&a()})}getRootElement(){return this.hostElement.shadowRoot?this.hostElement.shadowRoot:this.hostElement}getHostElement(){return this.hostElement}beforeConnect(a){this.lifeCycleHandlers.beforeConnect.push(a)}afterConnect(a){this.lifeCycleHandlers.afterConnect.push(a)}beforeDisconnect(a){this.lifeCycleHandlers.beforeDisconnect.push(a)}observeProps(a){this.propsObserverCbs.push(a);
a(null,this.prevProps)}observeShared(a){this.sharedObserverCbs.push(a);a(this.getShared())}observeEnvironment(a){this.environmentObserverCbs.push(a);a(null,this.getEnvironment())}getElements(){return[this.getHostElement(),...Array.from(this.getRootElement().querySelectorAll("[".concat(E("element"),"]"))).filter(a=>!a.hasAttribute(E("component")))]}getElement(a,b){return this.getElements().find(c=>b?c.getAttribute(E("element"))===a&&c.id===b:c.getAttribute(E("element"))===a)}applyAutoAdaptiveStyles(a){if(a){var b=
this.getElements();if(b.length){var c=E("type"),d=this.getRootElement().querySelector("style[".concat(c,'="').concat("element-styles",'"]'));d||(d=document.createElement("style"),d.setAttribute(c,"element-styles"),this.getRootElement().appendChild(d));d.innerHTML="";b.forEach(b=>{var c=b.getAttribute(E("element")),e=this.getEnvironment();if(e=this._getModelForEnv(a,e,c))this.resizeListener.isMobile()&&(c=this._getModelForEnv(a,"desktop",c))&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},
c.styleAttributes),e.styleAttributes)})),this.applyStylesToElement(b,this.applySharedClassesToElementModel(e),d)});this._addLinkColor(d,this.getShared())}}}applyStylesToElement(a,b,c){var d,e;let f=[];"host"===b.element&&(Jf.applyHostStyles(this.componentType,a,null,this.layoutType),"desktop"===this.getEnvironment()&&(null===(d=this.props.backgroundDynamicInlineSVGElements)||void 0===d?0:d.desktop)||"mobile"===this.getEnvironment()&&(null===(e=this.props.backgroundDynamicInlineSVGElements)||void 0===
e?0:e.mobile))&&(this.colorSchemaListener.apply(this.getEnvironment()),f.push("background"));d=Object.assign(Object.assign({},b),{styleAttributes:lj(b.styleAttributes,f)});gd.set(a,d);this._setClassAttributes(a,b);c&&(b.hoverStyleAttributes&&(d=b.hoverStyleAttributes,"FILL_UP"===b.hoverAnimationType&&(a.style.boxShadow="inset 0px 0px 0px 0px rgb(0, 0, 0, 0)",d=Object.assign(Object.assign({},b.hoverStyleAttributes),{background:b.styleAttributes.background,boxShadow:"inset 0px -".concat(a.getBoundingClientRect().height,
"px 0px 0px ").concat(d.background),transition:"0.3s"})),this._addStylesToStyleElement(c,b.element,d,":hover",!0)),b.placeholderStyleAttributes&&this._addStylesToStyleElement(c,b.element,b.placeholderStyleAttributes,"::placeholder"),this._addFontStylesToStyleElement(c,this.getShared()))}applySharedClassesToElementModel(a){let b=this.documentModel.getShared(),c=a;(c.classes||"").split(" ").filter(a=>a.startsWith(ma.SYSTEM_CLASS_PREFIX)).forEach(a=>{if(a=b.textClasses[a])a.styleAttributes.fontFamily||
(a.isHeader&&b.headerFontFamily&&(a=Object.assign(Object.assign({},a),{styleAttributes:Object.assign(Object.assign({},a.styleAttributes),{fontFamily:b.headerFontFamily})})),!a.isHeader&&b.textFontFamily&&(a=Object.assign(Object.assign({},a),{styleAttributes:Object.assign(Object.assign({},a.styleAttributes),{fontFamily:b.textFontFamily})}))),c=Object.assign(Object.assign({},c),{styleAttributes:Object.assign(Object.assign({},c.styleAttributes),a.styleAttributes),placeholderStyleAttributes:Object.assign(Object.assign({},
c.placeholderStyleAttributes),a.placeholderStyleAttributes)})});c.styleAttributes.fontFamily||(c=Object.assign(Object.assign({},c),{styleAttributes:Object.assign(Object.assign({},c.styleAttributes),{fontFamily:b.textFontFamily})}));return c}_getModelForEnv(a,b,c){return a[b].find(a=>a.element===c)}_addStylesToStyleElement(a,b,c){let d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",e=4<arguments.length?arguments[4]:void 0,f=Object.keys(c).reduce((a,b)=>a+" ".concat(Ui.camelCaseToDashCase(b),
": ").concat(c[b]).concat(e?" !important;":";"),"");a.innerHTML+="[".concat(E("element"),'="').concat(b,'"]').concat(d," { ").concat(f," }")}_addFontStylesToStyleElement(a,b){a.innerHTML+="[cl-type] {font-family:".concat(b.textFontFamily||"inherit","}")}_addLinkColor(a,b){b.linkColor&&(a.innerHTML+="a {color: ".concat(b.linkColor,"}, a:visited {color: ").concat(b.linkColor,"}"))}_setClassAttributes(a,b){Array.from(a.classList).filter(a=>a!==ma.SYSTEM_CLASS_PREFIX+"hovered"&&a!==ma.SYSTEM_CLASS_PREFIX+
"focused").forEach(b=>{b.startsWith(ma.SYSTEM_CLASS_PREFIX)&&a.classList.remove(b)});b=(a.getAttribute("class")||"")+" "+b.classes;a.setAttribute("class",b)}}class xo{nullishCoalescingOperator(a,b){return null!==a&&void 0!==a?a:b}setStylesToElement(a,b){Object.keys(b).forEach(c=>{a.style[c]=b[c]})}getStylesFromElement(a,b){let c=window.getComputedStyle(a);return b.reduce((a,b)=>{a[b]=c.getPropertyValue(b);return a},{})}getViewportWidth(){return Math.max(document.documentElement.clientWidth,window.innerWidth||
0)}getViewportHeight(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}getMenuOverlayContentClassName(){return ma.SYSTEM_CLASS_PREFIX+"overlay-menu-content"}createMenuOverlay(a){var b=a.triggerElement,c=a.overlayStyles;let d=a.createOverlayContent,e=a.overlayWidth,f=a.overlayHeight,g=a.offset,k=a.onDestroy,l=document.createElement("div"),h=document.createElement("div");l.style.position="fixed";
l.style.zIndex=String(Number.MAX_SAFE_INTEGER);l.style.top="0";l.style.left="0";l.style.width="100%";l.style.height="100%";h.style.position="absolute";a=h.attachShadow({mode:"open"});let m=document.createElement("style");m.innerHTML=c;c=document.createElement("div");c.classList.add(this.getMenuOverlayContentClassName());a.append(m,c);d(l,c);l.append(h);document.body.append(l);b=this._getOverlayMenuCoord(b,c,e,f,this.nullishCoalescingOperator(g,10));this.setStylesToElement(h,b);h.addEventListener("click",
a=>{a.stopPropagation();a.preventDefault()});l.addEventListener("click",()=>{l.remove();h.remove();k&&k()});return{backdrop:l,overlay:h}}applyLabelParams(a,b,c,d){d=c.querySelector(d);b=a.adaptiveStyles[b].find(a=>"label"===a.element).params;c=c.querySelector(".label");c.innerHTML=a.content.label;"TOP"===b.position?(d.style.flexDirection="column",d.style.alignItems="unset",this.setStylesToElement(c,{marginRight:0,marginBottom:"".concat(b.margin,"px")})):(d.style.flexDirection="row",d.style.alignItems=
"center",this.setStylesToElement(c,{marginRight:"".concat(b.margin,"px"),marginBottom:0}));c.style.display=b.enabled?"":"none"}getPlaceholderColor(a,b,c){a=a.adaptiveStyles[b].find(a=>"input"===a.element);if(a.placeholderStyleAttributes&&a.placeholderStyleAttributes.color)return a.placeholderStyleAttributes.color;a=(a.classes||"").split(" ").filter(a=>a.startsWith(ma.SYSTEM_CLASS_PREFIX));return a.length?(c=c.textClasses[a[0]])?c.placeholderStyleAttributes&&c.placeholderStyleAttributes.color?c.placeholderStyleAttributes.color:
"rgb(0, 0, 0)":"rgb(0, 0, 0)":"rgb(0, 0, 0)"}getClosestParentOutsideShadowRoot(a,b,c){var d;if(b){var e=b.closest(a);b!==e||c||(e=null);return e?e:this.getClosestParentOutsideShadowRoot(a,null===(d=null===b||void 0===b?void 0:b.getRootNode())||void 0===d?void 0:d.host,!0)}}setInputHostSize(a,b,c,d){a=a.adaptiveStyles[b].find(a=>"input"===a.element).styleAttributes;a.width&&(a.width.includes("100%")?(d.style.width="100%",c.style.width=a.width):c.style.width="auto");a.height&&(a.height.includes("100%")?
(d.style.height="100%",c.style.height=a.height):c.style.height="auto")}_getOverlayMenuCoord(a,b,c,d,e){return this._getOverlayMenuPosition(this._calcOverlayMenuPosition(a,b,c,d,e),a.getBoundingClientRect(),b.getBoundingClientRect())}_getOverlayMenuPosition(a,b,c){switch(a.position){case "top":return{width:"".concat(a.contentWidth,"px"),left:"".concat(b.x,"px"),top:"".concat(b.y-c.height-a.verticalOffset,"px")};case "bottom":return{width:"".concat(a.contentWidth,"px"),left:"".concat(b.x,"px"),top:"".concat(b.y+
b.height+a.verticalOffset,"px")};case "left":return{width:"".concat(a.contentWidth,"px"),left:"".concat(b.x-c.width-a.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(b,a),"px")};case "right":return{width:"".concat(a.contentWidth,"px"),left:"".concat(b.x+b.width+a.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(b,a),"px")}}}_getTopPositionLRForOverlayMenu(a,b){a=a.y+a.height;b.contentHeight>b.availableSpaceBelowTriggerElem&&(a-=b.contentHeight-b.availableSpaceBelowTriggerElem);
return a}_calcOverlayMenuPosition(a,b,c,d,e){c=this._getOverlayMenuHorizontalOffset(a,b,c,d);a=this._getOverlayMenuVerticalOffset(a,b,e);b="undefined";a.availableSpaceBelowTriggerElem>=a.contentHeight?b="bottom":a.availableSpaceAboveTriggerElem>=a.contentHeight?b="top":c.availableSpaceToTheRightSideOfTheTrigger>=c.contentWidth?b="right":c.availableSpaceToTheLeftSideOfTheTrigger>=c.contentWidth&&(b="left");return Object.assign(Object.assign(Object.assign({},a),c),{position:b})}_getOverlayMenuHorizontalOffset(a,
b,c,d){var e=this.getViewportWidth();let f=a.getBoundingClientRect();a=f.right;e=e-d-f.left-this.getScrollbarWidth();b=this._getOverlayMenuDimensions(b,c,d).width;return{horizontalOffset:d,contentWidth:b,availableSpaceToTheLeftSideOfTheTrigger:a-d,availableSpaceToTheRightSideOfTheTrigger:e}}_getOverlayMenuDimensions(a,b,c){a=a.getBoundingClientRect();let d=a.height;return{width:this.nullishCoalescingOperator(b,a.width),height:this.nullishCoalescingOperator(c,d)}}_getOverlayMenuVerticalOffset(a,b,
c){let d=this.getViewportHeight();var e=a.getBoundingClientRect();a=e.top;e=e.bottom;b=this._getOverlayMenuDimensions(b).height;return{verticalOffset:c,contentHeight:b,availableSpaceAboveTriggerElem:a-c,availableSpaceBelowTriggerElem:d-e-c}}}class yo{constructor(a,b,c,d,e,f,g,k,l,h,m){this.component=new wo(a,b,d,e,f,g,k,l,h,m);this.services={state:c,eventEmitter:d,form:e,config:k,tracking:h};this.utils=new xo}}class Vi{constructor(a,b,c,d){this.hostElement=a;this.sdk=b;this.componentModel=c;this.eventEmitter=
d}connectHost(a,b){switch(a){case "INSIDE":b.appendChild(this.hostElement);break;case "BEFORE":case "AFTER":b.insertAdjacentElement("BEFORE"===a?"beforebegin":"afterend",this.hostElement)}}disconnectHost(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this.hostElement.remove();a&&this.sdk.component.destroy()}beforeConnect(){this.sdk.component.runHandler("beforeConnect")}afterConnect(){this.sdk.component.runHandler("afterConnect")}beforeDisconnect(){this.sdk.component.runHandler("beforeDisconnect")}}
class Lf extends Vi{static isNodeElement(a){return a.nodeType===Node.ELEMENT_NODE&&"STYLE"!==a.nodeName}constructor(a,b,c,d,e){super(a,b,c,d);this.preHoveredElement=null;this.focusedElements=[];this.eventListeners=[];this.observer=this.draggableElement=this.lastDragOverEvent=null;this.focusableElements=e||[];this._observeChanges()}beforeConnect(){this.sdk.component.runHandler("beforeConnect");"VIEW"===this.componentModel.type&&(this.eventListeners.push({eventName:"mousemove",callback:this._mouseMoveEventListener.bind(this),
element:this.hostElement}),this.eventListeners.push({eventName:"mouseout",callback:this._mouseOutEventListener.bind(this),element:this.hostElement}));this.removeFocusSubscription=this.eventEmitter.on("REMOVE_FOCUS",()=>{this._removeFocus()});this.setFocusSubscription=this.eventEmitter.on("SET_FOCUS",a=>{this._removeFocus();this.componentModel.id===a&&this._setFocus("host")});this.componentFocusedSubscription=this.eventEmitter.on("COMPONENT_FOCUSED",a=>{let b=a.id;a=a.targetElementName;this._removeFocus();
this.componentModel.id===b&&this._setFocus(a)});this.sdk.component.getHostElement().setAttribute("draggable","true");this._setElementListeners(this.sdk.component.getHostElement());this._setGlobalListeners();this._setEventListeners();this._activateEventListeners();this._setFocusableElementsAttribute()}afterConnect(){this.sdk.component.runHandler("afterConnect")}beforeDisconnect(){this.sdk.component.runHandler("beforeDisconnect");this._deactivateEventListeners();this.removeFocusSubscription.off();this.setFocusSubscription.off();
this.componentFocusedSubscription.off();this.observer.disconnect()}_observeChanges(){let a={addded:!1,removed:!1},b=((a,b)=>{let c;return function(){const d=this,e=arguments;clearTimeout(c);c=setTimeout(()=>a.apply(d,e),b)}})(()=>{a.removed&&this._removeListenersForDisconnectedNodes();a.addded&&(this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute(),this._updateFocusedElementClasses());a={addded:!1,removed:!1}},500);this.observer=new MutationObserver(function(c){for(let d of c){for(let b of d.addedNodes)b instanceof
HTMLElement&&"STYLE"!==b.nodeName&&!a.addded&&(a=Object.assign(Object.assign({},a),{addded:!0}));for(let b of d.removedNodes)b instanceof HTMLElement&&"STYLE"!==b.nodeName&&!a.removed&&(a=Object.assign(Object.assign({},a),{removed:!0}));b()}});this.observer.observe(this.hostElement.shadowRoot,Lf.observerConfig)}_setEventListeners(){this.sdk.component.getRootElement().querySelectorAll("[cl-inline-edit], [cl-inline-edit] *").forEach(a=>{this._isEventListenerPresent(a)||(a.getAttribute("draggable")||
a.setAttribute("draggable","true"),this._setElementListeners(a,!0))});this.sdk.component.getRootElement().querySelectorAll(":not([cl-inline-edit]):not([cl-type]):not([cl-inline-edit] *)").forEach(a=>{if(!this._isEventListenerPresent(a)){a.getAttribute("draggable")||a.setAttribute("draggable","true");if(a instanceof HTMLElement){let b=a.tagName.toLowerCase();"input"!==b&&"textarea"!==b||"readonly"===!a.getAttribute("readonly")||a.setAttribute("readonly","readonly");"VIDEO"===this.sdk.component.manifest.componentType&&
a.classList.contains("video-overlay")&&(a.style.visibility="visible")}this._setElementListeners(a)}})}_removeListenersForDisconnectedNodes(){this.eventListeners=this.eventListeners.filter(a=>{a.element.isConnected||a.element.removeEventListener(a.eventName,a.callback);return a.element.isConnected})}_setGlobalListeners(){this.eventListeners.push({eventName:"drop",callback:a=>this._documentDropListener(a),element:document})}_isEventListenerPresent(a){return!!this.eventListeners.find(b=>b.element===
a)}_setElementListeners(a,b){[{eventName:"click",callback:a=>this._elementClickListener(a,b),element:a},{eventName:"dblclick",callback:this._elementDoubleClickListener.bind(this),element:a},{eventName:"dragstart",callback:this._elementDragStartListener.bind(this),element:a},{eventName:"dragend",callback:this._elementDragEndListener.bind(this),element:a},{eventName:"dragover",callback:this._elementDragOverListener.bind(this),element:a}].forEach(a=>this.eventListeners.push(a))}_elementClickListener(a,
b){a.preventDefault();a.stopImmediatePropagation();a=a.composedPath()[0];b&&this.eventEmitter.emit("SHOW_INLINE_EDIT",{id:this.componentModel.id,hostElement:this.sdk.component.getHostElement(),targetElement:a});this.eventEmitter.emit("COMPONENT_FOCUSED",{id:this.componentModel.id,hostElement:this.sdk.component.getHostElement(),targetElement:a,targetElementName:this._getElementNameByNode(a)})}_elementDoubleClickListener(a){a.preventDefault();a.stopImmediatePropagation();this.eventEmitter.emit("COMPONENT_DOUBLE_CLICKED",
{id:this.componentModel.id,hostElement:this.sdk.component.getHostElement(),targetElement:a.composedPath()[0]})}_elementDragStartListener(a){var b;a.stopPropagation();let c=a.composedPath().find(a=>{var b;return null===(b=a.hasAttribute)||void 0===b?void 0:b.call(a,E("type"))}),d=c.getAttribute(E("type"));if("VIEW"===d)a.preventDefault();else{var e=c.getBoundingClientRect();null===(b=this.draggableElement)||void 0===b?void 0:b.remove();this.draggableElement=this._deepElementClone(c,!0);this.draggableElement.style.position=
"absolute";this.draggableElement.style.top="-100000px";this.draggableElement.style.left="-100000px";document.body.appendChild(this.draggableElement);"FLOATING_IMAGE"!==d&&a.dataTransfer.setDragImage(this.draggableElement,a.pageX-e.left,a.pageY-e.top);this.eventEmitter.emit("COMPONENT_DRAGSTART",{id:this.componentModel.id,path:this.componentModel.path,hostElement:this.sdk.component.getHostElement(),targetElement:a.composedPath()[0],event:a})}}_elementDragEndListener(a){var b;a.stopPropagation();null===
(b=this.draggableElement)||void 0===b?void 0:b.remove();this.eventEmitter.emit("COMPONENT_DRAGEND",{id:this.componentModel.id,path:this.componentModel.path,hostElement:this.sdk.component.getHostElement(),targetElement:a.composedPath()[0],event:a})}_elementDragOverListener(a){a.preventDefault();a.stopPropagation();let b=this.lastDragOverEvent;this.lastDragOverEvent=a;a.pageX&&a.pageY&&(b&&b.clientY===a.clientY&&b.clientX===a.clientX||this.eventEmitter.emit("COMPONENT_DRAGOVER",{id:this.componentModel.id,
hostElement:this.sdk.component.getHostElement(),targetElement:a.composedPath()[0],event:a}))}_documentDropListener(a){this.eventEmitter.emit("DOCUMENT_DROP",{id:this.componentModel.id,hostElement:this.sdk.component.getHostElement(),targetElement:a.composedPath()[0],event:a})}_mouseMoveEventListener(a){let b=this._findClosestHostElement(a.composedPath());this.preHoveredElement&&this.preHoveredElement!==b&&this.preHoveredElement.classList.remove(ma.SYSTEM_CLASS_PREFIX+"hovered");if(this.preHoveredElement=
b)b.classList.add(ma.SYSTEM_CLASS_PREFIX+"hovered"),a={id:b.getAttribute(E("id")),hostElement:b,targetElement:a.composedPath()[0],event:a},this.eventEmitter.emit("COMPONENT_MOUSE_MOVE",a)}_mouseOutEventListener(a){a.stopPropagation();(a=this._findClosestHostElement(a.composedPath()))&&a.classList.remove(ma.SYSTEM_CLASS_PREFIX+"hovered")}_removeFocus(){this.focusedElements.length&&this.focusedElements.forEach(a=>a.classList.remove(ma.SYSTEM_CLASS_PREFIX+"focused"));this.focusedElements=[]}_setFocus(a){var b=
this.sdk.component.getHostElement();this.focusedElements=[b];b.classList.add(ma.SYSTEM_CLASS_PREFIX+"focused");"host"!==a&&(b=this.sdk.component.getElements().filter(b=>b.getAttribute(E("element"))===a),b.forEach(a=>a.classList.add(ma.SYSTEM_CLASS_PREFIX+"focused")),this.focusedElements=this.focusedElements.concat(b))}_findClosestHostElement(a){a=a.filter(a=>a instanceof HTMLElement).filter(a=>!!a.getAttribute(E("component")));return a.length?a[0]:null}_activateEventListeners(){this.eventListeners.forEach(a=>
{a.activated||(a.element.addEventListener(a.eventName,a.callback),a.activated=!0)})}_deactivateEventListeners(){this.eventListeners.forEach(a=>{a.element.removeEventListener(a.eventName,a.callback)});this.eventListeners=[]}_deepElementClone(a,b){let c=(a,d)=>{const e=a.cloneNode();b&&a instanceof Element&&this._copyNodeStyles(a,e);d.appendChild(e);if(a.shadowRoot){d=a.shadowRoot.firstChild;for(var f=e.attachShadow({mode:"open"});d;)c(d,f),d=d.nextSibling}for(a=a.firstChild;a;)c(a,e),a=a.nextSibling},
d=document.createDocumentFragment();c(a,d);return d.children[0]}_copyNodeStyles(a,b){let c=getComputedStyle(a);Array.from(c).forEach(a=>b.style.setProperty(a,c.getPropertyValue(a),c.getPropertyPriority(a)))}_getElementNameByNode(a){if(!a)return"host";a=a.closest("[".concat(E("element"),"]"));if(!a)return"host";a=a.getAttribute(E("element"));return"host"===a||this.focusableElements.includes(a)?a:"host"}_setFocusableElementsAttribute(){this.sdk.component.getElements().forEach(a=>{this.focusableElements.includes(a.getAttribute(E("element")))&&
a.setAttribute(E("focusable-element"),"")})}_updateFocusedElementClasses(){if(!(2>this.focusedElements.length)){var a=this.focusedElements.find(a=>a.hasAttribute(E("focusable-element")));this._setFocus(a.getAttribute(E("element")))}}}Lf.observerConfig={childList:!0,subtree:!0};class Ba{static getDefaultParamValueByAnimationType(a,b){return this["CL_DEFAULT_LOOP_ANIMATION_".concat(a,"_").concat(Ui.camelCaseToUpperSnakeCase(b))]}static getAllAnimationStyles(a){let b=Object.values(this._animations).map(a=>
a.styles).join("\n");a&&(b=b.replace(new RegExp(".".concat(this.animationClassPrefix),"g"),"".concat(a," .").concat(this.animationClassPrefix)));return b}static constructAnimationStylesByTypes(a){return Object.keys(this._animations).filter(b=>a.includes(b)).map(a=>this._animations[a].styles).join("")}}var Za=Ba;Ba.animationClassPrefix="cl-loop-animation-";Ba.CL_DEFAULT_LOOP_ANIMATION_PULSE_BORDER_RADIUS="50px";Ba.CL_DEFAULT_LOOP_ANIMATION_PULSE_COLOR="rgba(0,0,0,0.7)";Ba._animations={PULSE:{styles:"\n        .".concat(Za.animationClassPrefix,
"PULSE {\n          animation: pulse-animation 2s infinite;\n          border-radius: var(--cl-PULSE-borderRadius);\n        }\n      \n        @keyframes pulse-animation {\n          0% {\n            box-shadow: 0 0 0 0 var(--cl-PULSE-color);\n          }\n      \n          70% {\n            box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);\n          }\n      \n          100% {\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n          }\n        }")},VIBRATE:{styles:"\n        .".concat(Za.animationClassPrefix,
"VIBRATE {\n          animation: vibrate-animation 10.3s linear infinite both;\n        }\n        \n        @keyframes vibrate-animation {\n          0% {\n            transform: translate(0);\n          }\n          2% {\n            transform: translate(-2px, 2px);\n          }\n          4% {\n            transform: translate(-2px, -2px);\n          }\n          6% {\n            transform: translate(2px, 2px);\n          }\n          8% {\n            transform: translate(2px, -2px);\n          }\n          10% {\n            transform: translate(0);\n          }\n          12% {\n            transform: translate(-2px, 2px);\n          }\n          14% {\n            transform: translate(-2px, -2px);\n          }\n          16% {\n            transform: translate(2px, 2px);\n          }\n          18% {\n            transform: translate(2px, -2px);\n          }\n          20% {\n            transform: translate(0);\n          }\n          100% {\n            transform: translate(0);\n          }\n        }")},
WOBBLE:{styles:"\n        .".concat(Za.animationClassPrefix,"WOBBLE {\n          animation: wobble-animation 10.8s infinite both;\n        }\n      \n        @keyframes wobble-animation {\n          0%,\n          100% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n          1.5% {\n            transform: translateX(-30px) rotate(-6deg);\n          }\n          3% {\n            transform: translateX(15px) rotate(6deg);\n          }\n          4.5% {\n            transform: translateX(-15px) rotate(-3.6deg);\n          }\n          6% {\n            transform: translateX(9px) rotate(2.4deg);\n          }\n          7.5% {\n            transform: translateX(-6px) rotate(-1.2deg);\n          }\n          10% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n        }")},
SHAKE:{styles:"\n        .".concat(Za.animationClassPrefix,"SHAKE {\n          animation: shake-animation 10.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) infinite both;\n        }\n      \n        @keyframes shake-animation {\n          0%,\n          100% {\n            transform: translateX(0);\n          }\n          1%,\n          3%,\n          5%,\n          7% {\n            transform: translateX(-10px);\n          }\n          2%,\n          4%,\n          6% {\n            transform: translateX(10px);\n          }\n          8% {\n            transform: translateX(8px);\n          }\n          9% {\n            transform: translateX(-8px);\n          }\n          10% {\n            transform: translateX(0);\n          }\n        }")},
JELLO:{styles:"\n        .".concat(Za.animationClassPrefix,"JELLO {\n          animation: jello-animation 10.9s infinite both;\n        }\n      \n        @keyframes jello-animation {\n          0% {\n            transform: scale3d(1, 1, 1);\n          }\n          3% {\n            transform: scale3d(1.25, 0.75, 1);\n          }\n          4% {\n            transform: scale3d(0.75, 1.25, 1);\n          }\n          5% {\n            transform: scale3d(1.15, 0.85, 1);\n          }\n          6.5% {\n            transform: scale3d(0.95, 1.05, 1);\n          }\n          7.5% {\n            transform: scale3d(1.05, 0.95, 1);\n          }\n          10% {\n            transform: scale3d(1, 1, 1);\n          }\n          100% {\n            transform: scale3d(1, 1, 1);\n          }\n        }")},
BOUNCE:{styles:"\n        .".concat(Za.animationClassPrefix,"BOUNCE {\n          animation: bounce-animation 10.9s infinite both;\n        }\n      \n        @keyframes bounce-animation {\n          0% {\n            transform: translateY(-45px);\n            animation-timing-function: ease-in;\n            opacity: 1;\n          }\n          2.4% {\n            opacity: 1;\n          }\n          4% {\n            transform: translateY(-24px);\n            animation-timing-function: ease-in;\n          }\n          6.5% {\n            transform: translateY(-12px);\n            animation-timing-function: ease-in;\n          }\n          8.2% {\n            transform: translateY(-6px);\n            animation-timing-function: ease-in;\n          }\n          9.3% {\n            transform: translateY(-4px);\n            animation-timing-function: ease-in;\n          }\n          2.5%,\n          5.5%,\n          7.5%,\n          8.7% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n          }\n          10% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n          100% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n        }")},
BLINK:{styles:"\n        .".concat(Za.animationClassPrefix,"BLINK {\n          animation: blink-animation 10.6s infinite both;\n        }\n      \n        @keyframes blink-animation {\n          0%,\n          5%,\n          10%,\n          100% {\n            opacity: 1;\n          }\n          2.5%,\n          7.5% {\n            opacity: 0;\n          }\n        }")},FLICKER:{styles:"\n        .".concat(Za.animationClassPrefix,"FLICKER {\n          animation: flicker-animation 12.5s linear infinite both;\n        }\n      \n        @keyframes flicker-animation {\n          0%,\n          100% {\n            opacity: 1;\n          }\n          3.298% {\n            opacity: 1;\n          }\n          3.3% {\n            opacity: 0;\n          }\n          3.4% {\n            opacity: 0;\n          }\n          3.402% {\n            opacity: 1;\n          }\n          3.498% {\n            opacity: 1;\n          }\n          3.5% {\n            opacity: 0;\n          }\n          3.59% {\n            opacity: 0;\n          }\n          3.592% {\n            opacity: 1;\n          }\n          3.898% {\n            opacity: 1;\n          }\n          3.9% {\n            opacity: 0;\n          }\n          3.98% {\n            opacity: 0;\n          }\n          3.982% {\n            opacity: 1;\n          }\n          8.398% {\n            opacity: 1;\n          }\n          8.4% {\n            opacity: 0;\n          }\n          8.49% {\n            opacity: 0;\n          }\n          8.492% {\n            opacity: 1;\n          }\n          84.92% {\n            opacity: 1;\n          }\n        }")},
PING:{styles:"\n        .".concat(Za.animationClassPrefix,"PING {\n          animation: ping-animation 10.8s ease-in-out infinite both;\n        }\n      \n        @keyframes ping-animation {\n          0%,\n          16% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          8% {\n            transform: scale(2.2);\n            opacity: 0;\n          }\n        }")}};class zo{static extractAdaptiveStylesClasses(a){let b="";if(!a.props.adaptiveStyles)return[];a.props.adaptiveStyles.desktop.forEach(a=>
b+=" ".concat(a.classes));a.props.adaptiveStyles.mobile.forEach(a=>b+=" ".concat(a.classes));return b.split(" ")}static extractLoopAnimationsFromAdaptiveStylesClasses(a){return this.extractAdaptiveStylesClasses(a).filter(a=>a.startsWith(Ba.animationClassPrefix)).map(a=>a.replace(Ba.animationClassPrefix,""))}}class Ao{constructor(a,b,c,d,e,f,g,k,l,h){this.state=a;this.eventEmitter=b;this.form=c;this.documentModel=d;this.resizeListener=e;this.componentResolver=f;this.config=g;this.commonStylesService=
k;this.trackingService=l;this.layoutType=h}create(a,b){var c=this.componentResolver.getRegistrationKey(a.name,a.version);let d=this.resolveComponentStructures(c),e=io.create(a,this.layoutType);"UPDATING"===b&&this.commonStylesService.setStyles("* {cursor:pointer !important;} *:focus {outline: none !important;}");this.processTemplate(e,a,d.html);this.processStyles(e,a,d.css,b);c=this.processJavaScript(e,a,d,c);a=this.createComponentRef(b,e,c,a,this.eventEmitter,d.manifest.focusableElements);a.beforeConnect();
return a}createComponentRef(a,b,c,d,e,f){switch(a){case "STATIC":return new Vi(b,c,d,e);case "UPDATING":return new Lf(b,c,d,e,f)}}resolveComponentStructures(a){let b=this.componentResolver.resolve(a);if(!b)throw Error("Component not found: "+a);return b}processTemplate(a,b,c){a.shadowRoot.innerHTML=c}processStyles(a,b,c,d){let e=this.commonStylesService.getStyles(),f=document.createElement("style");this.constructAnimationStyles(a,b,d);f.textContent=e;c&&c.length&&(f.textContent+="\n /* ".concat(b.name,
" */ \n ").concat(c,"\n"));a.shadowRoot.appendChild(f)}constructAnimationStyles(a,b,c){"UPDATING"!==c&&(b=Ba.constructAnimationStylesByTypes(zo.extractLoopAnimationsFromAdaptiveStylesClasses(b)))&&(c=document.createElement("style"),c.textContent=b,a.shadowRoot.appendChild(c))}processJavaScript(a,b,c,d){let e=c.js;c=c.manifest;d="// ".concat(b.name," \n ").concat(e," \n//# sourceURL=").concat(d,'.js";\n');d=new Function("sdk",d);a=new yo(a,b,this.state,this.eventEmitter,this.form,this.documentModel,
this.resizeListener,this.config,c,this.trackingService,this.layoutType);d(a);return a}}class Bo{constructor(a,b,c){this.documentModel=a;this.componentFactory=b;this.viewRenderer=c}handleModelUpdate(a,b){switch(a){case "COMPONENT_PROPS_UPDATE":a=b.id;b=b.data;var c=ba.getNodeById(this.documentModel.flatJson.views,a).path.reduce((a,b,c)=>0===c?this.documentModel.getViews()[b]:a.children[b],this.documentModel.getViews());if(!c)break;c.props=Object.assign({},b);this.documentModel.emit("".concat("COMPONENT_PROPS_UPDATE",
"_").concat(a),b);break;case "MOBILE_BREAKPOINT_UPDATE":this.documentModel.getShared().mobileBreakpointWidth=b;this.documentModel.emit("MOBILE_BREAKPOINT_UPDATE",b);break;case "TEXT_CLASS_ADDED":this.documentModel.getShared().textClasses[b.id]=b;break;case "TEXT_CLASS_UPDATED":this.documentModel.getShared().textClasses[b.id]=b;this.documentModel.emit("SHARED_UPDATE_ALL");break;case "TEXT_CLASS_REMOVED":delete this.documentModel.getShared().textClasses[b];break;case "HEADER_FONT_FAMILY_UPDATE":this.documentModel.getShared().headerFontFamily=
b;this.documentModel.emit("SHARED_UPDATE_ALL");break;case "TEXT_FONT_FAMILY_UPDATE":this.documentModel.getShared().textFontFamily=b;this.documentModel.emit("SHARED_UPDATE_ALL");break;case "COLOR_SCHEMA_UPDATE":this.documentModel.getShared().cssVars=b;this.documentModel.emit("COLOR_SCHEMA_UPDATE",b);break;case "LINK_COLOR_UPDATE":this.documentModel.getShared().linkColor=b;this.documentModel.emit("SHARED_UPDATE_ALL");break;case "COMPONENT_REMOVE":this.removeComponent(b.path);break;case "COMPONENT_INSERT":{a=
b.insertPosition;c=b.targetPath;var d=b.model;b=ba.getNodeByPath(this.documentModel.flatJson.views,c);let e=this.componentFactory.create(d,"UPDATING");d=Object.assign(Object.assign({},d),{componentRef:e});this.insertComponent(a,c,d,this.documentModel.flatJson.views,b);d.componentRef.afterConnect();d.children&&d.children.forEach(a=>this.viewRenderer.renderComponent(e.hostElement,a,"UPDATING",!0));break}case "COMPONENT_MOVE":c=b.fromPath,a=b.insertPosition,d=b.targetPath,b=this.documentModel.flatJson.views[d[0]],
d=ba.getNodeByPath(this.documentModel.flatJson.views,d),c=this.removeComponent(c,!1),b=ba.getNodeById([b],d.id).path,this.insertComponent(a,b,c,this.documentModel.flatJson.views,d)}}removeComponent(a){let b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,c=ba.getNodeByPath(this.documentModel.flatJson.views,a);if(c)return b&&c.componentRef.beforeDisconnect(),c.componentRef.disconnectHost(b),ba.removeNode(this.documentModel.flatJson.views,a)}insertComponent(a,b,c,d,e){"INSIDE"===a?c.componentRef.connectHost(a,
e.componentRef.hostElement.shadowRoot):c.componentRef.connectHost(a,e.componentRef.hostElement);ba.insertNode(c,b,d,a)}}class Wi{constructor(a,b,c,d){this.isMobile=null;this.resizeListener=b;this.documentModel=a;this.componentFactory=d;this.destroy=this.destroy.bind(this)}render(a,b,c){b=this.componentFactory.create(a,c);let d=b.hostElement;a.componentRef=b;a.children.forEach(a=>{this.renderComponent(d,a,c)});return b}destroy(a){a.componentModel.path&&this.documentModel.destroyView(a.componentModel.path[0])}renderComponent(a,
b,c,d){let e=this.componentFactory.create(b,c);b.componentRef=e;e.connectHost("INSIDE",a.shadowRoot);d&&e.afterConnect();b.children&&b.children.forEach(a=>this.renderComponent(e.hostElement,a,c,d))}}class Co extends Wi{render(a,b){return super.render(a,b,"UPDATING")}}class Do extends Wi{render(a,b){return super.render(a,b,"STATIC")}}class Eo{constructor(a,b,c,d,e,f,g){a=new go(a);let k=e?new If(a,e):new fd(a),l=new Si,h=new fo(d),m=new Aa,n=new ho(b),q=new Jf;q.setStyles(f);f=new Ao(l,m,h,a,k,c,n,
q,d,g);b=e?new Co(a,k,b,f):new Do(a,k,b,f);this.services={documentService:new Bo(a,f,b),componentResolver:c,documentModel:a,state:l,form:h,eventEmitter:m,config:n,resizeListener:k,componentFactory:f,viewRenderer:b,commonStylesService:q,tracking:d}}destroy(){Object.keys(this.services).filter(a=>"viewRenderer"!==a).forEach(a=>this.services[a]&&this.services[a].destroy&&this.services[a].destroy())}}class Mf{static get(a,b){return b.style.getPropertyValue("--".concat(a))}static apply(){let a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length?arguments[1]:void 0;$f(a,c=>{let d="--".concat(c);c=a[c];b.style.getPropertyValue(d)||b.style.setProperty(d,c)})}static override(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length?arguments[1]:void 0;$f(a,c=>{let d="--".concat(c);b.style.setProperty(d,a[c])})}}class Fo{constructor(a,b,c,d){this.eventEmitter=a;this.documentModel=b;this.viewRenderer=c;this.optionalDocumentStyles=d;this.currentViewComponentRef=
this.currentViewIndex=null;this.eventEmitter.on("TOO_MANY_REQUESTS",()=>{this.viewDestroy();this.documentContainer.innerText="Too many requests"})}_getCurrentViewIndex(){return this.currentViewIndex}start(){this.documentContainer=window.document.createElement("div");this.documentContainer.setAttribute("cl-document","");this.optionalDocumentStyles&&Object.keys(this.optionalDocumentStyles).forEach(a=>{this.documentContainer.style[a]=this.optionalDocumentStyles[a]});this.navigate(0);this.eventEmitter.on("GO_TO_VIEW",
a=>{this.navigate(a)});this.eventEmitter.on("GO_TO_PREVIOUS_VIEW",()=>{0<this._getCurrentViewIndex()&&this.navigate(this._getCurrentViewIndex()-1)});this.eventEmitter.on("GO_TO_NEXT_VIEW",()=>{this.documentModel.getModel().views[this._getCurrentViewIndex()+1]&&this.navigate(this._getCurrentViewIndex()+1)});return this.documentContainer}destroy(){this.viewDestroy();this.documentContainer&&this.documentContainer.remove()}navigate(a){var b=this.documentModel.getView(a);if(this.currentViewIndex!==a){if(!b)throw Error("View was not found by index: "+
a);b=this.viewRenderer.render(b,a,this.documentModel.getModel().shared);this.viewDestroy();this.documentContainer.appendChild(b.hostElement);setTimeout(()=>{this.documentModel.afterConnectView(this.currentViewIndex)});this.currentViewComponentRef=b;this.currentViewIndex=a}}viewDestroy(){this.currentViewComponentRef&&this.viewRenderer.destroy(this.currentViewComponentRef)}getDocumentContainer(){return this.documentContainer}}class Vb{static getValueByPropPath(a,b){let c=a||{};b.forEach(a=>{c=null===
c||void 0===c?void 0:c[a]});return c}static transformPropPathStringToArray(a){return a.split(",")}static constructDynamicPropPath(a,b){let c=[];if(a.filter(a=>a.includes("[id]")).length)a.forEach(a=>{var d=a.split(",[id");d=Vb.getValueByPropPath(b.props,Vb.transformPropPathStringToArray(d[0]));if(!d)return null;Object.keys(d).forEach(b=>{c.push(a.replace("[id]",b))});c=Vb.constructDynamicPropPath(c,b)});else return a;return c}static applyTranslationObjectToComponentsIfNeeded(a,b,c){let d=a.views;
if(!c)return a;c=JSON.parse(c||"{}");if(!Object.keys(c).length)return a;a.views=this.applyTranslationObjectToComponents(d,b,c);return a}static setProp(a,b,c){a[b.id]&&(a=a[b.id][c],b.props=this._setValueByPropPath({props:b.props,propPath:c.split(","),value:a}))}static applyTranslationObjectToComponents(a,b,c){let d=a=>{const e=b.find(b=>b.name===a.name&&b.version===a.version);e&&e.i18nPropPaths&&e.i18nPropPaths.length&&e.i18nPropPaths.forEach(b=>{b.includes("[id]")?Vb.constructDynamicPropPath(["".concat(b)],
a).forEach(b=>{Vb.setProp(c,a,b)}):Vb.setProp(c,a,b)});a.children&&a.children.length&&a.children.forEach(d)};a.forEach(d);return a}static _setValueByPropPath(a){let b=a.props;var c=a.propPath;let d=a.property;d||a.element&&a.elementProp||(d=c.slice(-1)[0],c=c.slice(0,-1));c.forEach(a=>{b=b&&b[a]});if(!a.element||!a.elementProp)return b[d]=a.value,a.props;c=b.findIndex(b=>b.element===a.element);"object"===typeof b[c][a.elementProp]?b.splice(c,1,Object.assign(Object.assign({},b[c]),{[a.elementProp]:Object.assign(Object.assign({},
b[c][a.elementProp]),{[d]:a.value})})):b.splice(c,1,Object.assign(Object.assign({},b[c]),{[a.elementProp]:a.value}));return a.props}}class Go{constructor(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=3<arguments.length?arguments[3]:void 0,e=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0;this.documentJson=Vb.applyTranslationObjectToComponentsIfNeeded(JSON.parse(JSON.stringify(a)),b.getComponentManifests(),d);this.componentResolver=b;this.config=
c;this.viewRouter=this.viewRenderer=this.compositionRoot=null;this.trackingService=e||{send:()=>{},trackClick:()=>{}};this.layoutType=f}init(){let a=new Eo(this.documentJson,this.config,this.componentResolver,this.trackingService,null,"",this.layoutType),b=new Fo(a.services.eventEmitter,a.services.documentModel,a.services.viewRenderer,this.config&&this.config.optionalDocumentStyles);this.compositionRoot=a;this.viewRenderer=a.services.viewRenderer;this.viewRouter=b;let c=this.compositionRoot.services.documentModel.getShared().cssVars;
Promise.resolve().then(()=>Mf.override(c,this.viewRouter.getDocumentContainer()));return b.start()}destroy(){this.viewRouter.destroy();this.compositionRoot.destroy()}performAction(a,b){this.compositionRoot.services.documentService.handleModelUpdate(a,b);switch(a){case "COLOR_SCHEMA_UPDATE":a=this.compositionRoot.services.documentModel.getShared().cssVars,Mf.override(a,this.viewRouter.getDocumentContainer())}}listenAction(a,b){this.compositionRoot.services.eventEmitter.on(a,(a,d)=>{b(a,d)})}}class Ho{constructor(a,
b,c){this.url=a;this.headers=b;this.httpClient=c;this.loaded=!1}load(){window.AbortController&&(this.abortController=new AbortController);return this.httpClient.execute(this.url,"GET",null,this.headers,this.abortController&&this.abortController.signal).then(a=>{this.loaded=!0;return a})}isLoaded(){return this.loaded}abortLoading(){this.abortController&&this.abortController.abort()}}class Io extends Ho{constructor(a,b){super(a,b,de)}load(){return super.load().then(a=>a.json()).then(a=>{this.registeredComponents=
this._getRegisteredComponents(a);return Promise.resolve(this.registeredComponents)})}resolve(a){return this.registeredComponents[a]}getRegistrationKey(a,b){return a+"@"+b}getComponentManifests(){return Object.values(this.registeredComponents).map(a=>a.manifest)}_getRegisteredComponents(a){return a.reduce((a,c)=>{let b=JSON.parse(c.manifest),e="".concat(b.name,"@").concat(b.version);return Object.assign(Object.assign({},a),{[e]:Object.assign(c,{manifest:b})})},{})}}class Jo extends Pi{constructor(){super();
n(this,"_queryParamNamesNeedUpdate",!0);n(this,"_queryParamNames",{})}getQueryParamNames(){return this._queryParamNames}publishedFormIdToDebug(){this._updateQueryParamNamesIfNeeded();var a=new URL(window.location.href.toLowerCase());a=new URLSearchParams(a.searchParams);return parseInt(a.get(this._queryParamNames.DEBUG_PUBLISHED_FORM))||0}isDebugVariantShouldBeShown(a,b){this._updateQueryParamNamesIfNeeded();return!!this._getConfigsToDebug(a).find(a=>a.id===b)}isDebugShouldIgnoreRules(){this._updateQueryParamNamesIfNeeded();
var a=new URL(window.location.href.toLowerCase());a=new URLSearchParams(a.searchParams);return mj(a.get(this._queryParamNames.DEBUG_IGNORE_RULES))}_updateQueryParamNamesIfNeeded(){if(this._queryParamNamesNeedUpdate){let a=m.getPrefix().debugPrefix;a&&(this._queryParamNamesNeedUpdate=!1,this._queryParamNames={DEBUG_FORM:"".concat(a,"DebugForm").toLowerCase(),DEBUG_PUBLISHED_FORM:"".concat(a,"PublishedForm").toLowerCase(),DEBUG_FORM_VARIANT:"".concat(a,"DebugFormVariant").toLowerCase(),DEBUG_IGNORE_RULES:"".concat(a,
"IgnoreRules").toLowerCase()})}}_getConfigsToDebug(a){if(null===window.location.href||!this.isDebugQueryStringPresentInUrl(this._queryParamNames))return[];var b=new URL(window.location.href.toLowerCase());b=new URLSearchParams(b.searchParams);let c=this._getDebugIds(b,this._queryParamNames.DEBUG_FORM);a=a.filter(a=>c.includes(a.formId));return this._getFormConfigsToDebug(a,b)}_getFormConfigsToDebug(a,b){if(b.has(this._queryParamNames.DEBUG_FORM_VARIANT)){let c=b.get(this._queryParamNames.DEBUG_FORM_VARIANT).split(",");
a=a.filter(a=>c.includes(a.id))}return a}}var Ka=new Jo;class Ko{areFormsPresent(){var a=m.getConfig();let b=0<Object.values(a.forms||{}).length;a=0<Object.values(a.formVariants||{}).length;return b&&a}getForm(a){return Object.values(m.getConfig().forms||{}).find(b=>b.id===a)}getFormVariant(a){return Object.values(m.getConfig().formVariants||{}).find(b=>b.id===a)}getFormVariantByVariantId(a){return Object.values(m.getConfig().formVariants||{}).find(b=>b.id.endsWith("v".concat(a)))}getFormVariants(){return Object.values(m.getConfig().formVariants||
{})}getStaticActiveFormVariants(a){let b=this._getActiveFormIDs(a);return Object.values(a.formVariants||{}).filter(a=>"BUILT_IN"===a.type).filter(a=>b.includes(a.formId))}getDebugFormVariants(){let a=m.getConfig(),b=Object.values(a.forms||{}).filter(a=>"DEBUG"===a.publishStatus).map(a=>a.id);return Object.values(a.formVariants||{}).filter(a=>b.includes(a.formId))}getFormVariantsToRender(a){return Object.values(a.formVariants||{}).filter(a=>this.filterByStatus(a))}filterByStatus(a){return"DEBUG"===
this.getForm(a.formId).publishStatus?Ka.isDebugVariantShouldBeShown(this.getDebugFormVariants(),a.id):!0}_getActiveFormIDs(a){return Object.values(a.forms||{}).filter(a=>"FOR_ALL"===a.publishStatus).map(a=>a.id)}}var D=new Ko;class P{static createVariantsUUID(a){a=a.map(a=>P.createFormParams(a.id));return btoa(unescape(encodeURIComponent(JSON.stringify(a))))}static createVariantUUID(a){return btoa(unescape(encodeURIComponent(JSON.stringify(P.createFormParams(a)))))}static parseFormVariantId(a){return{formId:+a.split("f")[1].split("v")[0],
variantId:+a.split("v")[1],formVariantId:a}}static createFormParams(a){var b=P.parseFormVariantId(a),c=b.formId;b=b.variantId;let d=Va.getLanguageForForms(),e=X.get("clContactId"),f=m.getConfig().siteId;c={formId:c,variantId:b,lang:d,contactId:e,accountId:f};b=Object.values(m.getConfig().formVariants).find(b=>b.id===a);b.hasOwnProperty("appearanceRevision")&&(c.appearanceRevision=b.appearanceRevision);b.hasOwnProperty("checkThisWidgetOnly")&&(c.checkThisWidgetOnly=b.checkThisWidgetOnly);return c}static createPageParams(){return{type:"view",
accountId:m.getConfig().accountId||m.getConfig().orgId}}}class Ac{getAppearance(a){return rb.execute((new Z("/forms/v2/page/".concat(P.createVariantUUID(a)))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":aa.getUserCookie()}).then(a=>a.body).catch(a=>{v.error(a,"error on FormVariantDataSource#getAppearance");return{html:""}})}}class Bc{constructor(a,b){n(this,"injectedConnectorIds",[]);n(this,"injectedPreviewMap",{});n(this,"cacheDocuments",{});n(this,"appearanceLoading",!1);n(this,
"userActionsDetector",null);n(this,"componentResolver",null);this.dataSource=a;this.browserLanguageService=b}activate(a,b){this.userActionsDetector=a;this.componentResolver=b}destroy(){}destroyForm(a){this.removeInjectedDocumentConnector(a.id);this.removeInjectedConnectorId(a.id)}async getAppearanceFromCacheOrLoad(a){this.appearanceLoading=!0;let b=this.cacheDocuments[a]||await this.dataSource.getAppearance(a);this.cacheDocuments[a]=b;this.appearanceLoading=!1;return b}isAppearanceLoading(){return!!this.appearanceLoading}addInjectedConnectorId(a){this.injectedConnectorIds.push(a)}addInjectedDocumentConnector(a,
b){this.injectedPreviewMap[a]=b}removeInjectedDocumentConnector(a){let b=this.injectedPreviewMap[a];b&&(b.disconnect(),delete this.injectedPreviewMap[a])}removeInjectedConnectorId(a){this.injectedConnectorIds=this.injectedConnectorIds.filter(b=>b!==a)}getInjectedConnectorIds(){return this.injectedConnectorIds}isVariantAlreadyInjected(a){return!!this.getInjectedConnectorIds().find(b=>b===a)}}class Lo{constructor(a,b){this.formVariantId=a;this.formType=b;this.eventsStatusMap={}}gaLoaded(){return window.ga&&
ga.create}getPayload(a){return{hitType:"event",eventCategory:this.formType,eventAction:a,eventLabel:this.formVariantId}}getEventSendStatus(a){return this.eventsStatusMap[a]&&this.eventsStatusMap[a].sent}setEventSendStatus(a){this.eventsStatusMap[a]={sent:1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0}}send(a){this.gaLoaded()&&!this.getEventSendStatus(a)&&(ga("send",this.getPayload(a)),this.setEventSendStatus(a))}destroy(){}}class Mo{constructor(a,b){this.formVariantId=a;this.formType=b;
this.eventsStatusMap={};this.tagIds=[]}gaLoaded(){return window.dataLayer&&window.dataLayer.length}updateTagIds(){this.tagIds=(window.dataLayer||[]).filter(a=>a&&a.length&&1<a.length).filter(a=>a[0]&&"config"===a[0]).filter(a=>a[1]&&String(a[1]).startsWith("G-")).map(a=>a[1])}getPayload(a){return{eventCategory:this.formType,eventAction:a,eventLabel:this.formVariantId}}getEventSendStatus(a){return this.eventsStatusMap[a]&&this.eventsStatusMap[a].sent}setEventSendStatus(a){this.eventsStatusMap[a]={sent:1<
arguments.length&&void 0!==arguments[1]?arguments[1]:!0}}isGtag(){return this.tagIds.length&&window.gtag&&"function"===typeof gtag}send(a){this.updateTagIds();if(this.gaLoaded()&&!this.getEventSendStatus(a)){let b=this.getPayload(a);if(this.isGtag())this.tagIds.forEach(a=>{b.send_to=a;try{window.gtag("event",Xc.getProductName(),b)}catch(d){v.error("Gtag send tagIds",d)}});else try{b.event=Xc.getProductName(),window.dataLayer.push(b)}catch(c){v.error("Gtag pushing to GTMs dataLayer",c)}this.setEventSendStatus(a)}}destroy(){}}
class No{static create(a,b,c){switch(a.name){case "GOOGLE_ANALYTICS":return[new Lo(b,c),new Mo(b,c)];default:throw Error("Unknown TrackerName: "+a.name);}}}class ha{static isInstanceInDebugMode(){return m.getInstanceDebugMode()}static isFormStatusIsDebug(a){return"DEBUG"===D.getForm(a).publishStatus}static isInDebugMode(a){return ha.isInstanceInDebugMode()||ha.isFormStatusIsDebug(a)}}class Oo{constructor(a){let b=a.addReferrer;this._payload={formId:a.formId,variantId:a.variantId,type:"click"};b&&
(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class Xi{constructor(a){this.params=a}handle(){this.onFormClicked()}onFormClicked(){let a=(new Oo({...this.params,addReferrer:"DEBUG"!==D.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus})).get();rb.execute((new Z("/forms/v1/event")).get(),"POST",a,{"Content-Type":"text/plain","cl-customer-id":aa.getUserCookie()}).catch(a=>v.error(a,"onFormsReceived error on FormClickedEventHandler: "))}}
class Wb{constructor(a){this.trackers=[];this.formVariant=D.getFormVariant(a);this.form=D.getForm(this.formVariant.formId);this.isInDebugMode=ha.isInDebugMode(this.formVariant.formId)}activate(){this.formVariant.tracking&&this.formVariant.tracking.trackers&&this.formVariant.tracking.trackers.forEach(a=>{a=No.create(a,this.formVariant.id,this.formVariant.type);this.trackers.push(...a)})}transformEventName(a){return a.replace("[Name]",this.formVariant.id)}send(a){if(!this.isInDebugMode){var b=this.transformEventName(a);
this.trackers.forEach(a=>{a.send(b)})}}trackClick(){(new Xi(P.createFormParams(this.formVariant.id))).handle()}destroy(){this.trackers.forEach(a=>a.destroy())}}class Po{constructor(){this.loadedGoogleFonts=[]}addGoogleFonts(a,b){if((a||[]).length){var c=this._getFontWeightOptions();a=a.reduce((a,b)=>a+"&family=".concat(b.replace(/ /g,"+"),":ital,wght@").concat(c),"https://fonts.googleapis.com/css2?display=swap");var d=document.createElement("link");d.rel="stylesheet";d.href=a;(b||document).head.appendChild(d);
this.loadedGoogleFonts.push(d)}}removeGoogleFonts(){this.loadedGoogleFonts.forEach(a=>a.remove());this.loadedGoogleFonts=[]}_getFontWeightOptions(){let a="",b="",c=[];for(let a=0;9>a;a++)c.push(100*(a+1));c.forEach(c=>{let d="0,".concat(c);c="1,".concat(c);a=a?a+";".concat(d):a+d;b=b?b+";".concat(c):b+c});return"".concat(a,";").concat(b)}}class ee extends Po{constructor(){super();this.connectedElement=null}isMobileEnv(a){return window.matchMedia("(max-width: ".concat(a,"px)")).matches}setConnectedElement(a){this.connectedElement=
a}getConnectedElement(){return this.connectedElement}getDisabledWidgetStyles(a){return"".concat(a,":after {\n      content: '';\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 1;\n    }")}getViewportWidth(a,b){return Math.max((a||document).documentElement.clientWidth,(b||window).innerWidth||0)}getContainerElementHeight(a){return"BODY"===a.tagName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):a.getBoundingClientRect().height}}
class Nf extends ee{getDefaultCloseIconParams(){let a={verticalOffset:"-42px",horizontalOffset:"-42px",width:"34px",height:"34px",content:"0",inlineSvg:!0,color:"rgb(255, 255, 255)"};return{desktop:a,mobile:Object.assign(Object.assign({},a),{verticalOffset:"-37px",horizontalOffset:"0px"})}}applyCloseIconParams(a,b,c){b=c?b.mobile:b.desktop;a.style.width=b.width;a.style.height=b.height;a.style.top=b.verticalOffset;a.style.right=b.horizontalOffset;b.inlineSvg?(a.style.color=b.color,a.innerHTML=this.getInlineSvg(b.content),
a=a.firstElementChild,a.style.width="100%",a.style.height="100%"):(a.style.color="",a.innerHTML="",c=document.createElement("img"),c.src=b.content,c.style.width="100%",a.appendChild(c))}getInlineSvg(a){switch(+a){case 0:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';
case 1:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.9916 5.34171C19.4472 5.79732 19.4472 6.53602 18.9916 6.99163L6.99163 18.9916C6.53602 19.4472 5.79732 19.4472 5.34171 18.9916C4.8861 18.536 4.8861 17.7973 5.34171 17.3417L17.3417 5.34171C17.7973 4.8861 18.536 4.8861 18.9916 5.34171Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.34171 5.34171C4.8861 5.79732 4.8861 6.53602 5.34171 6.99163L17.3417 18.9916C17.7973 19.4472 18.536 19.4472 18.9916 18.9916C19.4472 18.536 19.4472 17.7973 18.9916 17.3417L6.99163 5.34171C6.53602 4.8861 5.79732 4.8861 5.34171 5.34171Z" fill="currentColor"/>\n</svg>\n';
case 2:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 3C6.80558 3 3 6.80558 3 11.5C3 16.1944 6.80558 20 11.5 20C16.1944 20 20 16.1944 20 11.5C20 6.80558 16.1944 3 11.5 3ZM2 11.5C2 6.25329 6.25329 2 11.5 2C16.7467 2 21 6.25329 21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8536 8.85319L8.85355 14.8532L8.14645 14.1461L14.1464 8.14608L14.8536 8.85319Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.14645 8.85355L14.1464 14.8536L14.8536 14.1464L8.85355 8.14645L8.14645 8.85355Z" fill="currentColor"/>\n</svg>\n';
case 3:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.8648 6.13518C18.0451 6.31542 18.0451 6.60765 17.8648 6.7879L6.78792 17.8648C6.60768 18.0451 6.31545 18.0451 6.13521 17.8648C5.95496 17.6846 5.95496 17.3923 6.13521 17.2121L17.2121 6.13518C17.3923 5.95494 17.6846 5.95494 17.8648 6.13518Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.13518 6.13518C5.95494 6.31542 5.95494 6.60765 6.13518 6.7879L17.2121 17.8648C17.3923 18.0451 17.6846 18.0451 17.8648 17.8648C18.045 17.6846 18.045 17.3923 17.8648 17.2121L6.78789 6.13518C6.60765 5.95494 6.31542 5.95494 6.13518 6.13518Z" fill="currentColor"/>\n</svg>\n';
case 4:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n';
case 5:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="10" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';
case 6:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.3536 9.35306L9.35355 15.3531L8.64645 14.646L14.6464 8.64596L15.3536 9.35306Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.64645 9.35355L14.6464 15.3536L15.3536 14.6464L9.35355 8.64645L8.64645 9.35355Z" fill="currentColor"/>\n</svg>\n        ';
case 7:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n        ';
case 8:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.9138 8.08736C16.1416 8.31516 16.1416 8.68451 15.9138 8.91232L8.9138 15.9123C8.68599 16.1401 8.31664 16.1401 8.08884 15.9123C7.86103 15.6845 7.86103 15.3152 8.08884 15.0874L15.0889 8.08736C15.3167 7.85955 15.686 7.85955 15.9138 8.08736Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.08882 8.08736C7.86102 8.31516 7.86102 8.68451 8.08882 8.91232L15.0888 15.9123C15.3166 16.1401 15.686 16.1401 15.9138 15.9123C16.1416 15.6845 16.1416 15.3152 15.9138 15.0874L8.91378 8.08736C8.68598 7.85955 8.31663 7.85955 8.08882 8.08736Z" fill="currentColor"/>\n</svg>\n        ';
case 9:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.705 8.29392C15.8189 8.40783 15.8189 8.5925 15.705 8.7064L8.70495 15.7064C8.59105 15.8203 8.40638 15.8203 8.29247 15.7064C8.17857 15.5925 8.17857 15.4078 8.29247 15.2939L15.2925 8.29392C15.4064 8.18002 15.5911 8.18002 15.705 8.29392Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29246 8.29392C8.17856 8.40783 8.17856 8.5925 8.29246 8.7064L15.2925 15.7064C15.4064 15.8203 15.5911 15.8203 15.705 15.7064C15.8189 15.5925 15.8189 15.4078 15.705 15.2939L8.70494 8.29392C8.59104 8.18002 8.40636 8.18002 8.29246 8.29392Z" fill="currentColor"/>\n</svg>\n        '}}}
class xb extends Nf{constructor(a,b){super();this.params=a;this.eventEmitter=b;a=this.params.documentModel.shared.mobileBreakpointWidth;this.floatingBoxRootElement=document.createElement("div");this.floatingBoxRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params));this.floatingBoxElement=this.floatingBoxRootElement.querySelector(xb.floatingBoxSelector);a=this.isMobileEnv(a);this.closeIconElement=this.floatingBoxElement.querySelector(xb.floatingBoxCloseIconSelector);this.addCloseIconEventListener();
this.setPosition(a);this.setCloseIconParams(a)}addCloseIconEventListener(){this.closeIconElement.addEventListener("click",()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED")})}setDefaultPositionMobileParams(){let a=this.params.documentModel.shared.floatingBox;null!==a&&void 0!==a&&a.mobile||(this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{floatingBox:Object.assign(Object.assign({},
this.params.documentModel.shared.floatingBox),{mobile:Object.assign({},{verticalPosition:"BOTTOM",horizontalPosition:"LEFT",verticalOffset:"0px",horizontalOffset:"0px"})})})})}))}clearPosition(){this.floatingBoxElement.removeAttribute("style")}setPosition(a){this.clearPosition();this.setDefaultPositionMobileParams();let b=this.params.documentModel.shared.floatingBox,c=a?b.mobile.horizontalOffset:b.horizontalOffset,d=a?b.mobile.verticalOffset:b.verticalOffset;this.floatingBoxElement.style[(a?b.mobile.horizontalPosition:
b.horizontalPosition).toLowerCase()]=c;let e=a?b.mobile.verticalPosition.toLowerCase():b.verticalPosition.toLowerCase();"SLIDE_TO_TOP"===b.entryAnimation.type?(this.floatingBoxElement.style[e]="".concat(parseFloat(d)-20,"px"),this.floatingBoxElement.style.opacity="0",setTimeout(()=>{this.floatingBoxElement.style[e]=d;this.floatingBoxElement.style.opacity="1"},50)):this.floatingBoxElement.style[e]=d}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let a=this.getDefaultCloseIconParams();
this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:Object.assign(Object.assign({},a),{desktop:Object.assign(Object.assign({},a.desktop),{color:"rgb(0, 0, 0)"}),mobile:Object.assign(Object.assign({},a.mobile),{color:"rgb(0, 0, 0)"})})})})})}}setCloseIconParams(a){this.setDefaultCloseIconParams();this.applyCloseIconParams(this.closeIconElement,
this.params.documentModel.shared.closeIcon,a)}connect(a,b){this.floatingBoxRootElement.querySelector(xb.floatingBoxContentSelector).appendChild(a);b.appendChild(this.floatingBoxElement);this.setConnectedElement(this.floatingBoxElement);this.addGoogleFonts(this.params.documentModel.shared.googleFonts,b.getRootNode());return this.floatingBoxElement}disconnect(){this.floatingBoxElement.remove();this.removeGoogleFonts()}_getTemplate(a){var b,c;return'\n<div class="cl-floating-box">\n  <style>\n  .cl-floating-box {\n    z-index: '.concat(null!==
(b=a.zIndex)&&void 0!==b?b:Math.round(Number.MAX_SAFE_INTEGER/1E7),";\n    position: ").concat(null!==(c=a.displayPosition)&&void 0!==c?c:"fixed",";\n    transition: 0.3s;\n  }\n\n  ").concat(a.disabled?this.getDisabledWidgetStyles(xb.floatingBoxSelector):"",'\n\n  .cl-floating-box-inner-content {\n     position: relative;\n     max-width: 100vw;\n     z-index: 1;\n  }\n\n  .cl-floating-box-close-icon {\n    position: absolute;\n    cursor: pointer;\n    z-index: 99;\n  }\n\n  </style>\n\n  <div class="cl-floating-box-inner-content">\n    <div class="cl-floating-box-close-icon"></div>\n    <div class="cl-floating-box-content"></div>\n  </div>\n</div>\n')}}
xb.floatingBoxSelector=".cl-floating-box";xb.floatingBoxContentSelector=".cl-floating-box-content";xb.floatingBoxCloseIconSelector=".cl-floating-box-close-icon";class Cc extends ee{constructor(a,b){super();this.params=a;this.eventEmitter=b;this.contentLockerRootElement=document.createElement("div");this.contentLockerRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params));this.contentLockerElement=this.contentLockerRootElement.querySelector(Cc.contentLockerSelector)}connect(a,b){this.params.noScroll&&
document.body.classList.add("cl-noscroll");let c=a.children[0];this.params.disableScrollbarCalculation||(c.style.height="auto");this.contentLockerRootElement.querySelector(Cc.contentLockerContentSelector).appendChild(a);this.params.disableScrollbarCalculation||setTimeout(()=>{let a=this.getContainerElementHeight(b);c.getBoundingClientRect().height>a?c.style.minHeight="100%":c.style.height="100%"});b.appendChild(this.contentLockerElement);this.setConnectedElement(this.contentLockerElement);this.addGoogleFonts(this.params.documentModel.shared.googleFonts,
b.getRootNode());return this.contentLockerElement}disconnect(){this.params.noScroll&&document.body.classList.remove("cl-noscroll");this.contentLockerElement.remove();this.removeGoogleFonts()}_getTemplate(a){var b,c;return'\n      <div class="cl-content-locker">\n        <style>\n        .cl-content-locker {\n          display: block;\n          position: '.concat(null!==(b=a.displayPosition)&&void 0!==b?b:"fixed",";\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          width: 100%;\n          height: 100%;\n          overflow-y: auto;\n          z-index: ").concat(null!==
(c=a.zIndex)&&void 0!==c?c:Number.MAX_SAFE_INTEGER,";\n        }\n\n        ").concat(a.disabled?this.getDisabledWidgetStyles(Cc.contentLockerSelector):"",'\n\n        .cl-content-locker-content {\n            width: 100%;\n            height: 100%;\n        }\n\n        .cl-noscroll {\n          overflow: hidden !important;\n        }\n        </style>\n\n          <div class="cl-content-locker-content"></div>\n      </div>')}}Cc.contentLockerSelector=".cl-content-locker";Cc.contentLockerContentSelector=
".cl-content-locker-content";class yb extends Nf{constructor(a,b){super();this.params=a;this.eventEmitter=b;a=this.params.documentModel.shared.mobileBreakpointWidth;this.floatingBarRootElement=document.createElement("div");this.floatingBarRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params));this.floatingBarElement=this.floatingBarRootElement.querySelector(yb.floatingBarSelector);a=this.isMobileEnv(a);this.closeIconElement=this.floatingBarElement.querySelector(yb.floatingBarCloseIconSelector);
this.setCloseIconEventListener();this.setCloseIconParams(a)}setCloseIconEventListener(){this.closeIconElement.addEventListener("click",()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED")})}clearPosition(){this.floatingBarElement.removeAttribute("style");this.modifiedHtmlBodyElement&&this.originalHtmlBodyElementMarginTop&&(this.modifiedHtmlBodyElement.style.marginTop=this.originalHtmlBodyElementMarginTop);this.modifiedFloatingElement&&(this.modifiedFloatingElement.style.top=this.originalModifiedFloatingElementTop)}setPosition(a){this.clearPosition();
let b=this.params.documentModel.shared.floatingBar;"BOTTOM"===(a?b.mobile:b.desktop).verticalPosition?(this.floatingBarElement.style.left="0px",this.floatingBarElement.style.bottom="0px"):this._setTopPosition(a)}async _setTopPosition(a){this.modifiedHtmlBodyElement=this.modifiedFloatingElement=null;if("body"===this.containerElement.tagName.toLowerCase()&&this.params.documentModel.shared.actualSize&&!this.params.disableSmartPosition&&(a=a?this.params.documentModel.shared.actualSize.mobile:this.params.documentModel.shared.actualSize.desktop)){a=
a.height;var b=this.containerElement.getRootNode(),c=this._getElementAtTheTopOfTheViewport(b);c&&(c=this._findFloatingElement(c))&&(this.modifiedFloatingElement=c,this.originalModifiedFloatingElementTop=getComputedStyle(c).top,c.style.top=a);this.modifiedHtmlBodyElement=b.body;this.originalHtmlBodyElementMarginTop=getComputedStyle(this.modifiedHtmlBodyElement).marginTop;this.modifiedHtmlBodyElement.style.marginTop=a}(()=>{this.floatingBarElement.style.left="0px";this.floatingBarElement.style.top=
"0px"})()}_getElementAtTheTopOfTheViewport(a){let b=this.getViewportWidth(a,a.defaultView||a.parentWindow)/2,c=a.elementFromPoint(b,0);return c!==a.body?c:a.elementFromPoint(b,50)}_findFloatingElement(a){let b=null;for(;a;){let c=getComputedStyle(a);if("fixed"===c.position||"sticky"===c.position){b=a;break}a=a.parentElement}return b}setCloseIconParams(a){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,a)}connect(a,b){this.containerElement=b;this.floatingBarRootElement.querySelector(yb.floatingBarContentSelector).appendChild(a);
b.appendChild(this.floatingBarElement);this.setConnectedElement(this.floatingBarElement);this.setPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth));this.addGoogleFonts(this.params.documentModel.shared.googleFonts,b.getRootNode());return this.floatingBarElement}disconnect(){this.clearPosition();this.floatingBarElement.remove();this.removeGoogleFonts()}_getTemplate(a){var b,c;return'\n      <div class="cl-floating-bar">\n        <style>\n        .cl-floating-bar {\n          z-index: '.concat(null!==
(b=a.zIndex)&&void 0!==b?b:Math.round(Number.MAX_SAFE_INTEGER/1E7),";\n          position: ").concat(null!==(c=a.displayPosition)&&void 0!==c?c:"fixed",";\n          width: 100%;\n        }\n\n        ").concat(a.disabled?this.getDisabledWidgetStyles(yb.floatingBarSelector):"",'\n\n        .cl-floating-bar-inner-content {\n           position: relative;\n           max-width: 100vw;\n           z-index: 1;\n        }\n\n        .cl-floating-bar-close-icon {\n          position: absolute;\n          cursor: pointer;\n          z-index: 99;\n        }\n        </style>\n\n        <div class="cl-floating-bar-inner-content">\n          <div class="cl-floating-bar-close-icon"></div>\n          <div class="cl-floating-bar-content"></div>\n        </div>\n      </div>\n    ')}}
yb.floatingBarSelector=".cl-floating-bar";yb.floatingBarContentSelector=".cl-floating-bar-content";yb.floatingBarCloseIconSelector=".cl-floating-bar-close-icon";class $a extends ee{constructor(a,b){super();this.params=a;this.eventEmitter=b;this.launcherRootElement=document.createElement("div");this.launcherRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params));this.launcherElement=this.launcherRootElement.querySelector($a.launcherSelector);this.defaultStylesElement=this.launcherElement.querySelector($a.launcherStylesSelector).cloneNode(!0)}connect(a,
b){this.launcherRootElement.querySelector($a.launcherContentSelector).appendChild(a);b.appendChild(this.launcherElement);this.setEntryAnimationAndPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth));this.setConnectedElement(this.launcherElement);this.addGoogleFonts(this.params.documentModel.shared.googleFonts,b.getRootNode());return this.launcherElement}disconnect(){this.launcherElement.remove();this.removeGoogleFonts()}setEntryAnimationAndPosition(a){var b=this.params.documentModel.shared.launcher;
this.setLoopAnimation(b.loopAnimation);let c=a?b.mobile:b.desktop,d=c.verticalPosition.toLowerCase(),e=c.horizontalPosition.toLowerCase();if(["SLIDE_TO_TOP","SLIDE_TO_BOTTOM","SLIDE_TO_LEFT","SLIDE_TO_RIGHT"].includes(b.entryAnimation.type)){if("SLIDE_TO_TOP"===b.entryAnimation.type||"SLIDE_TO_BOTTOM"===b.entryAnimation.type){a=e;var f=c.horizontalOffset;var g=d;var k=c.verticalOffset;b="SLIDE_TO_TOP"===b.entryAnimation.type?"TOP"===c.verticalPosition?20:-20:"TOP"===c.verticalPosition?-20:20}else a=
d,f=c.verticalOffset,g=e,k=c.horizontalOffset,b="SLIDE_TO_LEFT"===b.entryAnimation.type?"LEFT"===c.horizontalPosition?20:-20:"LEFT"===c.horizontalPosition?-20:20;this.launcherElement.style[a]=f;this.launcherElement.style[g]="".concat(parseFloat(k)+b,"px");setTimeout(()=>{this.launcherElement.style[g]=k;this.launcherElement.style.opacity="1"},50)}else this.launcherElement.style[e]=c.horizontalOffset,this.launcherElement.style[d]=c.verticalOffset,this.launcherElement.style.opacity="1"}clearLoopAnimations(){let a=
[];this.launcherElement.classList.forEach(b=>{b.startsWith(Ba.animationClassPrefix)&&a.push(b)});this.launcherElement.classList.remove(...a);this.launcherElement.querySelector($a.launcherStylesSelector).innerHTML=this.defaultStylesElement.innerHTML;this.launcherElement.removeAttribute("style")}setLoopAnimation(a){this.clearLoopAnimations();this._applyLoopAnimationParams(a);this.launcherElement.classList.add(Ba.animationClassPrefix+a.type)}_applyLoopAnimationParams(a){a.params&&Object.keys(a.params).forEach(b=>
{let c=a.params[b];this.launcherElement.style.setProperty("--cl-".concat(a.type,"-").concat(b),"".concat(c||Ba.getDefaultParamValueByAnimationType(a.type,b)))})}_getTemplate(a){var b,c,d;return'\n      <div class="cl-launcher">\n        <style class="cl-launcher-styles">\n\n        '.concat(Ba.constructAnimationStylesByTypes([null===(b=a.documentModel.shared.launcher.loopAnimation)||void 0===b?void 0:b.type]),"\n\n        .cl-launcher {\n          z-index: ").concat(null!==(c=a.zIndex)&&void 0!==
c?c:Math.round(Number.MAX_SAFE_INTEGER/1E8),";\n          position: ").concat(null!==(d=a.displayPosition)&&void 0!==d?d:"fixed",";\n          transition: 0.3s;\n          cursor: pointer;\n          opacity: 0;\n        }\n\n        ").concat(a.disabled?this.getDisabledWidgetStyles($a.launcherSelector):"",'\n\n        .cl-launcher-inner-content {\n           position: relative;\n        }\n        </style>\n\n        <div class="cl-launcher-inner-content">\n          <div class="cl-launcher-content"></div>\n        </div>\n      </div>\n')}}
$a.launcherSelector=".cl-launcher";$a.launcherContentSelector=".cl-launcher-content";$a.launcherStylesSelector=".cl-launcher-styles";class zb extends Nf{constructor(a,b){super();this.params=a;this.eventEmitter=b;this.setDefaultDialogParams();a=this.params.documentModel.shared.mobileBreakpointWidth;this.dialogRootElement=document.createElement("div");this.dialogRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(Object.assign(Object.assign({},this.params),{background:this.params.documentModel.shared.dialog.background})));
this.dialogElement=this.dialogRootElement.querySelector(zb.dialogSelector);a=this.isMobileEnv(a);this.closeIconElement=this.dialogElement.querySelector(zb.dialogCloseIconSelector);this.addBackDropClickEventListener();this.addCloseIconEventListener();this.setCloseIconParams(a);this.boundEscapeListener=this.escapeListenerCallback.bind(this);window.addEventListener("keyup",this.boundEscapeListener)}setDefaultDialogParams(){this.params.documentModel.shared.dialog||(this.params=Object.assign(Object.assign({},
this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{dialog:{background:"rgba(0, 0, 0, 0.7)"}})})}))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let a=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),
{closeIcon:{desktop:a.desktop,mobile:a.mobile}})})})}}addCloseIconEventListener(){this.closeIconElement.addEventListener("click",()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED")})}addBackDropClickEventListener(){this.dialogElement.addEventListener("click",a=>{a.target===this.dialogElement&&this.eventEmitter.emit("CLOSE_WIDGET")})}setCloseIconParams(a){this.setDefaultCloseIconParams();this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,a)}connect(a,b){let c=
this.dialogRootElement.querySelector(zb.dialogContentSelector);c.appendChild(a);this.params.disableScrollbarCalculation||setTimeout(()=>{let a=this.getContainerElementHeight(b);c.getBoundingClientRect().height>a&&(this.dialogElement.style.padding="50px 0",this.dialogElement.style.alignItems="flex-start")});b.appendChild(this.dialogElement);this.setConnectedElement(this.dialogElement);this.addGoogleFonts(this.params.documentModel.shared.googleFonts,b.getRootNode());return this.dialogElement}disconnect(){this.dialogElement.remove();
window.removeEventListener("keyup",this.boundEscapeListener);this.removeGoogleFonts()}escapeListenerCallback(a){"Escape"===a.key&&this.eventEmitter.emit("CLOSE_WIDGET")}_getTemplate(a){var b,c;return'\n<div class="cl-dialog">\n  <style>\n  .cl-dialog {\n    z-index: '.concat(null!==(b=a.zIndex)&&void 0!==b?b:Math.round(Number.MAX_SAFE_INTEGER/1E7),";\n    position: ").concat(null!==(c=a.displayPosition)&&void 0!==c?c:"fixed",";\n    top: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: ").concat(a.background,
";\n    overflow: auto;\n    box-sizing: border-box;\n  }\n\n  ").concat(a.disabled?this.getDisabledWidgetStyles(zb.dialogSelector):"",'\n\n  .cl-dialog-inner-content {\n     position: relative;\n     max-width: 100vw;\n  }\n\n  .cl-dialog-close-icon {\n    z-index: 99;\n    position: absolute;\n    cursor: pointer;\n  }\n\n  </style>\n\n  <div class="cl-dialog-inner-content">\n    <div class="cl-dialog-close-icon"></div>\n    <div class="cl-dialog-content"></div>\n  </div>\n</div>\n')}}zb.dialogSelector=
".cl-dialog";zb.dialogContentSelector=".cl-dialog-content";zb.dialogCloseIconSelector=".cl-dialog-close-icon";let fe={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class Qo{static map(a){return fe.hasOwnProperty(a)?fe[a]:fe.AFTER_END}}class Ro extends ee{constructor(a,b){super();this.params=a;this.eventEmitter=b;this.builtInElement=null}connect(a,b){let c;this.params.placement?(b=document.querySelector(this.params.placement.selector),
c=b.getRootNode(),this.params.placement.insertType===fe.REPLACE?b.replaceWith(a):b.insertAdjacentElement(Qo.map(this.params.placement.insertType),a)):(c=b.getRootNode(),b.appendChild(a));this.params.disabled&&(b=document.createElement("style"),b.innerHTML=this.getDisabledWidgetStyles('[class^="cl-widget"]'),a.appendChild(b));this.builtInElement=a;this.setConnectedElement(this.builtInElement);this.addGoogleFonts(this.params.documentModel.shared.googleFonts,c);return this.builtInElement}disconnect(){this.builtInElement.remove();
this.removeGoogleFonts()}}class So{static create(a,b){let c=a.widgetType;switch(c){case "FLOATING_BOX":return new xb(a,b);case "FLOATING_BAR":return new yb(a,b);case "DETACHED":return new zb(a,b);case "CONTENT_LOCKER":return new Cc(a,b);case "LAUNCHER":return new $a(a,b);case "BUILT_IN":return new Ro(a,b);default:throw Error("DomConnectorFactory: unknown widget type ".concat(c));}}}class To extends Aa{constructor(a){super();this.params=a;this.entryModule=null;this.connector=So.create(a,this)}setEntryModule(a){this.entryModule=
a}navigate(a){this.entryModule&&this.entryModule.viewRouter&&this.entryModule.viewRouter.navigate(a)}updateSharedPropsByType(a,b,c){var d,e,f,g;switch(a){case "FLOATING_BAR":return{floatingBar:Object.assign(Object.assign({},b.floatingBar),null===(d=c.shared)||void 0===d?void 0:d.floatingBar)};case "FLOATING_BOX":return{floatingBox:Object.assign(Object.assign({},b.floatingBox),null===(e=c.shared)||void 0===e?void 0:e.floatingBox)};case "LAUNCHER":return{launcher:Object.assign(Object.assign({},b.launcher),
null===(f=c.shared)||void 0===f?void 0:f.launcher)};case "DETACHED":return{dialog:Object.assign(Object.assign({},b.dialog),null===(g=c.shared)||void 0===g?void 0:g.dialog)};default:return{}}}updateSharedParams(a,b){var c;let d=this.updateSharedPropsByType(this.params.widgetType,a.documentModel.shared,b);return Object.assign(Object.assign({},a),{documentModel:Object.assign(Object.assign({},a.documentModel),{shared:Object.assign(Object.assign(Object.assign({},a.documentModel.shared),{closeIcon:Object.assign(Object.assign({},
a.documentModel.shared.closeIcon),null===(c=b.shared)||void 0===c?void 0:c.closeIcon)}),d)})})}setPosition(a){"function"===typeof this.connector.setPosition&&(this.connector.params=this.updateSharedParams(this.connector.params,a),this.connector.setPosition(a.isMobileEnv))}setCloseIcon(a){"function"===typeof this.connector.setCloseIconParams&&(this.connector.params=this.updateSharedParams(this.connector.params,a),this.connector.setCloseIconParams(a.isMobileEnv))}setLauncherEntryAnimationAndPosition(a){"function"===
typeof this.connector.setEntryAnimationAndPosition&&(this.connector.params=this.updateSharedParams(this.connector.params,a),this.connector.setEntryAnimationAndPosition(a.isMobileEnv))}performAction(a,b){this.entryModule.performAction(a,b);switch(a){case "COLOR_SCHEMA_UPDATE":Mf.override(b,this.connector.getConnectedElement())}}}class Dc extends To{constructor(a){super(a);let b=a.config;a=new Go(a.documentModel,a.componentResolver,void 0===b?{}:b,a.translations,a.trackingService,a.widgetType);this.setEntryModule(a)}setEnvironment(a){let b=
{isMobileEnv:a.isMobileEnv};this.entryModule.performAction("MOBILE_BREAKPOINT_UPDATE",a.isMobileEnv?a.mobileBreakPoint:a.desktopBreakPoint);this.setCloseIcon(b);this.setPosition(b);this.setLauncherEntryAnimationAndPosition(b)}connect(a){let b=this.entryModule.init(this.params.onSubmit);this.params.config.formVariantId?b.classList.add("cl-widget-"+this.params.config.formVariantId):b.classList.add("cl-widget");this.entryModule.listenAction("*",(a,b)=>{this.emit(b,a);"CLOSE_WIDGET"===b&&a&&"function"===
typeof a&&a()});return this.connector.connect(b,a)}disconnect(){this.entryModule&&this.entryModule.viewRouter&&this.entryModule.compositionRoot&&this.entryModule.destroy();this.connector&&this.connector.disconnect()}destroy(){this.disconnect()}}class Uo{constructor(a){let b=a.addReferrer;this._payload={formId:a.formId,variantId:a.variantId,type:"view"};b&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class Ec extends Ki{constructor(a,b){super(a,!0);
this.params=b}handle(){super.handle(this.onFormShown.bind(this))}onFormShown(){let a=(new Uo({...this.params,addReferrer:"DEBUG"!==D.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus})).get();rb.execute((new Z("/forms/v1/event")).get(),"POST",a,{"Content-Type":"text/plain","cl-customer-id":aa.getUserCookie()}).catch(a=>v.error(a,"onFormsReceived error on FormViewedEventHandler: "))}}class Vo extends Aa{}var C=new Vo;class Wo extends Bc{constructor(a,b){super(a,
b);n(this,"_variantsQueue",[]);n(this,"_injectedVariants",[]);n(this,"_staticPreviews",[])}activate(a,b){super.activate(a,b);this._variantsQueue=D.getStaticActiveFormVariants(m.getConfig()).filter(a=>a.rules?!a.rules.CUSTOM_CODE.enabled:!0).slice()}showFormFromCustomCode(a){let b=!0===a.rules.CUSTOM_CODE.enabled;a.rules&&!b||this._injectVariants([a])}showFormBySelector(a){let b=!0===a.rules.SELECTOR.enabled;a.rules&&!b||this._injectVariants([a])}destroy(){this._staticPreviews.forEach(a=>{let b=new Wb(a.params.config.formVariantId);
b.activate();b.send("FormClose_[Name]");b.destroy();a.disconnect()});this._injectedVariants=[]}showForm(a){this.isVariantAlreadyInjected(a.id)||this._injectVariants([a])}destroyForm(a){let b=a.id;a=this._staticPreviews.findIndex(a=>a.params.config.formVariantId===b);let c=this._staticPreviews[a];c&&(c.disconnect(),this._staticPreviews.splice(a,1),a=this._injectedVariants.findIndex(a=>a.id===b),this._injectedVariants.splice(a,1))}isVariantAlreadyInjected(a){return!!this.getInjectedConnectorIds().find(b=>
b===a)}getInjectedConnectorIds(){return this._injectedVariants.map(a=>a.id)}_injectVariants(a){a.filter(a=>a.placement).forEach(async a=>{let b=a.id;document.querySelector(a.placement.selector)&&(this._removeInjectedVariantsFromQueue(b),this._injectedVariants.push(a),this.getAppearanceFromCacheOrLoad(b).then(b=>{this._injectVariant(a,b)}).catch(b=>{v.error(b,"Error injectBuiltInForm call formVariantId="+a.id)}))})}_injectVariant(a,b){var c,d,e,f;let g=a.id;var k=a.formId;let l=a.placement,h=JSON.parse(b&&
b.document||"{}"),t=new Wb(g);t.activate();k=ha.isInDebugMode(k);let n=()=>{t.send("FormClose_[Name]");this.userActionsDetector.formVariantStat.close(a.id);q.disconnect()},q=new Dc({widgetType:"BUILT_IN",documentModel:h,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:g,hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:b.lang||this.browserLanguageService.getLanguageForForms(),
widgetDebugMode:k,utmTag:null===(c=m.getConfig().formConfig)||void 0===c?void 0:c.utmTag,widgetId:a.formId,widgetName:null===(d=m.getConfig().forms)||void 0===d?void 0:null===(e=d[a.formId])||void 0===e?void 0:e.name,type:a.type,clContactId:null===(f=m.getUserInfo())||void 0===f?void 0:f.clContactId},translations:b.translations,trackingService:t,placement:l});q.on("CONTACT_ID_WAS_RECEIVED",a=>{X.set("clContactId",a);m.setUserInfo({...m.getUserInfo(),clContactId:a});C.emit("CONTACT_DATA_SUBMIT",
{formVariantId:g})});q.on("SHOW_WIDGET",b=>{b.closeWidget&&n();C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b.variantId,formVariantId:a.id})});q.on("CLOSE_WIDGET",()=>n());q.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(g)});this.addInjectedDocumentConnector(g,q);b=q.connect();k||(this.userActionsDetector.formVariantStat.view(g),Oi.collect("FORM_RENDERED"),(new Ec(b,P.createFormParams(g))).handle());t.send("FormShow_[Name]");this._staticPreviews.push(q)}_getReadyToInjectVariants(){return this._variantsQueue.filter(a=>
a.placement&&a.placement.selector&&document.querySelector(a.placement.selector)).map(a=>[a,a.placement.selector&&document.querySelector(a.placement.selector)])}_removeInjectedVariantsFromQueue(a){let b=this._variantsQueue.findIndex(b=>b.id===a);this._variantsQueue.splice(b,1)}}var Xo=new Wo(new Ac,Va);class Yo extends Bc{constructor(a,b){super(a,b)}showFormBySelector(a){let b=a.id;a&&a.rules&&a.rules.SELECTOR.enabled&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(b)||this.prepareAppearanceAndShowForm(a))}showFormFromCustomCode(a){let b=
a.id;a&&a.rules&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(b)||this.prepareAppearanceAndShowForm(a))}showForm(a){this.isAppearanceLoading()||this.isDialogOpened()||this.isVariantAlreadyInjected(a.id)||this.prepareAppearanceAndShowForm(a)}prepareAppearanceAndShowForm(a){this.addInjectedConnectorId(a.id);this.getAppearanceFromCacheOrLoad(a.id).then(b=>{this._showForm(a,b)}).catch(b=>{v.error(b,"Error showDetachedForm call formVariantId="+a.id)})}_showForm(a,b){var c,d,e,f;let g=JSON.parse(b.document),
k=new Wb(a.id);k.activate();let l=()=>{k.send("FormClose_[Name]");this.userActionsDetector.formVariantStat.close(a.id);h.disconnect();this.removeInjectedConnectorId(a.id)},h=new Dc({widgetType:"DETACHED",documentModel:g,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:a.id,hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:b.lang||this.browserLanguageService.getLanguageForForms(),
widgetDebugMode:ha.isInDebugMode(a.formId),utmTag:null===(c=m.getConfig().formConfig)||void 0===c?void 0:c.utmTag,widgetId:a.formId,widgetName:null===(d=m.getConfig().forms)||void 0===d?void 0:null===(e=d[a.formId])||void 0===e?void 0:e.name,type:a.type,clContactId:null===(f=m.getUserInfo())||void 0===f?void 0:f.clContactId},translations:b.translations,trackingService:k,displayPosition:"fixed"});h.on("CONTACT_ID_WAS_RECEIVED",b=>{X.set("clContactId",b);m.setUserInfo({...m.getUserInfo(),clContactId:b});
C.emit("CONTACT_DATA_SUBMIT",{formVariantId:a.id})});h.on("SHOW_WIDGET",b=>{b.closeWidget&&l();b.variantId&&C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b.variantId,formVariantId:a.id})});h.on("CLOSE_WIDGET",()=>l());h.on("CLOSE_ICON_CLICKED",()=>l());h.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(a.id)});b=h.connect(document.body);this.addInjectedDocumentConnector(a.id,h);this.userActionsDetector.formVariantStat.view(a.id);ha.isInDebugMode(a.formId)||
(new Ec(b,P.createFormParams(a.id))).handle();k.send("FormShow_[Name]")}isDialogOpened(){return!!document.body.querySelector(".cl-dialog")}}var Zo=new Yo(new Ac,Va);class $o extends Bc{constructor(a,b){super(a,b)}showFormFromCustomCode(a){let b=a.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(b)||(this.addInjectedConnectorId(b),this.getAppearanceFromCacheOrLoad(b).then(b=>{this._showForm(a,b)}).catch(a=>{v.error(a,"Error showFloatingBoxForm call formVariantId="+b)}))}showForm(a){this.isAppearanceLoading()||
this.isFloatingBoxVisible()||this.isVariantAlreadyInjected(a.id)||(this.addInjectedConnectorId(a.id),this.getAppearanceFromCacheOrLoad(a.id).then(b=>{this._showForm(a,b)}).catch(b=>{v.error(b,"Error showFloatingBoxForm call formVariantId="+a.id)}))}_showForm(a,b){var c,d,e,f;let g=JSON.parse(b.document),k=new Wb(a.id);k.activate();let l=()=>{k.send("FormClose_[Name]");this.userActionsDetector.formVariantStat.close(a.id);h.disconnect();this.removeInjectedConnectorId(a.id)},h=new Dc({widgetType:"FLOATING_BOX",
documentModel:g,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:a.id,hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:b.lang||this.browserLanguageService.getLanguageForForms(),widgetDebugMode:ha.isInDebugMode(a.formId),utmTag:null===(c=m.getConfig().formConfig)||void 0===c?void 0:c.utmTag,widgetId:a.formId,widgetName:null===(d=m.getConfig().forms)||void 0===
d?void 0:null===(e=d[a.formId])||void 0===e?void 0:e.name,type:a.type,clContactId:null===(f=m.getUserInfo())||void 0===f?void 0:f.clContactId},translations:b.translations,trackingService:k,displayPosition:"fixed"});h.on("CONTACT_ID_WAS_RECEIVED",b=>{X.set("clContactId",b);m.setUserInfo({...m.getUserInfo(),clContactId:b});C.emit("CONTACT_DATA_SUBMIT",{formVariantId:a.id})});h.on("SHOW_WIDGET",b=>{b.closeWidget&&l();b.variantId&&C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b.variantId,
formVariantId:a.id})});h.on("CLOSE_WIDGET",()=>l());h.on("CLOSE_ICON_CLICKED",()=>l());h.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(a.id)});this.addInjectedDocumentConnector(a.id,h);b=h.connect(document.body);this.userActionsDetector.formVariantStat.view(a.id);ha.isInDebugMode(a.formId)||(new Ec(b,P.createFormParams(a.id))).handle();k.send("FormShow_[Name]")}isFloatingBoxVisible(){return!!document.body.querySelector(".cl-floating-box")}}var ap=new $o(new Ac,Va);
class bp extends Bc{constructor(a,b){super(a,b)}showFormFromCustomCode(a){let b=a.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(b)||(this.addInjectedConnectorId(b),this.getAppearanceFromCacheOrLoad(b).then(b=>{this.isFloatingBarVisible()||this._showForm(a,b)}).catch(a=>{v.error(a,"Error showFloatingBarForm call formVariantId="+b)}))}showForm(a){this.isAppearanceLoading()||this.isFloatingBarVisible()||this.isVariantAlreadyInjected(a.id)||(this.addInjectedConnectorId(a.id),this.getAppearanceFromCacheOrLoad(a.id).then(b=>
{this.isFloatingBarVisible()||this._showForm(a,b)}).catch(b=>{v.error(b,"Error showFloatingBarForm call formVariantId="+a.id)}))}_showForm(a,b){var c,d,e,f;let g=JSON.parse(b.document),k=new Wb(a.id);k.activate();let l=()=>{k.send("FormClose_[Name]");this.userActionsDetector.formVariantStat.close(a.id);h.disconnect();this.removeInjectedConnectorId(a.id)},h=new Dc({widgetType:"FLOATING_BAR",documentModel:g,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:a.id,
hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:b.lang||this.browserLanguageService.getLanguageForForms(),widgetDebugMode:ha.isInDebugMode(a.formId),optionalDocumentStyles:{width:"100%"},utmTag:null===(c=m.getConfig().formConfig)||void 0===c?void 0:c.utmTag,widgetId:a.formId,widgetName:null===(d=m.getConfig().forms)||void 0===d?void 0:null===(e=d[a.formId])||void 0===e?void 0:e.name,type:a.type,clContactId:null===
(f=m.getUserInfo())||void 0===f?void 0:f.clContactId},translations:b.translations,trackingService:k,displayPosition:"fixed"});h.on("CONTACT_ID_WAS_RECEIVED",b=>{X.set("clContactId",b);m.setUserInfo({...m.getUserInfo(),clContactId:b});C.emit("CONTACT_DATA_SUBMIT",{formVariantId:a.id})});h.on("SHOW_WIDGET",b=>{b.closeWidget&&l();b.variantId&&C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b.variantId,formVariantId:a.id})});h.on("CLOSE_WIDGET",()=>l());h.on("CLOSE_ICON_CLICKED",()=>l());
h.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(a.id)});this.addInjectedDocumentConnector(a.id,h);b=h.connect(document.body);this.userActionsDetector.formVariantStat.view(a.id);ha.isInDebugMode(a.formId)||(new Ec(b,P.createFormParams(a.id))).handle();k.send("FormShow_[Name]")}isFloatingBarVisible(){return!!document.body.querySelector(".cl-floating-bar")||!!document.body.querySelector(".cl-content-locker")||!!document.body.querySelector(".cl-dialog")}}var cp=new bp(new Ac,
Va);class dp extends Bc{constructor(a,b){super(a,b)}showFormFromCustomCode(a){let b=a.id,c=a.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||(this.addInjectedConnectorId(b),this.getAppearanceFromCacheOrLoad(b).then(b=>{this._showForm(a,c,b)}).catch(a=>{v.error(a,"LauncherMainService:Error showLauncher call formVariantId="+b)}))}showForm(a){let b=a.id,c=a.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||this.isVariantAlreadyInjected(b)||(this.addInjectedConnectorId(b),
this.getAppearanceFromCacheOrLoad(b).then(b=>{this._showForm(a,c,b)}).catch(a=>{v.error(a,"LauncherMainService:Error showForm call formVariantId="+b)}))}_showForm(a,b,c){var d,e,f,g;let k=JSON.parse(c.document),l=new Wb(a.id);l.activate();let h=()=>{this.userActionsDetector.formVariantStat.close(a.id);n.disconnect();this.removeInjectedConnectorId(a.id)},n=new Dc({widgetType:"LAUNCHER",documentModel:k,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:a.id,
hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:c.lang||this.browserLanguageService.getLanguageForForms(),widgetDebugMode:ha.isInDebugMode(a.formId),utmTag:null===(d=m.getConfig().formConfig)||void 0===d?void 0:d.utmTag,widgetId:a.formId,widgetName:null===(e=m.getConfig().forms)||void 0===e?void 0:null===(f=e[a.formId])||void 0===f?void 0:f.name,type:a.type,clContactId:null===(g=m.getUserInfo())||void 0===
g?void 0:g.clContactId},translations:c.translations,trackingService:l,displayPosition:"fixed"});n.on("SHOW_WIDGET",c=>{c.closeWidget&&h();C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b||c.variantId,formVariantId:a.id});l.send("LauncherClick_[Name]")});n.on("CLOSE_WIDGET",()=>h());n.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(a.id)});this.addInjectedDocumentConnector(a.id,n);c=n.connect(document.body);this.userActionsDetector.formVariantStat.view(a.id);
ha.isInDebugMode(a.formId)||(new Ec(c,P.createFormParams(a.id))).handle();l.send("LauncherShow_[Name]")}isLauncherVisible(){return!!document.body.querySelector(".cl-launcher")}}var ep=new dp(new Ac,Va);class fp extends Bc{constructor(a,b){super(a,b)}showFormFromCustomCode(a){let b=a.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(b)||(this.addInjectedConnectorId(b),this.getAppearanceFromCacheOrLoad(b).then(b=>this._showForm(a,b)).catch(a=>{v.error(a,"Error showContentLocker call formVariantId="+
b)}))}showForm(a){this.isAppearanceLoading()||this.isContentLockerVisible()||this.isVariantAlreadyInjected(a.id)||(this.addInjectedConnectorId(a.id),this.getAppearanceFromCacheOrLoad(a.id).then(b=>{this._showForm(a,b)}).catch(b=>{v.error(b,"Error showContentLocker call formVariantId="+a.id)}))}_showForm(a,b){var c,d,e,f;let g=JSON.parse(b.document),k=new Wb(a.id);k.activate();let l=()=>{k.send("FormClose_[Name]");this.userActionsDetector.formVariantStat.close(a.id);h.disconnect();this.removeInjectedConnectorId(a.id)},
h=new Dc({widgetType:"CONTENT_LOCKER",documentModel:g,componentResolver:this.componentResolver,config:{clCustomerId:aa.getUserCookie(),formVariantId:a.id,hostUrl:m.getConfig().apiConfig.hostUrl,subscribeContactUrl:(new Z("/forms/v1/subscribe/".concat(P.createVariantUUID(a.id)))).get(),browserLanguage:b.lang||this.browserLanguageService.getLanguageForForms(),optionalDocumentStyles:{width:"100%",height:"100%"},widgetDebugMode:ha.isInDebugMode(a.formId),utmTag:null===(c=m.getConfig().formConfig)||void 0===
c?void 0:c.utmTag,widgetId:a.formId,widgetName:null===(d=m.getConfig().forms)||void 0===d?void 0:null===(e=d[a.formId])||void 0===e?void 0:e.name,type:a.type,clContactId:null===(f=m.getUserInfo())||void 0===f?void 0:f.clContactId},translations:b.translations,trackingService:k,displayPosition:"fixed",noScroll:!0});h.on("SHOW_WIDGET",b=>{b.closeWidget&&l();b.variantId&&C.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:b.variantId,formVariantId:a.id})});h.on("CLOSE_WIDGET",()=>l());h.on("CLOSE_ICON_CLICKED",
()=>l());h.on("CONTACT_DATA_SUBMIT",()=>{this.userActionsDetector.formVariantStat.submit(a.id)});this.addInjectedDocumentConnector(a.id,h);b=h.connect(document.body);this.userActionsDetector.formVariantStat.view(a.id);ha.isInDebugMode(a.formId)||(new Ec(b,P.createFormParams(a.id))).handle();k.send("FormShow_[Name]")}isContentLockerVisible(){return!!document.body.querySelector(".cl-content-locker")}}var gp=new fp(new Ac,Va);class Xb{activateAll(a,b){Object.values(Xb._delegates).forEach(c=>c.activate(a,
b))}destroyAll(){Object.values(Xb._delegates).forEach(a=>a.destroy())}getShownForms(){return Object.keys(Xb._delegates).reduce((a,b)=>({...a,[b]:Xb._delegates[b].getInjectedConnectorIds()}),{})}showFormFromSelectorClick(a){"BUILT_IN"===a.type||"DETACHED"===a.type?this._delegate(a.type,"showFormBySelector",[a]):this._delegate(a.type,"showFormFromCustomCode",[a])}showFormFromCustomCode(a){this._delegate(a.type,"showFormFromCustomCode",[a])}showForm(a){this._delegate(a.type,"showForm",[a])}destroyForm(a){this._delegate(a.type,
"destroyForm",[a])}_delegate(a,b,c){let d=Xb._delegates[a];if(!d)throw Error("WidgetTypeFacade: ".concat(a," class is not delegated"));let e=d[b];if(!e||"function"!==typeof e)throw Error("WidgetTypeFacade: ".concat(a," class ").concat(b," method is not delegated"));e.apply(d,c)}}n(Xb,"_delegates",{BUILT_IN:Xo,DETACHED:Zo,FLOATING_BOX:ap,FLOATING_BAR:cp,LAUNCHER:ep,CONTENT_LOCKER:gp});var La=new Xb;class hp{constructor(){this.changeObserver=new Ta;this.formVariantListened={}}activate(){let a=
D.getFormVariants(m.getConfig()).filter(a=>{var b,d;return a.rules&&(null===(b=a.rules.SELECTOR)||void 0===b?void 0:b.enabled)&&(null===(d=a.rules.SELECTOR)||void 0===d?void 0:d.selector)}).filter(a=>D.filterByStatus(a));this._tryToAddClickListener(a);this.changeObserver.observe(()=>this._tryToAddClickListener(a))}_tryToAddClickListener(a){a.forEach(a=>{var b;let d=null===(b=a.rules.SELECTOR)||void 0===b?void 0:b.selector;if(d&&!this.formVariantListened[a.id])try{Array.from(document.querySelectorAll(d)).forEach(b=>
{b&&(this.formVariantListened[a.id]=a,b.addEventListener("click",this.formVariantClickHandler(a)))})}catch(e){v.error(e,"Failed to add click listener formVariantId="+a.id)}})}formVariantClickHandler(a){return()=>{La.showFormFromSelectorClick(a);C.emit("SHOW_WIDGET_BY_CLICKING_ELEMENT",a)}}destroy(){this.changeObserver.disconnect()}}var Yi=new hp;class ip{constructor(){this.changeObserver=new Ta;this.formVariantListened={}}activate(){let a=D.getFormVariants(m.getConfig()).filter(a=>a.rules&&a.rules.CUSTOM_CODE.enabled&&
a.rules.CUSTOM_CODE.selector).filter(a=>D.filterByStatus(a));this._tryToAddClickListener(a);this.changeObserver.observe(()=>this._tryToAddClickListener(a))}_tryToAddClickListener(a){a.forEach(a=>{let b=a.rules.CUSTOM_CODE.selector;if(b&&!this.formVariantListened[a.id])try{let c=document.querySelector(b);c&&(this.formVariantListened[a.id]=a,c.addEventListener("click",()=>{La.showFormFromCustomCode(a);C.emit("SHOW_WIDGET_BY_CUSTOM_CODE",a.id)}))}catch(d){v.error(d,"Failed to add click listener formVariantId="+
a.id)}})}destroy(){this.changeObserver.disconnect()}}var Zi=new ip;class jp{constructor(a){this.predicate=a}is(a){return!0}}class kp{constructor(a,b){this.predicate=a;this.fV=b}is(a){return!a.formVariants[this.fV.id]}}let Q={MILLISECOND:"MILLISECOND",SECOND:"SECOND",MINUTE:"MINUTE",HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK"};class cb{static convert(a,b,c){a=cb.toMsMapper[a](c);return cb.fromMsMapper[b](a)}}n(cb,"toMsMapper",{[Q.MILLISECOND]:a=>a,[Q.SECOND]:a=>1E3*a,[Q.MINUTE]:a=>6E4*a,[Q.HOUR]:a=>36E5*a,[Q.DAY]:a=>
864E5*a,[Q.WEEK]:a=>6048E5*a});n(cb,"fromMsMapper",{[Q.MILLISECOND]:a=>a,[Q.SECOND]:a=>a/1E3,[Q.MINUTE]:a=>a/6E4,[Q.HOUR]:a=>a/36E5,[Q.DAY]:a=>a/864E5,[Q.WEEK]:a=>a/6048E5});class lp{constructor(a,b){this.predicate=a;this.fV=b}is(a){var b;let c=cb.convert(this.predicate.params.unit,Q.MILLISECOND,this.predicate.params.amount);return(a=null===(b=a.formVariants[this.fV.id])||void 0===b?void 0:b.view)?0<=new Date-new Date(a)-c:!0}}class mp{constructor(a,b){this.predicate=a;this.fV=b}is(a){let b=a.formVariants[this.fV.id];
return b&&b.view?0>new Date(b.view)-new Date(a.currentSession):!0}}class ge{constructor(a,b){this.rule=a;this.fV=b}isFulfilled(a){return 0<this.rule.predicates.filter(a=>a.isActive).filter(b=>ge.predicates[b.name]?(new ge.predicates[b.name](b,this.fV)).is(a):!0).length}}n(ge,"predicates",{NO_LIMIT:jp,ONCE_PER_SITE:kp,MIN_INTERVAL:lp,ONCE_PER_SESSION:mp});let jd={AND:"AND",OR:"OR"},np=[{operandName:"VISITOR",operators:[{type:"TIME",name:"TIME_SPENT_ON_PAGE"},{type:"TIME",name:"TIME_SPENT_ON_SITE"},
{type:"INTEGER",name:"PAGE_READ_PERCENT"},{type:"INTEGER",name:"PAGES_VIEWED"},{type:"TIME",name:"UN_ACTIVE_TIME"},{type:"VOID",name:"USER_LEAVES_PAGE"},{type:"VOID",name:"USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM"}]},{operandName:"DEVICE_TYPE",operators:[{type:"SELECT",name:"EQUALS",options:[{label:"ANY",value:null},{label:"MOBILE",value:"MOBILE"},{label:"DESKTOP",value:"DESKTOP"}]}]},{operandName:"URL",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},
{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"URL_SEARCH_PARAM",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"HTML_ELEMENT",operators:[{type:"HTML_ELEMENT",name:"MATCHES"}]},{operandName:"COUNTRY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]}];class Of{static getOperatorType(a,
b){return np.find(b=>b.operandName===a).operators.find(a=>a.name===b).type}}class op{constructor(a){n(this,"operatorNameMap",{CONTAINS:nj,STARTS_WITH:oj,EQUALS:qj,ENDS_WITH:pj,REG_EX:rj,CONTAINS_ONE_OF:sj});this.name=a}isMatched(a,b){return this.operatorNameMap[this.name](a,b)}}class pp{log(){localStorage.getItem("esRulesLogger")&&console.log(...arguments)}}var ca=new pp;class qp{constructor(a){n(this,"operatorNameMap",{TIME_SPENT_ON_PAGE:tj,TIME_SPENT_ON_SITE:uj,UN_ACTIVE_TIME:vj});this.name=a}isMatched(a,
b){return this.operatorNameMap[this.name](a,b,this.name)}}class rp{constructor(a){n(this,"operatorNameMap",{MATCHES:wj});this.name=a}isMatched(a){return this.operatorNameMap[this.name](a)}}class sp{constructor(a){n(this,"operatorNameMap",{USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM:xj,USER_LEAVES_PAGE:yj});this.name=a}isMatched(a,b,c){return this.operatorNameMap[this.name](a,b,c)}}class tp{constructor(a){n(this,"operatorNameMap",{PAGE_READ_PERCENT:zj,PAGES_VIEWED:Aj});this.name=a}isMatched(a,b){return this.operatorNameMap[this.name](a,
b,this.name)}}class Pf{static create(a,b){switch(a){case "STRING":case "SELECT":return new op(b);case "TIME":return new qp(b);case "HTML_ELEMENT":return new rp(b);case "INTEGER":return new tp(b);case "VOID":return new sp(b);default:throw Error("Unknown OperatorType: "+a);}}}class Fc{constructor(a){this.condition=a}isOperandValueMatched(a){var b=Of.getOperatorType(this.condition.operand.name,this.condition.operator);b=Pf.create(b,this.condition.operator).isMatched(a,this.condition.value);ca.log("".concat(a,
"  ").concat(this.condition.operator," ").concat(this.condition.value," = ").concat(b));return b}}class up extends Fc{constructor(a){super(a)}urlWithoutDebugParams(){var a=window.location.href;let b=new URL(a);a=a.split("?")[0];let c=new URLSearchParams(b.search);"esDebugForm clDebugForm clPublishedForm esPublishedForm clIgnoreRules esIgnoreRules".split(" ").forEach(a=>c.delete(a));return c.toString()?"".concat(a,"?").concat(c.toString()):a}isFulfilled(){return this.isOperandValueMatched(this.urlWithoutDebugParams())}}
class vp extends Fc{constructor(a){super(a)}isFulfilled(a){return(a=(new URLSearchParams(a.sessionUrlSearchParams)).get(this.condition.operand.value))?this.isOperandValueMatched(a):!1}}class wp extends Fc{constructor(a){super(a)}isFulfilled(a,b){let c=Of.getOperatorType(this.condition.operand.name,this.condition.operator);return Pf.create(c,this.condition.operator).isMatched(a,this.condition.value,b)}}class xp extends Fc{constructor(a){super(a)}isFulfilled(){if(!this.condition.value)return!0;var a=
navigator.userAgent||navigator.vendor||window.opera;a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))?"MOBILE":"DESKTOP";return this.isOperandValueMatched(a)}}class yp extends Fc{constructor(a){super(a)}isFulfilled(){var a=Of.getOperatorType(this.condition.operand.name,this.condition.operator);a=!!Pf.create(a,this.condition.operator).isMatched(this.condition.value);ca.log("HTML_ELEMENT  ".concat(this.condition.operator," ").concat(this.condition.value," = ").concat(a));return a}}class zp extends Fc{constructor(a){super(a)}isFulfilled(a,b,c){return this.isOperandValueMatched([c.countryCode])}}
class Ap{static create(a){switch(a.operand.name){case "URL":return new up(a);case "URL_SEARCH_PARAM":return new vp(a);case "VISITOR":return new wp(a);case "DEVICE_TYPE":return new xp(a);case "HTML_ELEMENT":return new yp(a);case "COUNTRY":return new zp(a);default:throw Error("Unknown OperandName: "+a.operand.name);}}}class Bp{constructor(a,b,c){this.rule=a;this.fV=b;this.locationData=c;this.isFulfilled=this.isFulfilled.bind(this)}isFulfilled(a){return this.isExcludeFulfilled(this.rule.schema.exclude,
a)?!1:this.isIncludeFulfilled(this.rule.schema.include,a)}isIncludeFulfilled(a,b){return this.areGroupsFulFilled(a.groups,a.relation,b)}isExcludeFulfilled(a,b){return a.groups.length?this.areGroupsFulFilled(a.groups,a.relation,b):!1}areGroupsFulFilled(a,b,c){let d=a.filter(a=>this.isGroupFulfilled(a,c));return me(a.length,d.length,b)}isGroupFulfilled(a,b){let c=a.relation,d=a.conditions.length;if(!d)return!0;a=a.conditions.filter(a=>Ap.create(a).isFulfilled(b,this.fV,this.locationData));return me(d,
a.length,c)}}class Qf{constructor(a,b){this.predicate=a;this.fV=b}is(a){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone)}_isDateWithTimeZoneInPast(a,b){return 0>=(new Date(a)).getTime()-this._setTimeZoneToNativeDate(null,b).getTime()}_isDayAndTimeAllowed(a,b,c){var d=this._setTimeZoneToNativeDate(null,c);c=d.toLocaleString("en-EN",{weekday:"long"}).toLowerCase();d=60*d.getHours()+d.getMinutes();if("00"===a.from.hours&&"00"===a.from.minutes&&"00"===a.to.hours&&
"00"===a.to.minutes)a=!0;else{var e=a.to.hours;let b=a.to.minutes;"00"===e&&"00"===b&&(e="23",b="59");a=60*parseInt(a.from.hours,10)+parseInt(a.from.minutes,10);e=60*parseInt(e,10)+parseInt(b,10);a=a<=d&&d<=e}return a&&b.includes(c)}_setTimeZoneToNativeDate(a,b){a=a?new Date(a):new Date;return b?new Date(a.toLocaleString("en-US",{timeZone:b})):a}}class Cp extends Qf{constructor(a,b){super(a,b)}is(a){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone)}}
class Dp extends Qf{constructor(a,b){super(a,b)}is(a){return this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone)}}class Ep extends Qf{constructor(a,b){super(a,b)}is(a){return this._isDayAndTimeAllowed(this.predicate.params.time,this.predicate.params.days,this.predicate.params.timeZone)}}class he{constructor(a,b){this.rule=a;this.fV=b}isFulfilled(a){return 0===this.rule.predicates.filter(a=>a.isActive).map(b=>he.predicates[b.name]?{fulfilled:(new he.predicates[b.name](b,
this.fV)).is(a)}:!0).filter(a=>!a.fulfilled).length}}n(he,"predicates",{HIDE_AFTER:Cp,SHOW_AFTER:Dp,SPECIFIC_DAYS_AND_TIME:Ep});class Fp{constructor(a){this.condition=a}isFulfilled(a,b){var c;a=(null===(c=a.formVariants[b.id])||void 0===c?void 0:c.close)>=this.condition.params.amount;ca.log("WIDGET_CLOSED ".concat(a));return a}}class Gp{static create(a){switch(a.name){case "WIDGET_CLOSED":return new Fp(a);default:throw Error("Unknown ConditionName: "+a.name);}}}class Hp{constructor(a,b){this.rule=
a;this.fV=b;this.isFulfilled=this.isFulfilled.bind(this)}isFulfilled(a){let b=this.rule.conditions.filter(b=>Gp.create(b).isFulfilled(a,this.fV));return me(this.rule.conditions.length,b.length,this.rule.relation)}}class Ip{constructor(a){n(this,"intervalTimerId",null);n(this,"locationData",null);this.store=a;this.alreadyCheckedFormVariantIds=new Set;this.showAnotherWidgetFormVariantIds=new Set;this.currentPageRenderedWidgetIds=new Set;this.showFormByClickingElementFormVariantIds=new Set;this.showFormByCustomCodeFormVariantIds=
new Set;this.showWidgetOnMouseoutIds=new Set;this.subscriptions=[]}activate(a,b){this.userActionsDetector=a;this.locationData=b;this.checkRules();this.subscriptions.push(this.userActionsDetector.on("mouseout",()=>{this.checkRules({mouseout:!0})}),this.userActionsDetector.on("mouseover",()=>{this.checkRules({mouseout:!1})}),C.on("SHOW_WIDGET_FROM_ANOTHER_WIDGET",this.onShowWidgetFromAnotherWidget.bind(this)),C.on("PAGE_VIEW_CHANGED",this.onPageViewChanged.bind(this)),C.on("SHOW_WIDGET_BY_CLICKING_ELEMENT",
this.onShowWidgetByClickingElement.bind(this)),C.on("SHOW_WIDGET_BY_CUSTOM_CODE",this.onShowWidgetByCustomCode.bind(this)));this.intervalTimerId=setInterval(()=>{this.checkRules()},1E3)}async checkRules(a){try{let b={...this.userActionsDetector.getStats(),...a},c=Ka.publishedFormIdToDebug(),d=Ka.isDebugShouldIgnoreRules();this.destroyIfNeeded(b);this.getFormVariantsToRender(b,c,d).forEach(a=>{a.then(a=>{let c=a.fV;a.shouldBeRendered&&(b.mouseout?this.showWidgetOnMouseoutIds.add(c.id):this.currentPageRenderedWidgetIds.add(c.id),
La.showForm(c))}).catch(a=>{v.error(a,"Failed on form rules check")})})}catch(b){v.error(b,"Failed on form rules check")}}getAbTestsFormsToExclude(){let a=new Set,b=(m.getConfig().formConfig||{}).abTests||[],c=m.getFormAbTestsFormVariants().reduce((a,b)=>a.concat(b.formId),[]);b.forEach(b=>{b.rules.forEach(b=>{c.includes(b.formId)||a.add(b.formId)})});return a}getFormVariantsToRender(a,b,c){let d=D.getFormVariantsToRender(m.getConfig());0<b&&(d=d.filter(a=>a.formId===b));c||(d=d.filter(a=>!this.getAbTestsFormsToExclude().has(a.formId)));
d=d.filter(b=>this.filterBySyncRules(b,a)).filter(a=>!this.alreadyCheckedFormVariantIds.has(a.id));let e=this;return d.map(a=>new Promise((d,f)=>{this.alreadyCheckedFormVariantIds.add(a.id);if(c&&(b===a.formId||Ka.isDebugVariantShouldBeShown(D.getDebugFormVariants(),a.id)))d({fV:a,shouldBeRendered:!0});else if(a.asyncRulesEnabled){var g=e.store.getConfig().apiConfig.asyncRulesCheckUrl.replace("{id}",P.createVariantUUID(a.id));rb.execute(g,"GET",null,{"Content-Type":"text/plain","cl-customer-id":aa.getUserCookie()}).then(a=>
a.body).then(b=>{d({fV:a,shouldBeRendered:!b.hideByAsyncRules})}).catch(b=>{v.error(b,"Failed on async rules check fV:"+a.id);f(b)})}else d({fV:a,shouldBeRendered:!0})}))}isRuleTypeEnabled(a,b){return a[b]?a[b].hasOwnProperty("enabled")?a[b].enabled:!0:!1}filterBySyncRules(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(Ka.isDebugShouldIgnoreRules()&&(Ka.publishedFormIdToDebug()===a.formId||Ka.isDebugVariantShouldBeShown(D.getDebugFormVariants(),a.id))||!a.rules)return!0;if(a.rules.CUSTOM_CODE.enabled)return!1;
if(this.isRuleTypeEnabled(a.rules,"HIDE")){var d=(new Hp(a.rules.HIDE,a)).isFulfilled(b);ca.log("formVariant ".concat(a.id," hide"),d);if(d)return!1}if(this.isRuleTypeEnabled(a.rules,"SCHEDULE")&&(d=(new he(a.rules.SCHEDULE,a)).isFulfilled(b),ca.log("formVariant ".concat(a.id," schedule"),d),!d)||!c.includes("FREQUENCY")&&this.isRuleTypeEnabled(a.rules,"FREQUENCY")&&(c=(new ge(a.rules.FREQUENCY,a)).isFulfilled(b),ca.log("formVariant ".concat(a.id," frequency"),c),!c))return!1;c=this.isRuleTypeEnabled(a.rules,
"TARGETING")&&(new Bp(a.rules.TARGETING,a,this.locationData)).isFulfilled(b);ca.log("formVariant ".concat(a.id," targeting"),c);return c}destroyIfNeeded(a){let b=La.getShownForms();Object.keys(b).filter(a=>0<b[a].length).map(a=>b[a]).forEach(b=>{b.forEach(b=>{if(!(this.showAnotherWidgetFormVariantIds.has(b)||this.showFormByClickingElementFormVariantIds.has(b)||this.showFormByCustomCodeFormVariantIds.has(b)||this.showWidgetOnMouseoutIds.has(b))){var c=this.currentPageRenderedWidgetIds.has(b);b=D.getFormVariant(b);
this.filterBySyncRules(b,a,c?["FREQUENCY"]:[])||(La.destroyForm(b),this.alreadyCheckedFormVariantIds.delete(b.id))}})})}destroy(){this.userActionsDetector&&this.userActionsDetector.destroy();this.intervalTimerId&&clearInterval(this.intervalTimerId);this.subscriptions.forEach(a=>a.off())}onShowWidgetByClickingElement(a){this.showFormByClickingElementFormVariantIds.add(a.id)}onShowWidgetByCustomCode(a){this.showFormByCustomCodeFormVariantIds.add(a)}onShowWidgetFromAnotherWidget(a){var b=null;a.formVariantId&&
(b=a.formVariantId.split("v"),b=b[b.length-1]);a=D.getFormVariantByVariantId(a.linkedToVariantId||+b);this.showAnotherWidgetFormVariantIds.add(a.id)}onPageViewChanged(){this.showFormByClickingElementFormVariantIds=new Set;this.showAnotherWidgetFormVariantIds=new Set;this.currentPageRenderedWidgetIds=new Set;this.alreadyCheckedFormVariantIds=new Set;this.showFormByCustomCodeFormVariantIds=new Set;this.showWidgetOnMouseoutIds=new Set}}var $i=new Ip(m);class Jp{static activate(){if(!this.parseFromCl()){var a=
ag();a?this.set(a):(a=this.parseFromWebPushLocalStorage())&&this.set(a)}}static parseFromWebPushLocalStorage(){return X.get("esWebPushContactId")}static parseFromCl(){return X.get("clContactId")}static set(a){X.set("clContactId",a)}}class Kp{constructor(a){this._payload={accountId:a.accountId,type:"view",referrer:window.location.href}}get(){return btoa(JSON.stringify(this._payload))}}class Lp{constructor(a){this.params=a}handle(){var a=m.getPrefix();if("localhost"!==window.location.hostname&&"cl"===
a.debugPrefix&&(a=Ka.getQueryParamNames(),!Ka.isDebugQueryStringPresentInUrl(a)&&(a=0<D.getFormVariants().filter(a=>"FOR_ALL"===D.getForm(a.formId).publishStatus).length,!ha.isInstanceInDebugMode()&&a)))this.onPageViewed()}onPageViewed(){let a=(new Kp(this.params)).get();rb.execute((new Z("/forms/v1/page/event")).get(),"POST",a,{"Content-Type":"text/plain","cl-customer-id":aa.getUserCookie()}).catch(a=>v.error(a,"onFormPageView error on FormPageViewedEventHandler: "))}}var aj=new Lp(P.createPageParams());
class Rf{constructor(){this.observer=this.prevPath=null;window.globalHistoryLength=window.history.length;let a={apply(){window.globalHistoryLength=isNaN(window.globalHistoryLength)&&window.history.length||++window.globalHistoryLength;return Reflect.apply(...arguments)}};history.pushState=new Proxy(history.pushState,a);history.replaceState=new Proxy(history.replaceState,a)}getPrevPath(){return this.prevPath}getCurrentPath(){return location.href.split("?")[0]}getPrevHistoryLength(){return this.prevHistoryLength}getCurrentHistoryLength(){return window.globalHistoryLength}setPrevPath(a){this.prevPath=
a}setPrevHistoryLength(a){this.prevHistoryLength=a}isPathChanged(){return this.getCurrentPath()!==this.getPrevPath()}isHistoryLengthChanged(){return this.getCurrentHistoryLength()!==this.getPrevHistoryLength()}observe(a){this.setPrevPath(this.getCurrentPath());this.observer=new MutationObserver(()=>{let b=this.isPathChanged(),c=this.isHistoryLengthChanged();b&&this.setPrevPath(this.getCurrentPath());c&&this.setPrevHistoryLength(this.getCurrentHistoryLength());b&&c&&a()});this.observer.observe(document.body,
Rf.config)}destroy(){this.observer.disconnect()}}n(Rf,"config",{childList:!0,subtree:!0});var bj=new Rf;class Mp extends Ei{constructor(a){super(a)}getExperimentVariantsConfig(){let a=Object.values(m.getConfig().formVariants||{}),b=[];m.getFormAbTestsConfig().forEach(c=>{let d=[];c=c.rules.map(b=>{var c;const e=a.find(a=>a.formId===b.formId);e&&d.push(e);return{...b,variantId:null!==(c=null===e||void 0===e?void 0:e.id)&&void 0!==c?c:null}});d.length&&b.push({itemVariants:d,trafficSplitRules:c})});
return b}setExperimentVariants(a){m.setFormAbTestFormVariants(a)}getExperimentVariants(){return m.getFormAbTestsFormVariants()}addExperimentVariant(a,b){m.addAbTestFormVariant({formId:a.formId,id:a.id,hash:this._generateHash(a.id,b)})}getExperimentVariantsFromConfig(){return this.getExperimentVariantsConfig().reduce((a,b)=>a.concat(b.itemVariants),[])}}var Np=new Mp(Di);class Op{execute(a){let b=a.rules.TARGETING.schema.include.groups[0].conditions.slice(),c=[];b.find(a=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"===
a.operand.name)&&(b=b.filter(a=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"!==a.operand.name),c.push({name:"WIDGET_CLOSED",isActive:!0,params:{unit:"COUNT",amount:1}}));a.rules.TARGETING={...a.rules.TARGETING,schema:{...a.rules.TARGETING.schema,include:{...a.rules.TARGETING.schema.include,groups:[{...a.rules.TARGETING.schema.include.groups[0],conditions:b},...a.rules.TARGETING.schema.include.groups.slice(1)]},exclude:{...a.rules.TARGETING.schema.exclude,relation:jd.OR}}};a.rules.HIDE||(a.rules.HIDE={enabled:!!c.length,
type:"HIDE",relation:jd.OR,hideFor:null,conditions:c});return a}}var Pp=new Op;class Qp extends Mi{getData(){if(!this._shouldMetricBeCollected(this._getLastDate(),24)){let a=this._getData().data;return a&&a.countryCode?Promise.resolve(a):this._requestDataFromServer()}this._updateMetricCollectionDate();return this._requestDataFromServer()}_getData(){return m.getLocationData()}_setData(a){m.setLocationData(a)}_requestDataFromServer(){return rb.execute((new Z("/forms/v1/location")).get(),"GET",null,
{"Content-Type":"application/json"}).then(a=>{this._storeData(a.body);return a.body}).catch(()=>({body:{}}))}}var Rp=new Qp(24);class Sp{activate(a){a=a.runContactIdDetector;this.apiHandlers={};a&&Jp.activate();this.userActionsDetector=new $n;let b=new Io((new Z("/forms/v1/catalog/components")).get());C.on("SHOW_WIDGET_FROM_ANOTHER_WIDGET",this._showWidgetFromAnotherWidget.bind(this));C.on("CONTACT_DATA_SUBMIT",this._onContactSubmit.bind(this));return Promise.all([Rp.getData(),b.load()]).then(a=>
{a=bb(a,1)[0];Np.activate();La.activateAll(this.userActionsDetector,b);D.getFormVariants().forEach(a=>Pp.execute(a));$i.activate(this.userActionsDetector,a);Yi.activate();Zi.activate();aj.handle();bj.observe(this.detectPageView.bind(this));C.emit("COMPONENTS_LOADED",null)})}detectPageView(){C.emit("PAGE_VIEW_CHANGED",null);this.userActionsDetector.performDetection();aj.handle();$i.checkRules()}showFormFromCustomCode(a){a=a.formVariantId;let b=D.getForm(P.parseFormVariantId(a).formId);b&&("DEBUG"===
b.publishStatus?Ka.isDebugVariantShouldBeShown(D.getDebugFormVariants(),a)&&(La.showFormFromCustomCode(D.getFormVariant(a)),C.emit("SHOW_WIDGET_BY_CUSTOM_CODE",a)):(La.showFormFromCustomCode(D.getFormVariant(a)),C.emit("SHOW_WIDGET_BY_CUSTOM_CODE",a)))}addOnWidgetEventsHandlers(a,b){this.apiHandlers={...this.apiHandlers,CONTACT_DATA_SUBMIT:{...this.apiHandlers.CONTACT_DATA_SUBMIT,[a.formVariantId]:b}}}_onContactSubmit(a){a=a.formVariantId;try{if(this.apiHandlers.hasOwnProperty("CONTACT_DATA_SUBMIT")&&
this.apiHandlers.CONTACT_DATA_SUBMIT[a])this.apiHandlers.CONTACT_DATA_SUBMIT[a]({type:"CONTACT_DATA_SUBMIT"})}catch(b){}}_showWidgetFromAnotherWidget(a){let b=D.getFormVariantByVariantId(a.linkedToVariantId),c=D.getFormVariant(a.formVariantId);b?(La.showFormFromCustomCode(b),ha.isInDebugMode(c.formId)||(new Xi(P.createFormParams(c.id))).handle()):(a='Error SHOW_WIDGET: widget not found. "'.concat(a.formVariantId,'" tried to show "').concat(a.linkedToVariantId,'"'),v.error(a))}destroy(){La.destroyAll();
Yi.destroy();Zi.destroy();bj.destroy()}}var Sf=new Sp;class Tp{static execute(){requestAnimationFrame(()=>{let a=m.getConfig().crawler;if(a&&a.params&&a.params.customCode)try{(new Function([],a.params.customCode))()}catch(b){v.error(b)}})}}class ie{constructor(a){this.authToken=null;this.getAuthTokenCallback=a}_getAuthToken(){return this.authToken}setAuthToken(a){this.authToken=a}async refreshAuthTokenIfNeeded(a){this.authToken||await this._requestToken();if("function"!==typeof a)throw Error("AuthTokenHolder#refreshAuthTokenIfNeeded must accept callback");
let b=await a(this._getAuthToken());if(200===b.status)return b.body;if(401===b.status){await this._requestToken();a=await a(this._getAuthToken());if(200!==a.status)throw Error("AuthTokenHolder#refreshAuthTokenIfNeeded failed to execute request");return a.body}}async _requestToken(){let a=await this.getAuthTokenCallback();if(!a)throw Error("AuthTokenHolder#requestToken token is undefined");if(a&&a.error)throw Error("AuthTokenHolder#requestToken ".concat(a.error));("string"===typeof a||a instanceof
String)&&this.setAuthToken(a)}}n(ie,"AUTH_TOKEN_HEADER_NAME","es-pull-token");class Ab{constructor(a){this.url=(new Z(Ab.RESOURCE_PATH)).get();this.params=null;this.httpRequestService=a}static getParams(a){return JSON.stringify({ids:a,status:"OPENED"})}updateMessagesStatus(a){this.params=Ab.getParams(a);return this.httpRequestService.doRequest(a=>({status:a.status,body:!0}),Ab.MESSAGE,this.url,Ab.METHOD,this.params,"application/json")}}n(Ab,"RESOURCE_PATH","/appinbox/v1/messages/status");n(Ab,"MESSAGE",
"APP_INBOX_MESSAGES_STATUS_UPDATE");n(Ab,"METHOD","POST");class Yb{constructor(a){this.url=(new Z(Yb.RESOURCE_PATH)).get();this.httpRequestService=a}requestCount(){return this.httpRequestService.doRequest(a=>({body:200===a.status?a.body.count:null,status:a.status}),Yb.MESSAGE,this.url,Yb.METHOD)}}n(Yb,"RESOURCE_PATH","/appinbox/v1/messages/count");n(Yb,"MESSAGE","APP_INBOX_MESSAGES_UNREAD_COUNT");n(Yb,"METHOD","GET");class Zb{constructor(a){this.url=(new Z(Zb.RESOURCE_PATH)).get();this.httpRequestService=
a}requestMessages(){return this.httpRequestService.doRequest(a=>({body:200===a.status?a.body.list:null,status:a.status}),Zb.MESSAGE,this.url,Zb.METHOD)}}n(Zb,"RESOURCE_PATH","/appinbox/v1/messages");n(Zb,"MESSAGE","APP_INBOX_MESSAGES");n(Zb,"METHOD","GET");class ab{constructor(a,b){this.url=new URL((new Z(ab.RESOURCE_PATH)).get());let c=this._mapParams(b);Object.keys(c).forEach(a=>{c[a]&&this.url.searchParams.append(a,c[a])});this.httpRequestService=a}static _parseAppearance(a){return{...a,translations:JSON.parse(a.translations),
structures:JSON.parse(a.structures),placement:JSON.parse(a.placement)}}_mapParams(a){return{language:null===a||void 0===a?void 0:a.language,externalId:null===a||void 0===a?void 0:a.externalId}}loadAppearance(){return this.httpRequestService.doRequest(a=>({body:200===a.status?ab._parseAppearance(a.body):null,status:a.status}),ab.MESSAGE,this.url,ab.METHOD)}}n(ab,"RESOURCE_PATH","/appinbox/v1/appearance");n(ab,"MESSAGE","APP_INBOX_MESSAGES_APPEARANCE");n(ab,"METHOD","GET");class $b{static mediaQueryConstructor(a,
b){Object.keys(a).forEach(c=>{Object.keys(a[c].mediaQueries).forEach(d=>{var e=a[c].mediaQueries[d].pseudoClass;e="@media screen and (".concat(d,") {\n          ").concat(a[c].className).concat(e?":".concat(e):""," {\n            ").concat(Object.keys(a[c].mediaQueries[d].styleAttributes).map(b=>"".concat($b.camelToDashedCase(b),":").concat(a[c].mediaQueries[d].styleAttributes[b],";")).join(""),"\n          }\n        }");b.push(e)})})}static createCallButtonStyleElement(a){var b,c,d,e,f,g,k,l,h,
m,n,q,p,r,u,v,w,x,y,z,A,C,B,D,E,F,G,J,K,H,I,M,N,qa,ra,ua,O,P,Q,R,S,T,U,V,X,Y,Z,aa,ba,ca,da,ea,gb,hb,ib,fa,ha,ia,ja,ka,la,Xa,ma,na,oa,pa,va,wa,xa,ya,Tb,ta,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Ya,Za,$a,ab,bb,cb,db,eb,fb;let lb={widget_call_button_container:{className:".js-pull-notification-widget-call-button-container",mediaQueries:null!==(b=null===(c=a.structures.models[1].props.styles.elements[4])||void 0===c?void 0:c.mediaQueries)&&void 0!==b?b:{}},messages_counter:{className:".js-pull-notification-messages-counter",
mediaQueries:null!==(d=null===(e=a.structures.models[0].props.styles.elements[2])||void 0===e?void 0:e.mediaQueries)&&void 0!==d?d:{}},call_button:{className:".js-pull-notification-call-button-container",mediaQueries:null!==(f=null===(g=a.structures.models[0].props.styles.elements[0])||void 0===g?void 0:g.mediaQueries)&&void 0!==f?f:{}},bell_icon:{className:".js-pull-notification-bell-icon",mediaQueries:null!==(k=null===(l=a.structures.models[0].props.styles.elements[1])||void 0===l?void 0:l.mediaQueries)&&
void 0!==k?k:{}},call_button_label:{className:".js-pull-notification-call-button-label",mediaQueries:null!==(h=null===(m=a.structures.models[0].props.styles.elements[3])||void 0===m?void 0:m.mediaQueries)&&void 0!==h?h:{}}},jb=[];$b.mediaQueryConstructor(lb,jb);return"\n    <style>\n      * {\n        font-family: ".concat(a.structures.shared.textFontFamily,";\n      }\n\n      .js-pull-notification-widget-call-button-container {\n        /* model: CONTAINER | element: widget | inline */\n        color: ").concat(a.structures.models[1].props.styles.elements[4].inline.color,
";\n        margin: ").concat(a.structures.models[1].props.styles.elements[4].inline.margin,";\n\n        /*model: WIDGET_CALL_BUTTON_CONTAINER | element: widget | inline*/\n        display: ").concat(null!==(n=null===(q=a.structures.models[4])||void 0===q?void 0:null===(p=q.props.styles.elements[0].inline)||void 0===p?void 0:p.display)&&void 0!==n?n:"flex",";\n        flex-direction: ").concat(null!==(r=null===(u=a.structures.models[4])||void 0===u?void 0:null===(v=u.props.styles.elements[0].inline)||
void 0===v?void 0:v.flexDirection)&&void 0!==r?r:"unset",";\n        width: ").concat(null!==(w=null===(x=a.structures.models[4])||void 0===x?void 0:null===(y=x.props.styles.elements[0].inline)||void 0===y?void 0:y.width)&&void 0!==w?w:"auto",";\n        justify-content: ").concat(null!==(z=null===(A=a.structures.models[4])||void 0===A?void 0:null===(C=A.props.styles.elements[0].inline)||void 0===C?void 0:C.justifyContent)&&void 0!==z?z:"center",";\n        align-items: ").concat(null!==(B=null===
(D=a.structures.models[4])||void 0===D?void 0:null===(E=D.props.styles.elements[0].inline)||void 0===E?void 0:E.alignItems)&&void 0!==B?B:"center",";\n        cursor: ").concat(null!==(F=null===(G=a.structures.models[4])||void 0===G?void 0:null===(J=G.props.styles.elements[0].inline)||void 0===J?void 0:J.cursor)&&void 0!==F?F:"pointer",";\n        min-height: ").concat(null!==(K=null===(H=a.structures.models[4])||void 0===H?void 0:null===(I=H.props.styles.elements[0].inline)||void 0===I?void 0:I.minHeight)&&
void 0!==K?K:"unset",";\n        padding: ").concat(null!==(M=null===(N=a.structures.models[4])||void 0===N?void 0:null===(qa=N.props.styles.elements[0].inline)||void 0===qa?void 0:qa.padding)&&void 0!==M?M:"0",";\n        height: ").concat(null!==(ra=null===(ua=a.structures.models[4])||void 0===ua?void 0:null===(O=ua.props.styles.elements[0].inline)||void 0===O?void 0:O.height)&&void 0!==ra?ra:"44px",";\n        border-radius: ").concat(null!==(P=null===(Q=a.structures.models[4])||void 0===Q?void 0:
null===(R=Q.props.styles.elements[0].inline)||void 0===R?void 0:R.borderRadius)&&void 0!==P?P:"0",";\n        box-sizing: ").concat(null!==(S=null===(T=a.structures.models[4])||void 0===T?void 0:null===(U=T.props.styles.elements[0].inline)||void 0===U?void 0:U.boxSizing)&&void 0!==S?S:"border-box",";\n      }\n\n      .js-pull-notification-widget-call-button-container:hover {\n      /* model: CALL_BUTTON | element: host | hover */\n        background: ").concat(a.structures.models[0].props.styles.elements[0].hover.background,
";\n        cursor: pointer;\n        --bell-icon-color-hover: ").concat(null!==(V=null===(X=a.structures.models[0].props.styles.elements[1].hover)||void 0===X?void 0:X.color)&&void 0!==V?V:"unset","\n      }\n\n      .js-pull-notification-widget-call-button-container:hover .js-pull-notification-call-button-label {\n      /* model: CALL_BUTTON | element: host | hover element: label | inline  */\n        color: ").concat(null!==(Y=null===(Z=a.structures.models[0].props.styles.elements[1].hover)||void 0===
Z?void 0:Z.color)&&void 0!==Y?Y:"unset",";\n        transition: ").concat(null!==(aa=null===(ba=a.structures.models[0].props.styles.elements[1])||void 0===ba?void 0:null===(ca=ba.inline)||void 0===ca?void 0:ca.transition)&&void 0!==aa?aa:"unset",";\n      }\n\n      .js-pull-notification-call-button-container {\n        display: flex;\n        position: relative;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        user-select: none;\n        /* model: CALL_BUTTON | element: host | inline */\n        height: ").concat(null!==
(da=null===(ea=a.structures.models[0].props.styles.elements[0].inline)||void 0===ea?void 0:ea.height)&&void 0!==da?da:"auto",";\n        width: ").concat(null!==(gb=null===(hb=a.structures.models[0].props.styles.elements[0].inline)||void 0===hb?void 0:hb.width)&&void 0!==gb?gb:"auto",";\n        background: ").concat(a.structures.models[0].props.styles.elements[0].inline.background,";\n        border-radius: ").concat(a.structures.models[0].props.styles.elements[0].inline.borderRadius,";\n        padding: ").concat(null!==
(ib=null===(fa=a.structures.models[0].props.styles.elements[0].inline)||void 0===fa?void 0:fa.padding)&&void 0!==ib?ib:"0",";\n      }\n\n      .js-pull-notification-bell-icon {\n        cursor: pointer;\n        /* model: CALL_BUTTON | element: icon | inline */\n        height: ").concat(null!==(ha=null===(ia=a.structures.models[0].props.styles.elements[1].inline)||void 0===ia?void 0:ia.height)&&void 0!==ha?ha:"auto",";\n        width: ").concat(null!==(ja=null===(ka=a.structures.models[0].props.styles.elements[1].inline)||
void 0===ka?void 0:ka.width)&&void 0!==ja?ja:"auto",";\n        -webkit-transition: ").concat(a.structures.models[0].props.styles.elements[1].inline.transition,";\n        transition: ").concat(null!==(la=null===(Xa=a.structures.models[0].props.styles.elements[1])||void 0===Xa?void 0:null===(ma=Xa.inline)||void 0===ma?void 0:ma.transition)&&void 0!==la?la:"unset",";\n        color: var(--bell-icon-color-hover, var(--bell-icon-color, ").concat(a.structures.models[0].props.styles.elements[1].inline.color,
"));\n        margin: ").concat(null!==(na=a.structures.models[0].props.styles.elements[1].inline.margin)&&void 0!==na?na:"0",";\n        display: ").concat(null!==(oa=a.structures.models[0].props.styles.elements[1].inline.display)&&void 0!==oa?oa:"block",";\n      }\n\n      .js-pull-notification-messages-counter {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        text-align: center;\n         /* model: CALL_BUTTON | element: counter | inline */\n        position: ").concat(null!==
(pa=null===(va=a.structures.models[0].props.styles.elements[2].inline)||void 0===va?void 0:va.position)&&void 0!==pa?pa:"absolute",";\n        top: ").concat(a.structures.models[0].props.styles.elements[2].inline.top,";\n        right: ").concat(a.structures.models[0].props.styles.elements[2].inline.right,";\n        width: ").concat(a.structures.models[0].props.styles.elements[2].inline.width,";\n        height: ").concat(a.structures.models[0].props.styles.elements[2].inline.height,";\n        background: ").concat(a.structures.models[0].props.styles.elements[2].inline.background,
";\n        border-radius: ").concat(a.structures.models[0].props.styles.elements[2].inline.borderRadius,";\n        font-size: ").concat(a.structures.models[0].props.styles.elements[2].inline.fontSize,";\n        font-weight: ").concat(a.structures.models[0].props.styles.elements[2].inline.fontWeight,";\n        color: ").concat(a.structures.models[0].props.styles.elements[2].inline.color,";\n        border: ").concat(a.structures.models[0].props.styles.elements[2].inline.border,";\n        line-height: ").concat(null!==
(wa=null===(xa=a.structures.models[0].props.styles.elements[2].inline)||void 0===xa?void 0:xa.lineHeight)&&void 0!==wa?wa:"auto",";\n        box-sizing: ").concat(null!==(ya=null===(Tb=a.structures.models[0].props.styles.elements[2].inline)||void 0===Tb?void 0:Tb.boxSizing)&&void 0!==ya?ya:"border-box",";\n        padding: ").concat(null!==(ta=null===(za=a.structures.models[0].props.styles.elements[2].inline)||void 0===za?void 0:za.padding)&&void 0!==ta?ta:"0",";\n        margin: ").concat(null!==
(Aa=null===(Ba=a.structures.models[0].props.styles.elements[2].inline)||void 0===Ba?void 0:Ba.margin)&&void 0!==Aa?Aa:"0",";\n      }\n\n      .js-pull-notification-call-button-label {\n        user-select: none;\n        /* model: CALL_BUTTON | element: label | inline */\n        margin-left: ").concat(null!==(Ca=null===(Da=a.structures.models[0].props.styles.elements[3])||void 0===Da?void 0:null===(Ea=Da.inline)||void 0===Ea?void 0:Ea.marginLeft)&&void 0!==Ca?Ca:"0",";\n        height: ").concat(null!==
(Fa=null===(Ga=a.structures.models[0].props.styles.elements[3])||void 0===Ga?void 0:null===(Ha=Ga.inline)||void 0===Ha?void 0:Ha.height)&&void 0!==Fa?Fa:"auto",";\n        word-break:  ").concat(null!==(Ia=null===(Ja=a.structures.models[0].props.styles.elements[3])||void 0===Ja?void 0:null===(Ka=Ja.inline)||void 0===Ka?void 0:Ka.wordBreak)&&void 0!==Ia?Ia:"auto",";\n        color: ").concat(null!==(La=null===(Ma=a.structures.models[0].props.styles.elements[3])||void 0===Ma?void 0:null===(Na=Ma.inline)||
void 0===Na?void 0:Na.color)&&void 0!==La?La:"white",";\n        text-decoration: ").concat(null!==(Oa=null===(Pa=a.structures.models[0].props.styles.elements[3])||void 0===Pa?void 0:null===(Qa=Pa.inline)||void 0===Qa?void 0:Qa.textDecoration)&&void 0!==Oa?Oa:"none",";\n        position: ").concat(null!==(Ra=null===(Sa=a.structures.models[0].props.styles.elements[3])||void 0===Sa?void 0:null===(Ta=Sa.inline)||void 0===Ta?void 0:Ta.position)&&void 0!==Ra?Ra:"static",";\n        top: ").concat(null!==
(Ua=null===(Va=a.structures.models[0].props.styles.elements[3])||void 0===Va?void 0:null===(Wa=Va.inline)||void 0===Wa?void 0:Wa.top)&&void 0!==Ua?Ua:"0",";\n        white-space: ").concat(null!==(Ya=null===(Za=a.structures.models[0].props.styles.elements[3])||void 0===Za?void 0:null===($a=Za.inline)||void 0===$a?void 0:$a.whiteSpace)&&void 0!==Ya?Ya:"normal",";\n        font-size: ").concat(null!==(ab=null===(bb=a.structures.models[0].props.styles.elements[3])||void 0===bb?void 0:null===(cb=bb.inline)||
void 0===cb?void 0:cb.fontSize)&&void 0!==ab?ab:"inherit",";\n        transition: ").concat(null!==(db=null===(eb=a.structures.models[0].props.styles.elements[3])||void 0===eb?void 0:null===(fb=eb.inline)||void 0===fb?void 0:fb.transition)&&void 0!==db?db:"unset",";\n      }\n\n      ").concat(jb.map(a=>a).join(""),"\n    </style>\n    ")}static createStyleElement(a,b){var c,d,e,f,g,k,l,h,m,n,q,p,r,u,v,w,x,y,z,A,C,B,D,E,F,G,J,K,H,I,M,N,O,P,Q,R,S,T,U,V,X,Y,Z,aa,ba,ca,da,ea,fa,ha,ia,ja,ka,la,ma,na,
oa,pa,va,wa,Xa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,ta,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Ya,Za,$a,ab,bb,cb,db,eb,fb,jb,lb,nb,ob,pb,qb,rb,sb,tb,ub,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb;let Ub={widget_container:{className:".js-pull-notification-widget-container",mediaQueries:null!==(c=null===(d=a.structures.models[1].props.styles.elements[4])||void 0===d?void 0:d.mediaQueries)&&void 0!==c?c:{}},container_host:{className:".js-pull-notification-messages-container",mediaQueries:null!==
(e=null===(f=a.structures.models[1].props.styles.elements[0])||void 0===f?void 0:f.mediaQueries)&&void 0!==e?e:{}},scroll_container:{className:".js-pull-notification-messages",mediaQueries:null!==(g=null===(k=a.structures.models[1].props.styles.elements[2])||void 0===k?void 0:k.mediaQueries)&&void 0!==g?g:{}},messageWithImage_image:{className:".js-pull-notification-message-image",mediaQueries:null!==(l=null===(h=a.structures.models[2].props.styles.elements[1])||void 0===h?void 0:h.mediaQueries)&&
void 0!==l?l:{}},messageWithImage_title:{className:".js-pull-notification-message-title",mediaQueries:null!==(m=null===(n=a.structures.models[2].props.styles.elements[2])||void 0===n?void 0:n.mediaQueries)&&void 0!==m?m:{}},messageWithImage_content:{className:".js-pull-notification-message-content",mediaQueries:null!==(q=null===(p=a.structures.models[2].props.styles.elements[3])||void 0===p?void 0:p.mediaQueries)&&void 0!==q?q:{}},messageWithImage_date:{className:".js-pull-notification-message-created-date",
mediaQueries:null!==(r=null===(u=a.structures.models[2].props.styles.elements[4])||void 0===u?void 0:u.mediaQueries)&&void 0!==r?r:{}},messageWithImage_contentContainer:{className:".js-pull-notification-message-content-container",mediaQueries:null!==(v=null===(w=a.structures.models[2].props.styles.elements[5])||void 0===w?void 0:w.mediaQueries)&&void 0!==v?v:{}},container_messagesHeader:{className:".js-pull-close-header",mediaQueries:null!==(x=null===(y=a.structures.models[1].props.styles.elements[5])||
void 0===y?void 0:y.mediaQueries)&&void 0!==x?x:{}},container_closeButton:{className:".js-pull-close",mediaQueries:null!==(z=null===(A=a.structures.models[1].props.styles.elements[6])||void 0===A?void 0:A.mediaQueries)&&void 0!==z?z:{}},container_backdrop:{className:".js-pull-notification-messages-backdrop",mediaQueries:null!==(C=null===(B=a.structures.models[1].props.styles.elements[1])||void 0===B?void 0:B.mediaQueries)&&void 0!==C?C:{}},container_messagesHeaderMessage:{className:".js-pull-close-header-message",
mediaQueries:null!==(D=null===(E=a.structures.models[1].props.styles.elements[7])||void 0===E?void 0:E.mediaQueries)&&void 0!==D?D:{}}},Qb=[];var kb={position:"absolute",top:"68.5px",margin:"0 20px",fontSize:"20px",fontWeight:"100",fontFamily:"system-ui"};$b.mediaQueryConstructor(Ub,Qb);return"\n    <style>\n      * {\n        font-family: ".concat(a.structures.shared.textFontFamily,";\n      }\n\n      .js-pull-close-header {\n        /* model: CONTAINER | element: messagesHeader | inline | path 1:5 */\n        border: ").concat(null!==
(F=null===(G=a.structures.models[1].props.styles.elements[5])||void 0===G?void 0:G.inline.border)&&void 0!==F?F:"0",";\n        border-bottom: ").concat(null!==(J=null===(K=a.structures.models[1].props.styles.elements[5])||void 0===K?void 0:K.inline.borderBottom)&&void 0!==J?J:"1px solid #E1E1E1",";\n        background: ").concat(null!==(H=null===(I=a.structures.models[1].props.styles.elements[5])||void 0===I?void 0:I.inline.background)&&void 0!==H?H:"#000000",";\n        height: ").concat(null!==
(M=null===(N=a.structures.models[1].props.styles.elements[5])||void 0===N?void 0:N.inline.height)&&void 0!==M?M:"176px",";\n        width: ").concat(null!==(O=null===(P=a.structures.models[1].props.styles.elements[5])||void 0===P?void 0:P.inline.width)&&void 0!==O?O:"100%",";\n        color: ").concat(null!==(Q=null===(R=a.structures.models[1].props.styles.elements[5])||void 0===R?void 0:R.inline.color)&&void 0!==Q?Q:"#FFFFFF",";\n        border-radius: ").concat(null!==(S=null===(T=a.structures.models[1].props.styles.elements[5])||
void 0===T?void 0:T.inline.borderRadius)&&void 0!==S?S:"0",";\n        display:").concat(null!==(U=null===(V=a.structures.models[1].props.styles.elements[5])||void 0===V?void 0:V.inline.display)&&void 0!==U?U:"none",";\n        padding:").concat(null!==(X=null===(Y=a.structures.models[1].props.styles.elements[5])||void 0===Y?void 0:Y.inline.padding)&&void 0!==X?X:"0 40px",";\n        margin: 0;\n        align-items: center;\n        justify-content: space-between;\n        box-sizing: border-box;\n      }\n\n      .js-pull-close-header-message {\n        /* model: CONTAINER | element: messagesHeaderMessage | inline  | path 1:7 */\n        position: ").concat(null!==
(Z=null===(aa=a.structures.models[1].props.styles.elements[7])||void 0===aa?void 0:aa.inline.position)&&void 0!==Z?Z:kb.position,";\n        top: ").concat(null!==(ba=null===(ca=a.structures.models[1].props.styles.elements[7])||void 0===ca?void 0:ca.inline.top)&&void 0!==ba?ba:kb.top,";\n        margin: ").concat(null!==(da=null===(ea=a.structures.models[1].props.styles.elements[7])||void 0===ea?void 0:ea.inline.margin)&&void 0!==da?da:kb.margin,";\n        font-size: ").concat(null!==(fa=null===
(ha=a.structures.models[1].props.styles.elements[7])||void 0===ha?void 0:ha.inline.fontSize)&&void 0!==fa?fa:kb.fontSize,";\n        font-weight: ").concat(null!==(ia=null===(ja=a.structures.models[1].props.styles.elements[7])||void 0===ja?void 0:ja.inline.fontWeight)&&void 0!==ia?ia:kb.fontWeight,";\n        font-family: ").concat(null!==(ka=null===(la=a.structures.models[1].props.styles.elements[7])||void 0===la?void 0:la.inline.fontFamily)&&void 0!==ka?ka:kb.fontFamily,";\n        letter-spacing: ").concat(null!==
(ma=null===(na=a.structures.models[1].props.styles.elements[7])||void 0===na?void 0:na.inline.letterSpacing)&&void 0!==ma?ma:kb.letterSpacing,";\n        user-select: none;\n      }\n\n      .js-pull-close {\n        /* model: CONTAINER | element: closeButton | inline | path 1:6 */\n        position: ").concat(null!==(oa=null===(pa=a.structures.models[1].props.styles.elements[6])||void 0===pa?void 0:pa.inline.position)&&void 0!==oa?oa:"absolute",";\n        width: ").concat(null!==(va=null===(wa=
a.structures.models[1].props.styles.elements[6])||void 0===wa?void 0:wa.inline.width)&&void 0!==va?va:"20px",";\n        height: ").concat(null!==(Xa=null===(xa=a.structures.models[1].props.styles.elements[6])||void 0===xa?void 0:xa.inline.height)&&void 0!==Xa?Xa:"20px",";\n        background-color: ").concat(null!==(ya=null===(za=a.structures.models[1].props.styles.elements[6])||void 0===za?void 0:za.inline.backgroundColor)&&void 0!==ya?ya:"transparent",";\n        border-radius: ").concat(null!==
(Aa=null===(Ba=a.structures.models[1].props.styles.elements[6])||void 0===Ba?void 0:Ba.inline.borderRadius)&&void 0!==Aa?Aa:"50%",";\n        top: ").concat(null!==(Ca=null===(Da=a.structures.models[1].props.styles.elements[6])||void 0===Da?void 0:Da.inline.top)&&void 0!==Ca?Ca:"0",";\n        right: ").concat(null!==(Ea=null===(Fa=a.structures.models[1].props.styles.elements[6])||void 0===Fa?void 0:Fa.inline.right)&&void 0!==Ea?Ea:"0",";\n        left: ").concat(null!==(ta=null===(Ga=a.structures.models[1].props.styles.elements[6])||
void 0===Ga?void 0:Ga.inline.left)&&void 0!==ta?ta:"unset",";\n        cursor: pointer;\n        display: ").concat(null!==(Ha=null===(Ia=a.structures.models[1].props.styles.elements[6])||void 0===Ia?void 0:Ia.inline.display)&&void 0!==Ha?Ha:"block",";\n      }\n\n      .js-pull-close:before, .js-pull-close:after {\n        position: absolute;\n        left: 9px;\n        top: 0;\n        content: ' ';\n        height: 24px;\n        width: 2px;\n        background-color: #FFFFFF;\n      }\n\n      @media (max-width: 450px) {\n        .js-pull-close:before, .js-pull-close:after {\n          left: 29px;\n          top: 17px;\n        }\n      }\n      .js-pull-close:before {\n        transform: rotate(45deg);\n      }\n      .js-pull-close:after {\n        transform: rotate(-45deg);\n      }\n\n      .js-pull-close:hover:before, .js-pull-close:hover:after  {\n        /* model: CONTAINER | element: closeButton | hover | path 1:6 */\n        background-color: ").concat(null!==
(Ja=null===(Ka=a.structures.models[6])||void 0===Ka?void 0:null===(La=Ka.props.styles.elements[3])||void 0===La?void 0:null===(Ma=La.hover)||void 0===Ma?void 0:Ma.background)&&void 0!==Ja?Ja:"#FFFFFF",";\n      }\n\n      .js-pull-notification-widget-container {\n        display: flex;\n        /* model: CONTAINER | element: widget | inline */\n        color: ").concat(a.structures.models[1].props.styles.elements[4].inline.color,";\n        margin: ").concat(a.structures.models[1].props.styles.elements[4].inline.margin,
";\n      }\n\n      .js-pull-notification-messages-preview-overlay {\n        width: 100%;\n        height: 100%;\n        z-index: 1002;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n\n      .js-pull-notification-loading-messages-container,\n      .js-pull-notification-empty-messages-container ,\n      .js-pull-notification-error-loading-messages-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n         /* model: MESSAGE_WITH_IMAGE | element: host | inline */\n        min-height: ").concat(a.structures.models[3].props.styles.shared.minHeight,
";\n      }\n\n      .js-pull-notification-loading-messages-container {\n        flex-direction: row;\n      }\n\n      .js-pull-notification-loading-messages,\n      .js-pull-notification-no-messages-info,\n      .js-pull-notification-error-loading-messages {\n        /* model: SYSTEM_MESSAGE |  shared */\n        color: ").concat(a.structures.models[3].props.styles.shared.color,";\n        font-size: ").concat(a.structures.models[3].props.styles.shared.fontSize,";\n        line-height: ").concat(a.structures.models[3].props.styles.shared.lineHeight,
";\n      }\n\n      .js-pull-notification-no-messages-info {\n        /* model: SYSTEM_MESSAGE | element: emptyMessage | inline */\n        margin: ").concat(a.structures.models[3].props.styles.elements[2].inline.margin,";\n      }\n\n      .js-pull-notification-error-loading-messages {\n      /* model: SYSTEM_MESSAGE | element: errorMessage | inline */\n        margin: ").concat(a.structures.models[3].props.styles.elements[1].inline.margin,";\n      }\n\n      .js-pull-notification-loading-messages {\n        position: relative;\n        left: -9999px;\n        box-shadow: 9999px 0 0 0 #C4C4C4;\n        /* model: SYSTEM_MESSAGE | element: loadingMessage | inline */\n        width: ").concat(a.structures.models[3].props.styles.elements[0].inline.width,
";\n        height: ").concat(a.structures.models[3].props.styles.elements[0].inline.height,";\n        border-radius: ").concat(a.structures.models[3].props.styles.elements[0].inline.borderRadius,";\n        background: ").concat(a.structures.models[3].props.styles.elements[0].inline.background,";\n        color: ").concat(a.structures.models[3].props.styles.elements[0].inline.color,";\n        animation: ").concat(a.structures.models[3].props.styles.elements[0].inline.animation,";\n        animation-delay:  ").concat(a.structures.models[3].props.styles.elements[0].inline.animationDelay,
";\n        margin: ").concat(a.structures.models[3].props.styles.elements[0].inline.margin,";\n      }\n\n      .js-pull-notification-loading-messages::before, .js-pull-notification-loading-messages::after {\n        content: '';\n        display: inline-block;\n        position: absolute;\n        top: 0;\n      }\n\n      .js-pull-notification-loading-messages::before {\n        /* model: SYSTEM_MESSAGE | element: loadingMessage | before */\n        width: ").concat(a.structures.models[3].props.styles.elements[0].before.width,
";\n        height: ").concat(a.structures.models[3].props.styles.elements[0].before.height,";\n        right: ").concat(a.structures.models[3].props.styles.elements[0].before.right,";\n        border-radius: ").concat(a.structures.models[3].props.styles.elements[0].before.borderRadius,";\n        background: ").concat(a.structures.models[3].props.styles.elements[0].before.background,";\n        color: ").concat(a.structures.models[3].props.styles.elements[0].before.color,";\n        animation: ").concat(a.structures.models[3].props.styles.elements[0].before.animation,
";\n        animation-delay:  ").concat(a.structures.models[3].props.styles.elements[0].before.animationDelay,";\n      }\n\n      .js-pull-notification-loading-messages::after {\n        /* model: SYSTEM_MESSAGE | element: loadingMessage | after */\n        width: ").concat(a.structures.models[3].props.styles.elements[0].after.width,";\n        height: ").concat(a.structures.models[3].props.styles.elements[0].after.height,";\n        left: ").concat(a.structures.models[3].props.styles.elements[0].after.left,
";\n        border-radius: ").concat(a.structures.models[3].props.styles.elements[0].after.borderRadius,";\n        background: ").concat(a.structures.models[3].props.styles.elements[0].after.background,";\n        color: ").concat(a.structures.models[3].props.styles.elements[0].after.color,";\n        animation: ").concat(a.structures.models[3].props.styles.elements[0].after.animation,";\n        animation-delay:  ").concat(a.structures.models[3].props.styles.elements[0].after.animationDelay,";\n      }\n\n      /* model: SYSTEM_MESSAGE | element: loading | animations [animation animationBefore animationAfter] */\n      ").concat(a.structures.models[3].props.styles.elements[0].animations,
"\n\n      .js-pull-notification-error-loading-messages-retry-button {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        font-weight: 400;\n        line-height: 1.42857143;\n        text-align: center;\n        white-space: nowrap;\n        vertical-align: middle;\n        user-select: none;\n        box-shadow: 0 0 3px rgba(0,0,0,.3), 0 2px 3px rgba(0,0,0,.15);\n        transition: .15s;\n         /* model: SYSTEM_MESSAGE | element: retryButton | inline */\n        border: ").concat(a.structures.models[3].props.styles.elements[3].inline.border,
";\n        padding: ").concat(a.structures.models[3].props.styles.elements[3].inline.padding,";\n        border-radius: ").concat(a.structures.models[3].props.styles.elements[3].inline.borderRadius,";\n        max-height: : ").concat(a.structures.models[3].props.styles.elements[3].inline.maxHeight,";\n        font-size: ").concat(a.structures.models[3].props.styles.elements[3].inline.fontSize,";\n        color: ").concat(a.structures.models[3].props.styles.elements[3].inline.color,";\n        background: ").concat(a.structures.models[3].props.styles.elements[3].inline.background,
";\n        margin: ").concat(a.structures.models[3].props.styles.elements[3].inline.margin,";\n      }\n\n      .js-pull-notification-error-loading-messages-retry-button svg {\n        /* model: SYSTEM_MESSAGE | element: retryButtonIcon | inline */\n        margin: ").concat(a.structures.models[3].props.styles.elements[4].inline.margin,";\n      }\n\n      .js-pull-notification-error-loading-messages-retry-button:hover {\n        /* model: SYSTEM_MESSAGE | element: retryButton | hover */\n        background: ").concat(a.structures.models[3].props.styles.elements[3].hover.background,
";\n      }\n\n      .js-pull-notification-message-content-container {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        /* model: MESSAGE_WITH_IMAGE | element: contentContainer | hover */\n        margin: ").concat(a.structures.models[2].props.styles.elements[5].inline.margin,";\n      }\n\n      .js-pull-notification-message-created-date {\n        width: 100%;\n        display: flex;\n        /* model: MESSAGE_WITH_IMAGE | element: date | inline */\n        order: ").concat(null!==
(Na=a.structures.models[2].props.styles.elements[4].inline.order)&&void 0!==Na?Na:"1",";\n        margin: ").concat(null!==(Oa=a.structures.models[2].props.styles.elements[4].inline.margin)&&void 0!==Oa?Oa:"0",";\n        color: ").concat(a.structures.models[2].props.styles.elements[4].inline.color,";\n        font-size: ").concat(a.structures.models[2].props.styles.elements[4].inline.fontSize,";\n        justify-content: ").concat(a.structures.models[2].props.styles.elements[4].inline.justifyContent,
";\n        text-align: ").concat(null!==(Pa=null===(Qa=a.structures.models[2].props.styles.elements[4].inline)||void 0===Qa?void 0:Qa.textAlign)&&void 0!==Pa?Pa:"unset",";\n      }\n\n      .js-pull-notification-message-button {\n        order: 2;\n        /* model: MESSAGE_WITH_IMAGE | element: button | inline */\n        display: ").concat(null!==(Ra=a.structures.models[2].props.styles.elements[5].inline.display)&&void 0!==Ra?Ra:"none",";\n        justify-content: ").concat(null!==(Sa=null===(Ta=
a.structures.models[2].props.styles.elements[5].inline)||void 0===Ta?void 0:Ta.justifyContent)&&void 0!==Sa?Sa:"center",";\n        align-items: ").concat(null!==(Ua=null===(Va=a.structures.models[2].props.styles.elements[5].inline)||void 0===Va?void 0:Va.alignItems)&&void 0!==Ua?Ua:"center",";\n        color: ").concat(null!==(Wa=a.structures.models[2].props.styles.elements[5].inline.color)&&void 0!==Wa?Wa:"#ffffff",";\n        font-size: ").concat(null!==(Ya=a.structures.models[2].props.styles.elements[5].inline.fontSize)&&
void 0!==Ya?Ya:"14px",";\n        font-weight: ").concat(null!==(Za=a.structures.models[2].props.styles.elements[5].inline.fontWeight)&&void 0!==Za?Za:"normal",";\n        text-decoration: ").concat(null!==($a=null===(ab=a.structures.models[2].props.styles.elements[5].inline)||void 0===ab?void 0:ab.textDecoration)&&void 0!==$a?$a:"none",";\n        width: ").concat(null!==(bb=a.structures.models[2].props.styles.elements[5].inline.width)&&void 0!==bb?bb:"138px",";\n        height: ").concat(null!==
(cb=a.structures.models[2].props.styles.elements[5].inline.height)&&void 0!==cb?cb:"38px",";\n        background: ").concat(null!==(db=a.structures.models[2].props.styles.elements[5].inline.background)&&void 0!==db?db:"#777777",";\n        margin-top: ").concat(null!==(eb=a.structures.models[2].props.styles.elements[5].inline.marginTop)&&void 0!==eb?eb:"10px",";\n        margin-bottom: ").concat(null!==(fb=a.structures.models[2].props.styles.elements[5].inline.marginBottom)&&void 0!==fb?fb:"20px",
";\n        border-radius: ").concat(null!==(jb=null===(lb=a.structures.models[2].props.styles.elements[5].inline)||void 0===lb?void 0:lb.borderRadius)&&void 0!==jb?jb:"0",";\n      }\n\n      .js-pull-notification-retry-messages-button {\n        /* model: SYSTEM_MESSAGE | element: retryButton | inline */\n        width: ").concat(a.structures.models[3].props.styles.elements[3].inline.width,";\n        height: ").concat(a.structures.models[3].props.styles.elements[3].inline.height,";\n      }\n\n      .js-pull-notification-message-divider {\n        /* model: CALL_BUTTON | element: divider | inline */\n        border: ").concat(a.structures.models[1].props.styles.elements[3].inline.border,
";\n        border-top: ").concat(a.structures.models[1].props.styles.elements[3].inline.borderTop,";\n        margin: 0;\n      }\n\n      .js-pull-notification-widget-container {\n        display: flex;\n        /* model: CONTAINER | element: widget | inline */\n        color: ").concat(a.structures.models[1].props.styles.elements[4].inline.color,";\n        margin: ").concat(a.structures.models[1].props.styles.elements[4].inline.margin,";\n      }\n\n      .js-pull-notification-messages-container {\n        position: fixed;\n        top: ").concat(null!==
(nb=a.structures.models[1].props.styles.elements[0].inline.top)&&void 0!==nb?nb:"",";\n        left: ").concat(null!==(ob=a.structures.models[1].props.styles.elements[0].inline.left)&&void 0!==ob?ob:"",";\n        right: ").concat(null!==(pb=a.structures.models[1].props.styles.elements[0].inline.right)&&void 0!==pb?pb:"",";\n        bottom: ").concat(null!==(qb=a.structures.models[1].props.styles.elements[0].inline.bottom)&&void 0!==qb?qb:"",";\n        /* model: CONTAINER | element: host | inline */\n        height: ").concat(a.structures.models[1].props.styles.elements[0].inline.height,
";\n        width: ").concat(a.structures.models[1].props.styles.elements[0].inline.width,";\n        max-width: ").concat(a.structures.models[1].props.styles.elements[0].inline.maxWidth,";\n        min-width: ").concat(a.structures.models[1].props.styles.elements[0].inline.maxHeight,";\n        border-radius: ").concat(a.structures.models[1].props.styles.elements[0].inline.borderRadius,";\n        background: ").concat(a.structures.models[1].props.styles.elements[0].inline.background,";\n        box-shadow: ").concat(a.structures.models[1].props.styles.elements[0].inline.boxShadow,
";\n        transform: translateY(10px) translateY(-10px);transition: transform 300ms ease 0s, opacity 300ms ease 0s;\n        z-index: ").concat(b?1:11001,";\n      }\n\n      .js-pull-notification-messages {\n        position: relative;\n        height: 100%;\n        overflow: auto;\n        /* model: CONTAINER | element: scrollContainer | inline */\n        max-height: ").concat(a.structures.models[1].props.styles.elements[2].inline.maxHeight,";\n        min-height: ").concat(a.structures.models[1].props.styles.elements[2].inline.minHeight,
";\n        border-radius: ").concat(a.structures.models[1].props.styles.elements[2].inline.borderRadius,";\n        padding: ").concat(null!==(rb=a.structures.models[1].props.styles.elements[2].inline.padding)&&void 0!==rb?rb:"0",";\n        margin: ").concat(null!==(sb=a.structures.models[1].props.styles.elements[2].inline.margin)&&void 0!==sb?sb:"0",";\n      }\n\n      .js-pull-notification-messages-backdrop {\n        width: 100vw;\n        height: 100vh;\n        position: fixed;\n        /* model: CONTAINER | element: backdrop | inline */\n        background: ").concat(a.structures.models[1].props.styles.elements[1].inline.background,
";\n        top: 0;\n        left: 0;\n        z-index: ").concat(b?999:11E3,";\n      }\n\n      .js-pull-notification-message {\n        display: flex;\n        flex-wrap: nowrap;\n        flex-direction: row;\n        justify-content: flex-start;\n        align-items: flex-start;\n        /* model: MESSAGE_WITH_IMAGE | element: host | inline */\n        background: ").concat(a.structures.models[2].props.styles.elements[0].inline.background,";\n        border-radius: ").concat(null!==(tb=a.structures.models[2].props.styles.elements[0].inline.borderRadius)&&
void 0!==tb?tb:"0",";\n        margin: ").concat(null!==(ub=a.structures.models[2].props.styles.elements[0].inline.margin)&&void 0!==ub?ub:"0",";\n      }\n\n      .js-pull-notification-message-image {\n        /* model: MESSAGE_WITH_IMAGE | element: image | inline */\n        width: ").concat(a.structures.models[2].props.styles.elements[1].inline.width,";\n        min-width: ").concat(null!==(wb=a.structures.models[2].props.styles.elements[1].inline.minWidth)&&void 0!==wb?wb:"auto",";\n        height: ").concat(a.structures.models[2].props.styles.elements[1].inline.height,
";\n        margin: ").concat(a.structures.models[2].props.styles.elements[1].inline.margin,";\n        border-radius: ").concat(null!==(xb=a.structures.models[2].props.styles.elements[1].inline.borderRadius)&&void 0!==xb?xb:"0",";\n        object-fit: ").concat(a.structures.models[2].props.styles.elements[1].inline.objectFit,";\n      }\n\n      .js-pull-notification-message-title {\n        /* font-family: Roboto; */\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n        display: -webkit-box;\n        /* model: MESSAGE_WITH_IMAGE | element: title | inline */\n        order: ").concat(null!==
(yb=a.structures.models[2].props.styles.elements[2].inline.order)&&void 0!==yb?yb:"1",";\n        margin: ").concat(a.structures.models[2].props.styles.elements[2].inline.margin,";\n        font-size: ").concat(a.structures.models[2].props.styles.elements[2].inline.fontSize,";\n        line-height: ").concat(a.structures.models[2].props.styles.elements[2].inline.lineHeight,";\n        color: ").concat(a.structures.models[2].props.styles.elements[2].inline.color,";\n        text-align: ").concat(null!==
(zb=null===(Ab=a.structures.models[2].props.styles.elements[2].inline)||void 0===Ab?void 0:Ab.textAlign)&&void 0!==zb?zb:"unset",";\n      }\n\n      .js-pull-notification-message-content {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        /* model: MESSAGE_WITH_IMAGE | element: content | inline */\n        display: ").concat(null!==(Bb=a.structures.models[2].props.styles.elements[3].inline.display)&&void 0!==
Bb?Bb:"inline-block",";\n        order: ").concat(null!==(Cb=a.structures.models[2].props.styles.elements[3].inline.order)&&void 0!==Cb?Cb:"1",";\n        font-size: ").concat(a.structures.models[2].props.styles.elements[3].inline.fontSize,";\n        color: ").concat(a.structures.models[2].props.styles.elements[3].inline.color,";\n        margin: ").concat(a.structures.models[2].props.styles.elements[3].inline.margin,";\n        text-align: ").concat(null!==(Db=null===(Eb=a.structures.models[2].props.styles.elements[3].inline)||
void 0===Eb?void 0:Eb.textAlign)&&void 0!==Db?Db:"unset",";\n      }\n\n      .js-pull-notification-message:hover {\n        /* model: MESSAGE_WITH_IMAGE | element: host | hover */\n        background: ").concat(a.structures.models[2].props.styles.elements[0].hover.background,";\n        cursor: default;\n      }\n\n      .js-pull-notification-message-url:hover {\n        cursor: pointer;\n      }\n\n      .js-pull-notification-message-read {\n        /* model: MESSAGE_WITH_IMAGE | element: host | read */\n        opacity: ").concat(null!==
(Fb=null===(Hb=a.structures.models[2].props.styles.elements[0].read)||void 0===Hb?void 0:Hb.opacity)&&void 0!==Fb?Fb:"1",";\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-title {\n        /* model: MESSAGE_WITH_IMAGE | element: title | read || hover */\n        color: ").concat(null!==(Ib=null===(Jb=a.structures.models[2].props.styles.elements[2].read)||void 0===Jb?void 0:Jb.color)&&void 0!==Ib?Ib:a.structures.models[2].props.styles.elements[2].hover.color,";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-title {\n        /* model: MESSAGE_WITH_IMAGE | element: title | read */\n        color: ").concat(a.structures.models[2].props.styles.elements[2].hover.color,
";\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-content {\n        /* model: MESSAGE_WITH_IMAGE | element: content | read || hover */\n        color: ").concat(null!==(Kb=null===(Lb=a.structures.models[2].props.styles.elements[3].read)||void 0===Lb?void 0:Lb.color)&&void 0!==Kb?Kb:a.structures.models[2].props.styles.elements[3].hover.color,";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-content {\n        /* model: MESSAGE_WITH_IMAGE | element: content | hover */\n        color: ").concat(a.structures.models[2].props.styles.elements[3].hover.color,
";\n      }\n\n      .js-pull-notification-message-read .js-pull-notification-message-created-date {\n        /* model: MESSAGE_WITH_IMAGE | element: date | read || hover */\n        color: ").concat(null!==(Mb=null===(Nb=a.structures.models[2].props.styles.elements[4].read)||void 0===Nb?void 0:Nb.color)&&void 0!==Mb?Mb:a.structures.models[2].props.styles.elements[4].hover.color,";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-created-date {\n        /* model: MESSAGE_WITH_IMAGE | element: date | hover */\n        color: ").concat(a.structures.models[2].props.styles.elements[4].hover.color,
";\n      }\n\n      .js-pull-notification-message:hover .js-pull-notification-message-button {\n        /* model: MESSAGE_WITH_IMAGE | element: button | read */\n        background: ").concat(null===(Ob=a.structures.models[2].props.styles.elements[5])||void 0===Ob?void 0:null===(Pb=Ob.hover)||void 0===Pb?void 0:Pb.background,";\n      }\n\n      ::-webkit-scrollbar {\n        width: 6px;\n        height: 6px;\n        background-color: transparent;\n      }\n\n      ::-webkit-scrollbar-track {\n        background-color: transparent;\n      }\n\n      ::-webkit-scrollbar-thumb {\n        border-radius: 6px;\n        background-color: #848484;\n      }\n\n      ::-webkit-scrollbar-thumb:hover {\n        background-color: #5e5d5d;\n      }\n\n      ").concat(Qb.map(a=>
a).join(""),"\n    </style>\n    ")}}n($b,"camelToDashedCase",a=>a.replace(/[A-Z]/g,a=>"-".concat(a.toLowerCase())));class z{static setDayStart(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}static combineParts(a){let b=z.getPartTypeValue(a,"day"),c=z.getPartTypeValue(a,"month"),d=z.getPartTypeValue(a,"year"),e=z.getPartTypeValue(a,"hour");a=z.getPartTypeValue(a,"minute");return new Date(d,c-1,b,e,a)}static convertTZ(a,b){let c=z.getTimeFormatter(b,2<arguments.length&&void 0!==
arguments[2]?arguments[2]:"UTC","numeric").formatToParts(a);return z.combineParts(c)}static yesterdayDate(a){let b=z.convertTZ(new Date,a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"UTC");b.setDate(b.getDate()-1);b.setHours(10,3,0,0);return b}static getTimeFormatter(a){return new Intl.DateTimeFormat(z.locales[a],{weekday:"long",year:"numeric",month:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:1<
arguments.length&&void 0!==arguments[1]?arguments[1]:"UTC"})}static getPartTypeValue(a,b){var c;return null===(c=a.find(a=>a.type===b))||void 0===c?void 0:c.value}static getDisplayDate(a,b,c){var d=z.convertTZ(new Date,b.language,c);z.setDayStart(d);let e=6E4*d.getTimezoneOffset();var f=z.convertTZ(+a,b.language);z.setDayStart(f);let g=d.getTime()-f.getTime();var k=z.getTimeFormatter(b.language);a=z.convertTZ(+a-e,b.language,c);c=k.formatToParts(a);k=z.getPartTypeValue(c,"hour");a=z.getPartTypeValue(c,
"minute");if(f.getTime()===d.getTime())return b.translations[b.structures.models[2].props.date.today]+", "+("0"+k).slice(-2)+":"+("0"+a).slice(-2);if(864E5>=g)return b.translations[b.structures.models[2].props.date.yesterday]+", "+("0"+k).slice(-2)+":"+("0"+a).slice(-2);b=z.getPartTypeValue(c,"day");d=z.getPartTypeValue(c,"month");f=z.getPartTypeValue(c,"year");return("0"+b).slice(-2)+" "+d+"".concat(d.endsWith(".")?" ":". ")+f+", "+("0"+k).slice(-2)+":"+("0"+a).slice(-2)}static formatDate(a,b,c,
d){var e;a.language=(null!==(e=a.language)&&void 0!==e?e:"").toLowerCase();c=null!==c&&void 0!==c?c:Intl.DateTimeFormat().resolvedOptions().timeZone;d&&"preview"===d&&(b=z.yesterdayDate(a.language,c).getTime());return z.getDisplayDate(b,a,c)}}n(z,"locales",{ru:"ru-RU",en:"en-US",uk:"uk-UA",ua:"uk-UA"});var Up=Bb(function(a,b){(function(b,d){a.exports=d()})(kd,function(){function a(a){var b=a.tags;if(!Object.keys(b).map(function(a){return typeof b[a]}).every(function(a){return"object"===a||"boolean"===
a||"function"===a}))throw Error("The configuration was invalid");this.config=a}function b(a){return-1!==e.indexOf(a.nodeName)}var e="P LI TD TH DIV H1 H2 H3 H4 H5 H6 PRE".split(" "),f="A B STRONG I EM SUB SUP U STRIKE".split(" ");a.prototype.clean=function(a){let b=document.implementation.createHTMLDocument(),c=b.createElement("div");c.innerHTML=a;this._sanitize(b,c);return c.innerHTML};a.prototype._sanitize=function(a,c){var d=a.createTreeWalker(c,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,
null,!1),e=d.firstChild();if(e){do{if(e.nodeType===Node.TEXT_NODE)if(""===e.data.trim()&&(e.previousElementSibling&&b(e.previousElementSibling)||e.nextElementSibling&&b(e.nextElementSibling))){c.removeChild(e);this._sanitize(a,c);break}else continue;if(e.nodeType===Node.COMMENT_NODE){c.removeChild(e);this._sanitize(a,c);break}var g=-1!==f.indexOf(e.nodeName),k;g&&(k=Array.prototype.some.call(e.childNodes,b));var m=!!c.parentNode,n=b(c)&&b(e)&&m,p=e.nodeName.toLowerCase();m=this.config;m="function"===
typeof m.tags[p]?m.tags[p](e):m.tags[p];(g=g&&k)||(g="undefined"===typeof m?!0:"boolean"===typeof m?!m:!1);if(g||!this.config.keepNestedBlockElements&&n){if("SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName)for(;0<e.childNodes.length;)c.insertBefore(e.childNodes[0],e);c.removeChild(e);this._sanitize(a,c);break}for(g=0;g<e.attributes.length;g+=1){n=e.attributes[g];a:{p=n;var r=m,u=e,v=p.name.toLowerCase();if(!0!==r){if("function"===typeof r[v]){p=!r[v](p.value,u);break a}if("undefined"===typeof r[v]||!1===
r[v]){p=!0;break a}if("string"===typeof r[v]){p=r[v]!==p.value;break a}}p=!1}p&&(e.removeAttribute(n.name),--g)}this._sanitize(a,e)}while(e=d.nextSibling())}};return a})});class Tf{static sanitize(a){try{return(new Up(Tf.config)).clean(a)}catch(b){return v.error(b,"HTMLSanitizer failure"),""}}}n(Tf,"config",{tags:{b:{},i:{},u:{},a:{href:!0,target:!0},br:{},strike:{},span:{style:!0},div:{},ul:{},ol:{},li:{}}});class la{static createMessageElement(a,b,c,d,e,f,g){e=la.createMessageContainerElement(b,
d,e,f,g);e.appendChild(la.createMessageImageElement(b,a.structures.media.imagePlaceholder));f=la.createMessageContentContainerElement();f.appendChild(la.createMessageTitleElement(b));b.content&&f.appendChild(la.createMessageContentElement(b));f.appendChild(la.createMessageDateElement(a,b.createDate,c,d));la.getAppearanceContentButtonModel(a)&&a.translations["message.btn.label"]&&f.appendChild(la.createButtonElement(b,a));e.appendChild(f);return e}static getAppearanceContentButtonModel(a){var b;return(a=
a.structures.models.find(a=>"MESSAGE_WITH_IMAGE"===a.type))?null===(b=a.props.styles)||void 0===b?void 0:b.elements.find(a=>"button"===a.element):!1}static createMessageContainerElement(a,b,c,d,e){e=document.createElement("div");e.setAttribute("id",a.id);e.classList.add("js-pull-notification-message");a.newMessage||e.classList.add("js-pull-notification-message-read");a.link&&e.classList.add("js-pull-notification-message-url");e.addEventListener("click",async e=>{var f;if("preview"!==b){e=a.link;var k=
null!==a&&void 0!==a&&null!==(f=a.settings)&&void 0!==f&&f.openLinkInNewTab?"_blank":"_self";e&&("testView"!==b&&(await c(),await d()),window.open(e,k))}});return e}static createMessageContentContainerElement(){let a=document.createElement("div");a.classList.add("js-pull-notification-message-content-container");return a}static getMessageContentContainerElement(a){return a.querySelector("div.js-pull-notification-message-content-container")}static createMessageTitleElement(a){var b;let c=document.createElement("span");
c.classList.add("js-pull-notification-message-title");c.innerText="".concat(null!==(b=a.title)&&void 0!==b?b:"");return c}static getMessageTitleElement(a){return a.querySelector("span.js-pull-notification-message-title")}static createMessageContentElement(a){let b=document.createElement("span");b.classList.add("js-pull-notification-message-content");b.innerHTML=Tf.sanitize(a.content);return b}static getMessageContentElement(a){return a.querySelector("span.js-pull-notification-message-content")}static createMessageImageElement(a,
b){let c=document.createElement("img");c.classList.add("js-pull-notification-message-image");c.src=a.image?"".concat(a.image):"".concat(b);return c}static getMessageImageElement(a){return a.querySelector("img.js-pull-notification-message-image")}static createMessageDateElement(a,b,c,d){let e=document.createElement("span");e.classList.add("js-pull-notification-message-created-date");e.innerText=z.formatDate(a,b,c,d);return e}static getMessageDateElement(a){return a.querySelector("span.js-pull-notification-message-created-date")}static createButtonElement(a,
b){var c;let d=document.createElement("a");d.classList.add("js-pull-notification-message-button");d.innerText=b.translations["message.btn.label"];d.href=a.link;d.target=null!==a&&void 0!==a&&null!==(c=a.settings)&&void 0!==c&&c.openLinkInNewTab?"_blank":"_self";return d}static getButtonElement(a){return a.querySelector(".js-pull-notification-message-button")}static createMessageDivider(){let a=document.createElement("hr");a.classList.add("js-pull-notification-message-divider");return a}constructor(){this._widgetBodyElement=
this._messagesBackdrop=this._bellIconElement=this._messagesCounter=this._messagesElement=this._messagesContainer=this._widgetCallButtonElement=this._callButtonElement=this._widgetContainer=this._connector=null}setConnector(a){this._connector=a}setWidgetBodyElement(a){this._widgetBodyElement=a}getWidgetBodyElement(){return this._widgetBodyElement}callButtonHostElement(){var a;return null===(a=this._connector)||void 0===a?void 0:a.getRootElement()}hostElement(){return document.body.querySelector(".js-pull-notification-host-element")}widgetContainer(){!this._widgetContainer&&
this.hostElement()&&(this._widgetContainer=this.hostElement().shadowRoot.querySelector(".js-pull-notification-widget-container"));return this._widgetContainer}widgetCallButtonElement(){this._widgetCallButtonElement||(this._widgetCallButtonElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-widget-call-button-container"));return this._widgetCallButtonElement}callButtonElement(){this._callButtonElement||(this._callButtonElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-call-button-container"));
return this._callButtonElement}messagesBackdropElement(){this._messagesBackdrop||(this._messagesBackdrop=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages-backdrop"));return this._messagesBackdrop}messagesContainer(){this._messagesContainer||(this._messagesContainer=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages-container"));return this._messagesContainer}messagesElement(){this._messagesElement||(this._messagesElement=this.hostElement().shadowRoot.querySelector(".js-pull-notification-messages"));
return this._messagesElement}messagesCounter(){this._messagesCounter||(this._messagesCounter=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-messages-counter"));return this._messagesCounter}bellIconElement(){this._bellIconElement||(this._bellIconElement=this.callButtonHostElement().shadowRoot.querySelector(".js-pull-notification-bell-icon"));return this._bellIconElement}}class cj{constructor(a){this.pullMessageElements=new la;this.mode=a;this.injectedNewMessagesIds=[];
this.updateReadStatusMessagesIds=[];this.injectedMessages=[];this._messages=[];this.messagesCount=0;this.loadigMessagesError=this.loadingMessages=!1;this._listeners=this._updateMessagesStatusFn=this._requestMessagesFn=this._retryFn=this._appearance=this._timeZone=null;this.setEventListeners()}setEventListeners(){this._listeners={retryButtonElementClick:{target:null,type:"click",listener:a=>{a.preventDefault();a.stopPropagation();this.retryRequests().then()}},retryButtonElementTouched:{target:null,
type:"touchend",listener:a=>{a.preventDefault();a.stopPropagation();this.retryRequests().then()}},widgetCallButtonContainerClick:{target:null,type:"click",listener:a=>{a.preventDefault();a.stopPropagation();this.toggleVisibility().then()}},widgetCallButtonContainerTouched:{target:null,type:"touchend",listener:a=>{a.preventDefault();a.stopPropagation();this.toggleVisibility().then()}},closeButtonClick:{target:null,type:"click",listener:a=>{a.preventDefault();a.stopPropagation();this.toggleVisibility().then()}},
closeButtonTouched:{target:null,type:"touchend",listener:a=>{a.cancelable&&a.preventDefault();a.stopPropagation();this.hideMessagesBackdropIfNeeded()}},messagesBackdropElementClick:{target:null,type:"click",listener:a=>{a.preventDefault();a.stopPropagation();this.toggleVisibility().then()}},messagesBackdropElementTouched:{target:null,touched:"touchend",listener:a=>{a.cancelable&&a.preventDefault();a.stopPropagation();this.hideMessagesBackdropIfNeeded()}},messagesBackdropElementTouchmove:{target:null,
type:"touchmove",listener:a=>{this.hideMessagesBackdropIfNeeded()}}}}getEventListener(a){return this._listeners[a].listener}getEventType(a){return this._listeners[a].type}getEventListenerTarget(a){return this._listeners[a].target}setEventListenerTarget(a,b){this._listeners[a].target=b}addListener(a,b,c){this._listeners[a]={type:b,listener:c,target:3<arguments.length&&void 0!==arguments[3]?arguments[3]:null}}destroy(){Object.keys(this._listeners).forEach(a=>{this._listeners[a].target&&this._listeners[a].target.removeEventListener(this._listeners[a].type,
this._listeners[a].listener)});let a=this.pullMessageElements.getWidgetBodyElement(),b=this.pullMessageElements.callButtonHostElement();a&&a.remove();b&&b.remove()}setMessages(a){this._messages=a}setTimeZone(a){this._timeZone=a}setAppearance(a){this._appearance=a}getAppearance(){return this._appearance}setRetryFn(a){this._retryFn=a}setUpdateMessagesStatusFn(a){this._updateMessagesStatusFn=a}setRequestMessagesFn(a){this._requestMessagesFn=a}toggleLoadingState(){this.loadingMessages=!this.loadingMessages;
this.toggleSystemMessages()}retryRequests(){return Promise.resolve().then(()=>{this.loadigMessagesError=!1;this.toggleLoadingState();this._retryFn()})}setStyles(a,b){Object.keys(b).forEach(c=>{a.style[c]=b[c]})}removeElements(a){let b=this.pullMessageElements.hostElement();a.forEach(a=>{a=b.shadowRoot.querySelectorAll(a);a.length&&a.forEach(a=>a.remove())})}clearSystemMessages(){this.loadingMessages||this.removeElements([".js-pull-notification-loading-messages-container"]);this.loadigMessagesError||
this.removeElements([".js-pull-notification-error-loading-messages-container"]);(this.loadingMessages||this.loadigMessagesError||this.injectedMessages.length)&&this.removeElements([".js-pull-notification-empty-messages-container"])}displayNoNotificationsMessage(){let a=document.createElement("div");a.classList.add("js-pull-notification-empty-messages-container");let b=document.createElement("span");b.classList.add("js-pull-notification-no-messages-info");b.innerText=this._appearance.translations[this._appearance.structures.models[3].props.emptyMessagesLabel];
a.appendChild(b);this.pullMessageElements.messagesElement().appendChild(a)}displayLoadingNotificationsMessage(){let a=document.createElement("div");a.classList.add("js-pull-notification-loading-messages-container");let b=document.createElement("div");b.classList.add("js-pull-notification-loading-messages");a.appendChild(b);this.pullMessageElements.messagesElement().appendChild(a)}displayLoadingErrorNotificationsMessage(){let a=document.createElement("div");a.classList.add("js-pull-notification-error-loading-messages-container");
let b=document.createElement("div");b.classList.add("js-pull-notification-error-loading-messages");b.innerHTML=this._appearance.translations[this._appearance.structures.models[3].props.retry.message];let c=this._appearance.structures.models[3].props.retry.buttonLabel,d=document.createElement("div");d.innerHTML="".concat(this._appearance.structures.media.reloadIcon," ").concat(this._appearance.translations[c]);d.classList.add("js-pull-notification-error-loading-messages-retry-button");this.setEventListenerTarget("retryButtonElementClick",
d);d.addEventListener(this.getEventType("retryButtonElementClick"),this.getEventListener("retryButtonElementClick"));this.setEventListenerTarget("retryButtonElementTouched",d);d.addEventListener(this.getEventType("retryButtonElementTouched"),this.getEventListener("retryButtonElementTouched"));a.appendChild(b);a.appendChild(d);this.pullMessageElements.messagesElement().appendChild(a)}toggleSystemMessages(){this.clearSystemMessages();this.loadingMessages?this.displayLoadingNotificationsMessage():this.loadigMessagesError?
this.displayLoadingErrorNotificationsMessage():this.loadingMessages||this.loadigMessagesError||this.injectedMessages.length||this.displayNoNotificationsMessage()}getDefaultMessagesHeight(){let a=this.pullMessageElements.messagesElement().scrollHeight,b=500,c=parseInt(this._appearance.structures.models[1].props.styles.elements[2].inline.maxHeight,10);0<c&&(b=c);return a>b?b:a}defaultMenuPosition(){var a,b,c=this._appearance.structures.models[1].props.styles.elements[0].offsetPosition;let d=parseInt(null!==
(a=null===c||void 0===c?void 0:c.right)&&void 0!==a?a:"50",10);a=parseInt(null!==(b=null===c||void 0===c?void 0:c.top)&&void 0!==b?b:"10",10);b=this.pullMessageElements.callButtonElement().getBoundingClientRect();c=this.pullMessageElements.messagesContainer().getBoundingClientRect();return{messagesContainerStyles:{top:"".concat(a+b.top+b.height,"px"),left:"".concat(d+b.left+b.width-c.width,"px")},messagesStyles:{maxHeight:"".concat(this.getDefaultMessagesHeight(),"px")}}}adjustPosition(a,b,c){let d=
b,e;if(a+d<=c)return{top:a};if(0<a)for(;0<a;){e=a+d;if(e<=c)return{top:a};a-=10}0>=a&&(a=0,b>c&&(d=c));return{top:a,maxHeight:d}}rightMenuPosition(){var a=this.pullMessageElements.widgetCallButtonElement().getBoundingClientRect();let b=window.innerHeight||document.documentElement.clientHeight,c=25+a.left+a.width;a=this.adjustPosition(a.top-69+a.height/2,this.getDefaultMessagesHeight(),b);return{messagesContainerStyles:{transition:"top 0.5s linear 0s",top:"".concat(a.top,"px"),left:"".concat(c,"px")},
messagesStyles:{maxHeight:null!==a&&void 0!==a&&a.maxHeight?"".concat(a.maxHeight,"px"):"".concat(this.getDefaultMessagesHeight(),"px")}}}messagesPosition(){var a;let b=null===(a=this._appearance.structures.shared)||void 0===a?void 0:a.menuPosition;if(b)switch(b){case "right":return this.rightMenuPosition()}return this.defaultMenuPosition()}getBellIcon(){return'<div class="js-pull-notification-bell-icon">\n        '.concat(this._appearance.structures.media.bellIcon,"\n    </div>")}async setMessageReadStatus(){await (new Promise(a=>
{let b=this.pullMessageElements.messagesElement();this.updateReadStatusMessagesIds.forEach(a=>{var c=b.querySelector(".js-pull-notification-message#".concat(a));c&&(c.classList.add("js-pull-notification-message-read"),c=this.injectedMessages.findIndex(b=>b.id===a),-1<c&&(this.injectedMessages[c].newMessage=!1))});this.updateReadStatusMessagesIds=[];a()})).catch(a=>{})}hideMessagesBackdropIfNeeded(){"visible"===this.pullMessageElements.messagesBackdropElement().style.visibility&&this.toggleVisibility().then()}updateMessagesContainerPosition(){var a=
this.pullMessageElements.messagesContainer(),b=this.messagesPosition();this.setStyles(a,b.messagesContainerStyles);a=b.messagesStyles;"default"!==a.maxHeight&&(b=this.pullMessageElements.messagesElement(),this.setStyles(b,a))}async toggleVisibility(){let a=this.pullMessageElements.messagesBackdropElement(),b=this.pullMessageElements.messagesContainer();"hidden"===a.style.visibility?(this.updateMessagesContainerPosition(),a.style.visibility="visible",b.style.visibility="visible",b.style.opacity="1",
this.toggleLoadingState(),await this._requestMessagesFn()):(b.style.opacity="0",setTimeout(()=>{b.style.visibility="hidden"},300),a.style.visibility="hidden",this.loadigMessagesError=!1,this.clearSystemMessages(),await this._updateMessagesStatusFn(),await this.setMessageReadStatus(),this.updateUnreadCount(0))}prependMessages(a){this.removeElements([".js-pull-notification-message",".js-pull-notification-message-divider"]);let b=this.pullMessageElements.messagesElement(),c=b.querySelectorAll(".js-pull-notification-message");
a.length&&(c.length&&b.prepend(la.createMessageDivider()),a.reverse().forEach((c,e)=>{0!==e&&e<=a.length-1&&b.prepend(la.createMessageDivider());b.prepend(c)}))}updateUnreadCount(a){this.messagesCount=a;let b=this.pullMessageElements.messagesCounter(),c=this.pullMessageElements.bellIconElement();if(100<a||0<a&&100>a)b.style.display="flex",b.innerHTML=100<a?"":"".concat(this.messagesCount),c.classList.add("js-pull-notification-bell-icon-active");0===a&&(b.style.display="none",b.innerHTML="",c.classList.remove("js-pull-notification-bell-icon-active"))}toggleErrorState(){this.loadingMessages=
!1;this.loadigMessagesError=!0;this.toggleSystemMessages()}updateMessages(){let a=[];this._messages.length&&(this._messages.sort((a,c)=>new Date(c.createDate)-new Date(a.createDate)).forEach(b=>{b.newMessage&&this.injectedNewMessagesIds.push(b.id);b=la.createMessageElement(this._appearance,b,this._timeZone,this.mode,this._updateMessagesStatusFn,this.setMessageReadStatus,this.updateUnreadCount);a.push(b)}),this.injectedMessages=this._messages.slice());this.toggleLoadingState();this.prependMessages(a);
this.updateMessagesContainerPosition()}createCallButton(a){var b,c,d,e,f,g=document.createElement("div");g.classList.add("js-pull-notification-call-button-host-element");g.style.display="inline-flex";g.style.alignSelf="center";g.style.position="relative";g.style.justifyContent="center";let k=null!==(b=null===(c=this._appearance.structures.models[4])||void 0===c?void 0:null===(d=c.props.styles.elements[1].inline)||void 0===d?void 0:d.width)&&void 0!==b?b:null;k&&(g.style.width=k);g.attachShadow({mode:"open"});
c=$b.createCallButtonStyleElement(this._appearance);b=document.createElement("div");b.classList.add("js-pull-notification-widget-call-button-container");b.innerHTML=c;c=document.createElement("div");c.classList.add("js-pull-notification-call-button-container");c.insertAdjacentHTML("beforeend",this.getBellIcon());d=document.createElement("div");d.style.display="none";d.classList.add("js-pull-notification-messages-counter");c.appendChild(d);b.appendChild(c);if(null!==(e=null===(f=this._appearance.structures.shared)||
void 0===f?void 0:f.showLabel)&&void 0!==e&&e){var l,h;e=document.createElement("div");e.classList.add("js-pull-notification-call-button-label");e.style.display=a?"none":"block";a=null===(l=this._appearance.structures.models[0])||void 0===l?void 0:null===(h=l.props)||void 0===h?void 0:h.menuLabel;e.innerText=a?this._appearance.translations[a]:"";b.appendChild(e)}this.setEventListenerTarget("widgetCallButtonContainerClick",b);b.addEventListener(this.getEventType("widgetCallButtonContainerClick"),this.getEventListener("widgetCallButtonContainerClick"));
this.setEventListenerTarget("widgetCallButtonContainerTouched",b);b.addEventListener(this.getEventType("widgetCallButtonContainerTouched"),this.getEventListener("widgetCallButtonContainerTouched"));g.shadowRoot.appendChild(b);g=new dd(this._appearance.placement,g,null);g.connectRootToTarget();return g}closeButtonHeader(){var a,b;let c=document.createElement("div");c.classList.add("js-pull-close-header");let d=document.createElement("div");d.classList.add("js-pull-close-header-message");let e=null===
(a=this._appearance.structures.models[1])||void 0===a?void 0:null===(b=a.props)||void 0===b?void 0:b.messagesHeader;d.innerText=e?this._appearance.translations[e]:"";a=document.createElement("div");a.classList.add("js-pull-close");this.setEventListenerTarget("closeButtonClick",a);a.addEventListener(this.getEventType("closeButtonClick"),this.getEventListener("closeButtonClick"));this.setEventListenerTarget("closeButtonTouched",a);a.addEventListener(this.getEventType("closeButtonTouched"),this.getEventListener("closeButtonTouched"));
b=la.createMessageDivider();c.appendChild(d);c.appendChild(a);c.appendChild(b);return c}createWidgetBody(){let a=document.createElement("div");a.classList.add("js-pull-notification-host-element");a.style.alignSelf="center";a.attachShadow({mode:"open"});var b=$b.createStyleElement(this._appearance);let c=document.createElement("div");c.classList.add("js-pull-notification-widget-container");c.innerHTML=b;b=this.closeButtonHeader();let d=document.createElement("div");d.classList.add("js-pull-notification-messages-container");
d.style.opacity="0";setTimeout(()=>{d.style.visibility="hidden"},300);let e=document.createElement("div");e.classList.add("js-pull-notification-messages");this._listeners.windowResize={type:"resize",listener:a=>{this.updateMessagesContainerPosition()}};this.setEventListenerTarget("windowResize",window);window.addEventListener(this.getEventType("windowResize"),this.getEventListener("windowResize"));this.addListener("windowScroll","scroll",()=>{this.updateMessagesContainerPosition()},window);window.addEventListener(this.getEventType("windowScroll"),
this.getEventListener("windowScroll"));let f=document.createElement("div");f.classList.add("js-pull-notification-messages-backdrop");f.style.visibility="hidden";this.setEventListenerTarget("messagesBackdropElementClick",f);f.addEventListener(this.getEventType("messagesBackdropElementClick"),this.getEventListener("messagesBackdropElementClick"));this.setEventListenerTarget("messagesBackdropElementTouched",f);f.addEventListener(this.getEventType("messagesBackdropElementTouched"),this.getEventListener("messagesBackdropElementTouched"));
this.setEventListenerTarget("messagesBackdropElementTouchmove",f);f.addEventListener(this.getEventType("messagesBackdropElementTouchmove"),this.getEventListener("messagesBackdropElementTouchmove"));d.appendChild(b);d.appendChild(e);c.appendChild(f);c.appendChild(d);a.shadowRoot.appendChild(c);return a}render(a){this.pullMessageElements.setWidgetBodyElement(this.createWidgetBody());document.body.appendChild(this.pullMessageElements.getWidgetBodyElement());a=this.createCallButton(a);this.pullMessageElements.setConnector(a);
this.toggleSystemMessages()}}class Gc{constructor(a,b,c,d,e,f,g){this.instanceId=f;this.activatorParams=a;this.messagesStatus=b;this.messagesService=c;this.unreadMessagesCount=d;this.messagesAppearance=e;this.widget=new cj(null!==g&&void 0!==g?g:"view");this.widget.setRetryFn(this.retryRequests.bind(this));this.widget.setUpdateMessagesStatusFn(this.updateMessagesStatus.bind(this));this.widget.setRequestMessagesFn(this.requestMessages.bind(this))}async activate(){this.widget.setTimeZone(this.activatorParams.timeZone);
return this.loadAppearance().then(a=>{if(a&&(a.placement.selectors||a.placement.selector)&&(new dd(a.placement,document.createElement("div"),null)).getTargetElement())return this.initRender(a)}).catch(a=>{var b,c;401===(null===a||void 0===a?void 0:null===(b=a.error)||void 0===b?void 0:b.status)?v.warn("APP_INBOX_WIDGET_ACTIVATION",{instanceId:this.instanceId,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):a.message&&a.message.startsWith("AuthTokenHolder#requestToken")?
v.warn("APP_INBOX_WIDGET_ACTIVATION",{instanceId:this.instanceId,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorMessage:a.message}):404!==(null===a||void 0===a?void 0:null===(c=a.error)||void 0===c?void 0:c.status)&&v.error(a,"APP_INBOX_WIDGET_ACTIVATION")})}initRender(a){var b,c;this.widget.setAppearance(a);this.widget.render(null!==(b=null===(c=this.activatorParams)||void 0===c?void 0:c.hideLabel)&&void 0!==b?b:!1);return this.startRequests()}loadAppearance(){return this.messagesAppearance.loadAppearance().then(a=>
{if(a)return a})}requestMessages(){this.messagesService.requestMessages().then(a=>{a?(this.widget.setMessages(a),this.widget.updateMessages()):this.widget.toggleErrorState()})}requestUnreadMessagesCount(){return this.unreadMessagesCount.requestCount().then(a=>{a&&this.widget.updateUnreadCount(a)})}updateMessagesStatus(){this.widget.injectedNewMessagesIds.length&&this.messagesStatus.updateMessagesStatus(this.widget.injectedNewMessagesIds).then(a=>{a?(this.widget.updateReadStatusMessagesIds=this.widget.injectedNewMessagesIds.slice(),
this.widget.injectedNewMessagesIds=[]):setTimeout(()=>{this.updateMessagesStatus()},Gc.RETRY_TIMEOUT_MS)}).catch(a=>{setTimeout(()=>{this.updateMessagesStatus()},Gc.RETRY_TIMEOUT_MS);401===(null===a||void 0===a?void 0:a.status)?v.warn("APP_INBOX_MESSAGES_STATUS_UPDATING",{instanceId:this.instanceId,ids:this.widget.injectedNewMessagesIds,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):v.error(a,"APP_INBOX_MESSAGES_STATUS_UPDATING")})}startRequests(){this.retryTimerId=
setInterval(async()=>{this.requestUnreadMessagesCount()},Gc.TIMER_INTERVAL_MS);return this.requestUnreadMessagesCount()}retryRequests(){this.requestMessages()}stopRequests(){clearInterval(this.retryTimerId)}destroy(){this.stopRequests();this.widget.destroy();this.widget=this.instanceId=this.activatorParams=this.messagesStatus=this.messagesService=this.unreadMessagesCount=this.messagesAppearance=null}}n(Gc,"TIMER_INTERVAL_MS",6E4);n(Gc,"RETRY_TIMEOUT_MS",2E4);class Vp{constructor(a){this.widget=a}previewMessage(a,
b,c){this.widget.setAppearance(ab._parseAppearance(a));this.activatorParams=c;a=$b.createStyleElement(this.widget.getAppearance(),!0);c=document.createElement("div");c.classList.add("js-pull-notification-messages-container");c.style.position="relative";let d=document.createElement("div");d.classList.add("js-pull-notification-messages");d.appendChild(la.createMessageElement(this.widget.getAppearance(),b,this.activatorParams.timeZone,"preview"));c.appendChild(d);b=document.createElement("div");b.classList.add("js-pull-notification-messages-preview-overlay");
c.appendChild(b);b=document.createElement("div");b.attachShadow({mode:"open"});b.shadowRoot.innerHTML=a;b.shadowRoot.appendChild(c);return b}}class Uf{constructor(){this.errorsInRowCount=0;this.lastErrorTime=void 0}isErrorsInRowCountCritical(){return this.errorsInRowCount>=Uf.MAX_ERRORS_IN_ROW_COUNT}increaseErrorsInRowCount(){this.errorsInRowCount+=1}resetErrorsInRowCount(){this.errorsInRowCount=0}}n(Uf,"MAX_ERRORS_IN_ROW_COUNT",10);class Wp{constructor(a,b,c){this.authTokenHolder=a;this.errorsHolder=
b;this.instanceId=c}doRequest(a,b,c,d,e,f){this.url=c;this.method=d;this.cb=a;this.message=b;this.body=null!==e&&void 0!==e?e:null;this.contentType=null!==f&&void 0!==f?f:null;return this.authTokenHolder.refreshAuthTokenIfNeeded(this._executeRequest.bind(this))}_executeRequest(a){if(this.errorsHolder.isErrorsInRowCountCritical())return Promise.resolve({status:511,body:null});let b={[ie.AUTH_TOKEN_HEADER_NAME]:a};this.contentType&&(b["Content-Type"]=this.contentType);return rb.execute(this.url,this.method,
this.body,b).then(a=>{this.errorsHolder.resetErrorsInRowCount();if(200===a.status){let b=a.headers.get(ie.AUTH_TOKEN_HEADER_NAME);this.authTokenHolder.setAuthToken(b)}return this.cb(a)}).catch(b=>{this.errorsHolder.increaseErrorsInRowCount();401===(null===b||void 0===b?void 0:b.status)?v.warn(this.message,{instanceId:this.instanceId,url:this.url,token:a,date:(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Kiev"}),errorStatus:401}):v.error(b,this.message);return{status:b.status,body:null}})}}class dj{static getAuthTokenCallback(a){return a.hasOwnProperty("getAuthToken")?
a.getAuthToken:a.getAuthTokenCallback}activate(a){let b=Math.floor(1E6*Math.random());var c=new Uf,d=new ie(dj.getAuthTokenCallback(a)),e=new Wp(d,c,b);c=new Ab(e);d=new Zb(e);let f=new Yb(e);e=new ab(e,a);this.pullMessagesContainer=new Gc(a,c,d,f,e,b);this.pullMessagesContainer.activate().then()}previewMessage(a,b,c){return(new Vp(new cj("preview"))).previewMessage(a,b,c)}reactivate(a){this.pullMessagesContainer&&this.pullMessagesContainer.destroy();this.activate(a)}}var Vf=new dj;class Xp{constructor(a){this.eventsTrackingService=
a}activate(){this.eventsTrackingService.trackPageView()}}var Yp=new Xp(tb);class Zp{constructor(a,b){n(this,"eventListeners",{});this.store=a;this.urlChangeService=b;this.navigationChangeSubscriptions=[]}activate(){this._isCrawlerConfigHasAddToWishlist()&&(this._addEventListeners(),this.navigationChangeSubscriptions.push(this.urlChangeService.subscribeSingle(a=>this._urlChangeListener(a))))}unsubscribeDataCollectorListeners(){this.navigationChangeSubscriptions.forEach(a=>a.unsubscribe())}_getContainerElement(a,
b){return a.closest(b.containerElement.selector)}_sendData(a){a.productKey&&tb.trackInternalEvent(u.AddToWishlist,{[u.AddToWishlist]:a})}_eventHandler(a){this.store.getConfig().crawler.add_to_wishlist.forEach(b=>{let c=b.actionElement.selector;a.composedPath().forEach(d=>{d.matches&&d.matches(c)&&(d=this._getContainerElement(a.target,b),d=(new Ua)._mapGetterConfigsObject(b.values,!0,d),this._sendData(d))})})}_addEventListeners(){this.listener=function(a){this._eventHandler(a)};document.body.addEventListener("touchend",
this.listener.bind(this));document.body.addEventListener("click",this.listener.bind(this))}_removeEventListeners(){this.listener&&(document.body.removeEventListener("touchend",this.listener),document.body.removeEventListener("click",this.listener))}_tryCancelChangeObservable(){this._removeEventListeners()}_urlChangeListener(){this._tryCancelChangeObservable();this.unsubscribeDataCollectorListeners()}_isCrawlerConfigHasAddToWishlist(){return!!this.store.getConfig().crawler.add_to_wishlist}}var $p=
new Zp(m,ef,Qi);class aq{static activate(){let a=ag();a&&this.set(a)}static set(a){var b;let c=null!==(b=m.getUserInfo())&&void 0!==b?b:{};m.setUserInfo({...c,esContactId:a})}}class bq{static activate(){var a=new URL(window.location.href);var b=a.searchParams.get("etm_term");a=a.searchParams.get("utm_source");b&&a&&a.toLowerCase().includes("esputnik")?(b=atob(b),b=(b=(new URLSearchParams(b)).get("iid"))?b:null):b=void 0;b&&this.set(b)}static set(a){var b;let c=null!==(b=m.getUserInfo())&&void 0!==
b?b:{};m.setUserInfo({...c,iid:a})}}class cq{init(a,b){window.eS.__inited=!0;a=this._mapConfig(a);m.setActivatorConfig(a);m.setPrefix("es","");m.setInstanceDebugMode(!!localStorage.getItem("claspo-scripts"));a.RECOMS&&(bq.activate(),aq.activate(),nn.activate(),Qn.activate());a.TRACKING?(zc.activate(),tb.activate(),Vn.activate(),$p.activate()):Yp.activate();a.FORMS&&Sf.activate({runContactIdDetector:!0});(a.PULL_MESSAGES||a.APP_INBOX)&&Vf.activate(b);Sn.activate();aa.activate();Tp.execute()}_mapConfig(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};let b=m.getConfig(),c=a.hasOwnProperty("TRACKING")?this._mapModuleConfig(a.TRACKING):!0,d=a.hasOwnProperty("RECOMS")?this._mapModuleConfig(a.RECOMS):!0,e=a.hasOwnProperty("FORMS")?this._mapModuleConfig(a.FORMS):!0,f=a.hasOwnProperty("PULL_MESSAGES")?this._mapModuleConfig(a.PULL_MESSAGES):!1;a=a.hasOwnProperty("APP_INBOX")?this._mapModuleConfig(a.APP_INBOX):!1;let g=b.features&&Object.values(b).length;return{TRACKING:!1===c?!1:g?b.features.tracking:
!0,RECOMS:d,FORMS:!1===e?!1:D.areFormsPresent(),PULL_MESSAGES:f,APP_INBOX:a}}_mapModuleConfig(a){return!!a}}class ej{static getInstance(){var a=function(){a.c(arguments)};a.q=[];a.c=function(){a.q.push(arguments)};window.eS=window.eS||a;return window.eS}}var dq=TypeError,je=function(a,b){this.stopped=a;this.result=b},fj=je.prototype,eq=function(a,b,c){var d=!(!c||!c.AS_ENTRIES),e=!(!c||!c.IS_RECORD),f=!(!c||!c.IS_ITERATOR),g=!(!c||!c.INTERRUPTED),k=Nb(b,c&&c.that),l,h=function(a){m&&gf(m,"normal",
a);return new je(!0,a)};b=function(a){return d?(S(a),g?k(a[0],a[1],h):k(a[0],a[1])):g?k(a,h):k(a)};if(e)var m=a.iterator;else if(f)m=a;else{f=Uc(a);if(!f)throw dq(Ic(a)+" is not iterable");if(Te(f)){e=0;for(f=va(a.length);f>e;e++)if((l=b(a[e]))&&Fb(fj,l))return l;return new je(!1)}m=oc(a,f)}for(a=e?a.next:m.next;!(e=O(a,m)).done;){try{l=b(e.value)}catch(L){gf(m,"throw",L)}if("object"==typeof l&&l&&Fb(fj,l))return l}return new je(!1)};ea({target:"Object",stat:!0},{fromEntries:function(a){var b={};
eq(a,function(a,d){Fd(b,a,d)},{AS_ENTRIES:!0});return b}});class fq{run(a,b,c){this.validation(a,b);this._storeAndSend(a,b,!1,c)}runWithTags(a,b,c){this.validation(a,b);this._storeAndSend(a,b,!0,c)}_transformEventTypeToPageType(a){let b=(a||"").toUpperCase().includes("NOTFOUND")?x.NOT_FOUND:(a||"").toUpperCase().replace("PAGE","").replace("CART","");return Object.values(x).find(a=>a.includes(b))||x.UNKNOWN}_storeEventData(a,b,c){switch(c){case x.PRODUCT:return a=this._getPayloadObject(a,b).productKey,
m.setProductPageId(a),!0;case x.CATEGORY:return a=this._getPayloadObject(a,b).categoryKey,m.setCategoryKey(a),!0;case x.STATUS_CART:{if(!a)return!0;b=this._getPayloadObject(a,b);c=b.map(a=>a.productKey).filter(a=>!!a);let e=m.getState().tracking.statusCart;var d=aa.getUserCookie();d=$d.createIdentifier(b,d);return $d._isIdentifierChanged(e.identifier,d)?(m.setStatusCartProducts(c),m.setPurchasedItems(b),m.setStatusCartIdentifier({GUID:a.GUID||"",identifier:m.getState().tracking.statusCart.identifier}),
!0):!1}case x.ANY:return a=this._getPayloadObject(a,b),a.productKey&&m.setProductPageId(a.productKey),a.categoryKey&&m.setCategoryKey(a.categoryKey),!1;default:return!0}}_storePageType(a,b){m.setPageType({previous:b,current:a})}_getPayloadObject(a,b){a=a[b];return a.Product?a.Product:a.Products?a.Products:a}_storeAndSend(a,b,c,d){a===u.CustomerData&&m.setCustomerData({email:b.CustomerData.user_email,phone:b.CustomerData.user_phone});Bj(a,b);if(this._isTrackingEnabled())this._sendEvent(a,b,c,d);else{var e=
this._transformEventTypeToPageType(a);if(e){m.setProductPageId(null);m.setCategoryKey(null);a!==u.StatusCartPage&&m.setStatusCartProducts(null);let f=m.getState().pageType.current,g=this._storeEventData(b,a,e);this._storePageType(e,f);zc.updateState({currentPageType:e,prevPageType:f});g&&this._sendEvent(a,b,c,d)}}}_sendEvent(a,b,c,d){a!==u.AnyPage&&(c?tb.trackEventV2(a,b,Date.now(),d):tb.trackEvent(a,b,Date.now(),d))}_isTrackingEnabled(){return m.getActivatorConfig().TRACKING}validation(a,b){if(a!==
u.StatusCartPage&&a!==u.MainPage&&a!==u.NotFound&&a!==u.PageView&&a!==u.AnyPage){if(!a||"string"!==typeof a)throw Error('"eventType" must be a string');if(!(0<Object.keys(b||{}).length))throw Error('"eventPayload" must be an object');}}}var gj=new fq;class hd{static paramObjectHasFormVariantIdProperty(a){return a[0][1]&&a[0][1].hasOwnProperty("formVariantId")&&"string"===typeof a[0][1].formVariantId&&a[0][1].formVariantId.length?!0:!1}static callbackAsSecondArgPresent(a){return a[0][2]&&"function"===
typeof a[0][2]?!0:!1}static isShowFormFromCustomCodeValid(a){return hd.paramObjectHasFormVariantIdProperty(a)}static isOnWidgetEventsValid(a){return hd.paramObjectHasFormVariantIdProperty(a)&&hd.callbackAsSecondArgPresent(a)}}class gq{constructor(a){this.modulesInitService=a;this.hasFormsInQueue=this.formsReadyToProcessCommands=!1;C.on("COMPONENTS_LOADED",()=>{this.formsReadyToProcessCommands=!0;this.hasFormsInQueue&&(this.hasFormsInQueue=!1,this._processEventQueue(ej.getInstance()))})}process(){let a=
ej.getInstance(),b=a.q.find(a=>"init"===a[0][0]);a.__inited||(a.__inited=!0,b?this.modulesInitService.init(b[0][1],b[0][2]):this.modulesInitService.init(),this._processEventQueue(a))}_processEventQueue(a){this._processSendEventQueue(a);this._processSendEventWithTagsQueue(a);this._processGetRecommendationsQueue(a);this._processShowFormsQueue(a);this._processPreviewPullMessageQueue(a);this._processReInitAppInbox(a);this._processOnWidgetEventsQueue(a);let b=this;a.q.push=function(){Array.prototype.push.apply(this,
arguments);b._processEventQueue(a)}}_processSendEventQueue(a){let b=a.q.filter(a=>"sendEvent"===a[0][0]);a.q=a.q.filter(a=>"sendEvent"!==a[0][0]);let c={apiMethod:!0};b.forEach(a=>{gj.run(a[0][1],a[0][2],c)})}_processSendEventWithTagsQueue(a){let b=a.q.filter(a=>"sendEventWithTags"===a[0][0]);a.q=a.q.filter(a=>"sendEventWithTags"!==a[0][0]);let c={apiMethod:!0};b.forEach(a=>{gj.runWithTags(a[0][1],a[0][2],c)})}_processGetRecommendationsQueue(a){let b=a.q.filter(a=>"getRecommendations"===a[0][0]);
a.q=a.q.filter(a=>"getRecommendations"!==a[0][0]);b.forEach(a=>{let b=a[0][1],c=a[0][2];b.apiMethod=!0;let f=new Gi(b);f.getRecommendations(b).then(a=>{let d=f.getErrors();!a.length&&d.length?(v.warn("GET_RECOMMENDATION_API",{variantId:b.variantId,productsCount:a.length,errors:d}),c(d,null)):(v.info("GET_RECOMMENDATION_API",{variantId:b.variantId,productsCount:a.length,errors:d}),c(null,a))}).catch(a=>{v.warn("GET_RECOMMENDATION_API",{variantId:b.variantId,productsCount:0,errors:[a.toString()]});
c(a,null)})})}_processPreviewPullMessageQueue(a){let b=a.q.filter(a=>"previewPullMessage"===a[0][0]);a.q=a.q.filter(a=>"previewPullMessage"!==a[0][0]);b.forEach(a=>{var b=a[0][1];a=a[0][2];b=Vf.previewMessage(b.appearance,b.message,b.activatorParams);a(null,b)})}_processReInitAppInbox(a){let b=a.q.filter(a=>"reInitAppInbox"===a[0][0]);a.q=a.q.filter(a=>"reInitAppInbox"!==a[0][0]);b.forEach(a=>{Vf.reactivate(a[0][1])})}_processShowFormsQueue(a){if(this.formsReadyToProcessCommands){var b=a.q.filter(a=>
"showForm"===a[0][0]);a.q=a.q.filter(a=>"showForm"!==a[0][0]);b.forEach(a=>{let b=a[0][1];hd.isShowFormFromCustomCodeValid(a)&&Sf.showFormFromCustomCode(b)})}else this.hasFormsInQueue=!0}_processOnWidgetEventsQueue(a){if(this.formsReadyToProcessCommands){var b=a.q.filter(a=>"onWidgetEvents"===a[0][0]);a.q=a.q.filter(a=>"onWidgetEvents"!==a[0][0]);b.forEach(a=>{hd.isOnWidgetEventsValid(a)&&Sf.addOnWidgetEventsHandlers(a[0][1],a[0][2])})}else this.hasFormsInQueue=!0}}let hq=new cq;(function(a){function b(){if(!/(googlebot\/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i.test(navigator.userAgent))try{(new Cj(a)).run(),
window.scriptLog09u8y9("OK")}catch(c){v.error(c)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{b()}):b()})(new gq(hq))})()

} catch (error) {
    window.scriptLog09u8y9('ERROR', 'BOOTSTRAP_ERROR', error);
}
